"use strict";function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){angular.module("skykitProvisioning",["ngAnimate","ngCookies",//  'ngTouch'
"ngSanitize","restangular","ui.router","hSweetAlert","ui.bootstrap","ncy-angular-breadcrumb","directive.g+signin","ngProgress","datetimepicker","ngMaterial","ngclipboard","toastr","angular-cache"])}(),function(){angular.module("skykitProvisioning",["ngAnimate","ngCookies",//  'ngTouch'
"ngSanitize","restangular","ui.router","hSweetAlert","ui.bootstrap","ncy-angular-breadcrumb","directive.g+signin","ngProgress","datetimepicker","ngMaterial","ngclipboard","toastr","angular-cache"])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AdminCtrl",["AdminService","SessionsService","ToastsService","$mdDialog","DistributorsService",function(e,t,n,r,i){var a=this;return a.getAllDistributors=function(){a.loadingAllDistributors=!0;var t=e.getAllDistributors();return t.then(function(e){return a.loadingAllDistributors=!1,a.allDistributors=e})},a.addUserToDistributor=function(t,i,o,s,c){o||(o=!1);var l=o?"with":"without";// no option to select distributor is given when there is only one option
s||(s=a.distributorsAsAdmin[0]);var d=r.confirm({title:"Are you sure?",textContent:i+" will be added to "+s+"\n        "+l+" administrator privileges",targetEvent:t,ok:"Of course!",cancel:"Oops, nevermind."});return r.show(d).then(function(){var t=e.addUserToDistributor(i,s,o);return t.then(function(e){return n.showSuccessToast(e.message),a.user={},c.$setPristine(),c.$setUntouched(),setTimeout(function(){return a.getUsersOfDistributor()},2e3)}),t["catch"](function(e){return n.showErrorToast(e.data.message)})})},a.makeDistributor=function(t,i,o,s){var c=r.confirm({title:"Are you sure?",textContent:"If you proceed, "+i+" will be created.",targetEvent:t,ariaLabel:"Lucky day",ok:"Yeah!",cancel:"Forget it."});return r.show(c).then(function(){var t=e.makeDistributor(i,o);return t.then(function(e){return a.distributor={},s.$setPristine(),s.$setUntouched(),n.showSuccessToast(e.message),setTimeout(function(){return a.allDistributors=a.getAllDistributors()},2e3)}),t["catch"](function(e){return n.showErrorToast(e.data.message)})})},a.getUsersOfDistributor=function(){a.loadingUsersOfDistributor=!0;var n=t.getCurrentDistributorKey(),r=e.getUsersOfDistributor(n);return r.then(function(e){return a.loadingUsersOfDistributor=!1,a.usersOfDistributor=e})},a.switchDistributor=function(e){return i.switchDistributor(e),n.showSuccessToast("Distributor "+e.name+" selected!")},a.initialize=function(){return a.getUsersOfDistributor(),a.getAllDistributors(),a.isAdmin=t.getIsAdmin(),a.distributorsAsAdmin=t.getDistributorsAsAdmin(),a.currentDistributorName=t.getCurrentDistributorName(),a.isAdmin?a.getAllDistributors():void 0},a}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AdminCtrl",["AdminService","SessionsService","ToastsService","$mdDialog","DistributorsService",function(e,t,n,r,i){var a=this;return a.getAllDistributors=function(){a.loadingAllDistributors=!0;var t=e.getAllDistributors();return t.then(function(e){return a.loadingAllDistributors=!1,a.allDistributors=e})},a.addUserToDistributor=function(t,i,o,s,c){o||(o=!1);var l=o?"with":"without";// no option to select distributor is given when there is only one option
s||(s=a.distributorsAsAdmin[0]);var d=r.confirm({title:"Are you sure?",textContent:i+" will be added to "+s+"\n        "+l+" administrator privileges",targetEvent:t,ok:"Of course!",cancel:"Oops, nevermind."});return r.show(d).then(function(){var t=e.addUserToDistributor(i,s,o);return t.then(function(e){return n.showSuccessToast(e.message),a.user={},c.$setPristine(),c.$setUntouched(),setTimeout(function(){return a.getUsersOfDistributor()},2e3)}),t["catch"](function(e){return n.showErrorToast(e.data.message)})})},a.makeDistributor=function(t,i,o,s){var c=r.confirm({title:"Are you sure?",textContent:"If you proceed, "+i+" will be created.",targetEvent:t,ariaLabel:"Lucky day",ok:"Yeah!",cancel:"Forget it."});return r.show(c).then(function(){var t=e.makeDistributor(i,o);return t.then(function(e){return a.distributor={},s.$setPristine(),s.$setUntouched(),n.showSuccessToast(e.message),setTimeout(function(){return a.allDistributors=a.getAllDistributors()},2e3)}),t["catch"](function(e){return n.showErrorToast(e.data.message)})})},a.getUsersOfDistributor=function(){a.loadingUsersOfDistributor=!0;var n=t.getCurrentDistributorKey(),r=e.getUsersOfDistributor(n);return r.then(function(e){return a.loadingUsersOfDistributor=!1,a.usersOfDistributor=e})},a.switchDistributor=function(e){return i.switchDistributor(e),n.showSuccessToast("Distributor "+e.name+" selected!")},a.initialize=function(){return a.getUsersOfDistributor(),a.getAllDistributors(),a.isAdmin=t.getIsAdmin(),a.distributorsAsAdmin=t.getDistributorsAsAdmin(),a.currentDistributorName=t.getCurrentDistributorName(),a.isAdmin?a.getAllDistributors():void 0},a}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AuthenticationCtrl",["$scope","$log","$state","$timeout","identity","sweet","SessionsService","ProgressBarService","ProofPlayService","DevicesService","TenantsService",function(e,t,n,r,i,a,o,s,c,l,d){var u=this;return u.onGooglePlusSignInSuccess=function(e,t){u.googlePlusSignInButtonClicked||s.start();var n=o.login(t);return n.then(u.loginSuccess,u.loginFailure)},u.onGooglePlusSignInFailure=function(){return u.googlePlusSignInButtonClicked?(s.complete(),a.show("Oops...","Unable to authenticate to Google+.","error")):void 0},e.$on("event:google-plus-signin-success",u.onGooglePlusSignInSuccess),e.$on("event:google-plus-signin-failure",u.onGooglePlusSignInFailure),u.initializeSignIn=function(){return u.clientId=i.OAUTH_CLIENT_ID,u.state=i.STATE,u.googlePlusSignInButtonClicked=!1},u.initializeSignOut=function(){return o.removeUserInfo(),r(u.proceedToSignedOut,50)},u.loginSuccess=function(){return s.complete(),c.proofplayCache.removeAll(),d.tenantCache.removeAll(),l.deviceCache.removeAll(),l.deviceByTenantCache.removeAll(),n.go("distributor_selection")},u.loginFailure=function(){return s.complete(),a.show("Oops...","Unable to authenticate to Stormpath.","error")},u.proceedToSignedOut=function(){return n.go("signed_out")},u.proceedToSignIn=function(){return n.go("sign_in")},u.onClickGooglePlusSignIn=function(){return u.googlePlusSignInButtonClicked=!0,s.start()},u}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AuthenticationCtrl",["$scope","$log","$state","$timeout","identity","sweet","SessionsService","ProgressBarService","ProofPlayService","DevicesService","TenantsService",function(e,t,n,r,i,a,o,s,c,l,d){var u=this;return u.onGooglePlusSignInSuccess=function(e,t){u.googlePlusSignInButtonClicked||s.start();var n=o.login(t);return n.then(u.loginSuccess,u.loginFailure)},u.onGooglePlusSignInFailure=function(){return u.googlePlusSignInButtonClicked?(s.complete(),a.show("Oops...","Unable to authenticate to Google+.","error")):void 0},e.$on("event:google-plus-signin-success",u.onGooglePlusSignInSuccess),e.$on("event:google-plus-signin-failure",u.onGooglePlusSignInFailure),u.initializeSignIn=function(){return u.clientId=i.OAUTH_CLIENT_ID,u.state=i.STATE,u.googlePlusSignInButtonClicked=!1},u.initializeSignOut=function(){return o.removeUserInfo(),r(u.proceedToSignedOut,50)},u.loginSuccess=function(){return s.complete(),c.proofplayCache.removeAll(),d.tenantCache.removeAll(),l.deviceCache.removeAll(),l.deviceByTenantCache.removeAll(),n.go("distributor_selection")},u.loginFailure=function(){return s.complete(),a.show("Oops...","Unable to authenticate to Stormpath.","error")},u.proceedToSignedOut=function(){return n.go("signed_out")},u.proceedToSignIn=function(){return n.go("sign_in")},u.onClickGooglePlusSignIn=function(){return u.googlePlusSignInButtonClicked=!0,s.start()},u}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AppController",["$mdSidenav","$state","$window","SessionsService",function(e,t,n,r){var i=this;return i.identity={},i.currentDistributerInDistributerAdminList=function(){var e=r.getCurrentDistributorName(),t=r.getDistributorsAsAdmin();return _.contains(t,e)},i.getIdentity=function(){return i.identity={key:r.getUserKey(),email:r.getUserEmail(),admin:r.getIsAdmin(),distributor_admin:r.getDistributorsAsAdmin(),admin_of_current_distributor:i.currentDistributerInDistributerAdminList(),distributorKey:r.getCurrentDistributorKey(),distributorName:r.getCurrentDistributorName()}},i.isCurrentURLDistributorSelector=function(){var e=void 0,t=n.location.href.search(/distributor_selection/);return e=t>=0},i.initialize=function(){return i.getIdentity()},i.toggleSidenav=function(){return e("left").toggle()},i.goTo=function(n,r){return t.go(n,{id:r}),e("left").isOpen()?e("left").close():void 0},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("AppController",["$mdSidenav","$state","$window","SessionsService",function(e,t,n,r){var i=this;return i.identity={},i.currentDistributerInDistributerAdminList=function(){var e=r.getCurrentDistributorName(),t=r.getDistributorsAsAdmin();return _.contains(t,e)},i.getIdentity=function(){return i.identity={key:r.getUserKey(),email:r.getUserEmail(),admin:r.getIsAdmin(),distributor_admin:r.getDistributorsAsAdmin(),admin_of_current_distributor:i.currentDistributerInDistributerAdminList(),distributorKey:r.getCurrentDistributorKey(),distributorName:r.getCurrentDistributorName()}},i.isCurrentURLDistributorSelector=function(){var e=void 0,t=n.location.href.search(/distributor_selection/);return e=t>=0},i.initialize=function(){return i.getIdentity()},i.toggleSidenav=function(){return e("left").toggle()},i.goTo=function(n,r){return t.go(n,{id:r}),e("left").isOpen()?e("left").close():void 0},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsCommandsCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","sweet","ProgressBarService","$mdDialog","ToastsService","$timeout",function(e,t,n,r,i,a,o,s,c,l,d,u,m){var v=this;// command history tab
//####################
// Commands Tab
//####################
return v.tenantKey=t.tenantKey,v.deviceKey=t.deviceKey,v.fromDevices="true"===t.fromDevices,v.currentDevice={},v.commandEvents=[],v.generateLocalFromUTC=function(e){var t=moment.utc(e).toDate();return t=moment(t).format("YYYY-MM-DD hh:mm:ss A")},v.replaceCommandTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.postedTime&&(n.postedTime=v.generateLocalFromUTC(n.postedTime)),n.confirmedTime&&(n.confirmedTime=v.generateLocalFromUTC(n.confirmedTime))}},v.getEvents=function(e,t,n){l.start();var r=i.getCommandEventsByKey(e,t,n);return r.then(function(e){return v.replaceCommandTime(e.events),v.event_next_cursor=e.next_cursor,v.event_prev_cursor=e.prev_cursor,v.commandEvents=e.events,l.complete()})},v.getEventsTimeOut=function(e,t,n){return m(function(){return v.getEvents(e,t,n)},1e3)},v.commandHistorySelected=function(){return v.getEvents(v.deviceKey)},v.paginateEventCall=function(e){return e?v.getEvents(v.deviceKey,null,v.event_next_cursor):v.getEvents(v.deviceKey,v.event_prev_cursor,null)},v.initialize=function(){var e=i.getDeviceByKey(v.deviceKey);return e.then(function(e){return v.onGetDeviceSuccess(e)},function(e){return v.onGetDeviceFailure(e)}),v.getEvents(v.deviceKey)},v.onGetDeviceSuccess=function(e){return v.currentDevice=e,e.timezone!==v.selectedTimezone&&(v.selectedTimezone=e.timezone),void 0===v.tenantKey&&(v.tenantKey=v.currentDevice.tenantKey),"true"===t.fromDevices?(v.backUrl="/#/devices",v.backUrlText="Back to devices"):v.currentDevice.isUnmanagedDevice===!0?(v.backUrl="/#/tenants/"+v.tenantKey+"/unmanaged",v.backUrlText="Back to tenant unmanaged devices"):(v.backUrl="/#/tenants/"+v.tenantKey+"/managed",v.backUrlText="Back to tenant managed devices")},v.onGetDeviceFailure=function(t){u.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+v.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},v.onResetContent=function(){l.start();var e=o.contentDelete(v.deviceKey);return e.then(v.onResetContentSuccess,v.onResetContentFailure)},v.onResetContentSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your reset content command into the player's queue.")},v.onResetContentFailure=function(t){return l.complete(),e.error("Reset content command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your reset content command into the player's queue.","error")},v.onUpdateContent=function(){l.start();var e=o.contentUpdate(v.deviceKey);return e.then(v.onUpdateContentSuccess,v.onUpdateContentFailure)},v.onUpdateContentSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your update content command into the player's queue.")},v.onUpdateContentFailure=function(t){return l.complete(),e.error("Content update command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your update content command into the player's queue.","error")},v.onResetPlayer=function(){l.start();var e=o.reset(v.deviceKey);return e.then(v.onResetPlayerSuccess,v.onResetPlayerFailure)},v.onResetPlayerSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your reset player command into the player's queue.")},v.onResetPlayerFailure=function(t){return l.complete(),e.error("Reset player command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your reset player command into the player's queue.","error")},v.onPanelOn=function(){l.start();var e=o.powerOn(v.deviceKey);return e.then(v.onPanelOnSuccess,v.onPanelOnFailure)},v.onPanelOnSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your panel on command into the player's queue.")},v.onPanelOnFailure=function(t){return l.complete(),e.error("Panel on command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your panel on command into the player's queue.","error")},v.onPanelOff=function(){l.start();var e=o.powerOff(v.deviceKey);return e.then(v.onPanelOffSuccess,v.onPanelOffFailure)},v.onPanelOffSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your panel off command into the player's queue.")},v.onPanelOffFailure=function(t){return l.complete(),e.error("Panel off command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your panel off command into the player's queue.","error")},v.onUpdateDevice=function(){l.start();var e=o.updateDevice(v.deviceKey);return e.then(v.onUpdateDeviceSuccess,v.onUpdateDeviceFailure)},v.onUpdateDeviceSuccess=function(){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your update device command into the player's queue.")},v.onUpdateDeviceFailure=function(t){return l.complete(),e.error("Update device command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your update device command into the player's queue.","error")},v.onVolumeChange=function(){l.start();var e=o.volume(v.deviceKey,v.currentDevice.volume);return e.then(v.onVolumeChangeSuccess(v.currentDevice.volume),v.onVolumeChangeFailure)},v.onVolumeChangeSuccess=function(e){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your volume change command of "+e+" into the player's queue.")},v.onVolumeChangeFailure=function(t){return l.complete(),e.error("Volume change command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your volume change command into the player's queue.","error")},v.onCustomCommand=function(){l.start();var e=o.custom(v.deviceKey,v.currentDevice.custom);return e.then(v.onCustomCommandSuccess(v.currentDevice.custom),v.onCustomCommandFailure)},v.onCustomCommandSuccess=function(e){return l.complete(),v.getEventsTimeOut(v.deviceKey),u.showSuccessToast("We posted your custom command '"+e+"' into the player's queue.")},v.onCustomCommandFailure=function(t){return l.complete(),e.error("Custom command error: "+t.status+" "+t.statusText),c.show("Oops...","We were unable to post your custom command into the player's queue.","error")},v}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsEnrollmentCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","sweet","ProgressBarService","$mdDialog","ToastsService","IntegrationEvents",function(e,t,n,r,i,a,o,s,c,l,d,u,m){var v=this;// enrollment tab
return v.tenantKey=t.tenantKey,v.deviceKey=t.deviceKey,v.fromDevices="true"===t.fromDevices,v.currentDevice={},v.enrollmentEvents=[],v.getEnrollmentEvents=function(e){l.start();var t=m.getEnrollmentEvents(e);return t.then(function(e){return v.enrollmentEvents=e,l.complete()})},v.initialize=function(){v.panelModels=i.getPanelModels(),v.panelInputs=i.getPanelInputs();var e=s.getCustomTimezones();e.then(function(e){return v.timezones=e});var t=i.getDeviceByKey(v.deviceKey);t.then(function(e){return v.onGetDeviceSuccess(e)},function(e){v.onGetDeviceFailure(e)}),v.getEnrollmentEvents(v.deviceKey)},v.onGetDeviceSuccess=function(e){return v.currentDevice=e,e.timezone!==v.selectedTimezone&&(v.selectedTimezone=e.timezone),void 0===v.tenantKey&&(v.tenantKey=v.currentDevice.tenantKey),"true"===t.fromDevices?(v.backUrl="/#/devices",v.backUrlText="Back to devices"):v.currentDevice.isUnmanagedDevice===!0?(v.backUrl="/#/tenants/"+v.tenantKey+"/unmanaged",v.backUrlText="Back to tenant unmanaged devices"):(v.backUrl="/#/tenants/"+v.tenantKey+"/managed",v.backUrlText="Back to tenant managed devices")},v.copyCorrelationIdentifier=function(){return u.showSuccessToast("Correlation ID copied to your clipboard")},v.onGetDeviceFailure=function(t){u.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+v.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},v}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsEventsCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","sweet","ProgressBarService","$mdDialog","ToastsService",function(e,t,n,r,i,a,o,s,c,l,d,u){var m=this;m.tenantKey=t.tenantKey,m.deviceKey=t.deviceKey,m.fromDevices="true"===t.fromDevices,m.currentDevice={},m.dayRange=30,m.issues=[],m.pickerOptions="{widgetPositioning: {vertical:'bottom'}, showTodayButton: true, sideBySide: true, icons:{ next:'glyphicon glyphicon-arrow-right', previous:'glyphicon glyphicon-arrow-left',  up:'glyphicon glyphicon-arrow-up', down:'glyphicon glyphicon-arrow-down'}}";var v=new Date,f=new Date(v.getFullYear(),v.getMonth(),v.getDate());return m.endTime=v.toLocaleString().replace(/,/g,""),f.setDate(v.getDate()-m.dayRange),m.startTime=f.toLocaleString().replace(/,/g,""),m.generateLocalFromUTC=function(e){var t=moment.utc(e).toDate();return t=moment(t).format("YYYY-MM-DD hh:mm:ss A")},m.replaceIssueTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.created&&(n.created=m.generateLocalFromUTC(n.created)),n.updated&&(n.updated=m.generateLocalFromUTC(n.updated))}},m.getIssues=function(e,t,n,r,a){l.start();var o=i.getIssuesByKey(e,t,n,r,a);return o.then(function(e){return m.replaceIssueTime(e.issues),m.issues=e.issues,m.prev_cursor=e.prev,m.next_cursor=e.next,l.complete()})},m.paginateCall=function(e){return e?m.getIssues(m.deviceKey,m.epochStart,m.epochEnd,null,m.next_cursor):m.getIssues(m.deviceKey,m.epochStart,m.epochEnd,m.prev_cursor,null)},m.initialize=function(){m.epochStart=moment(new Date(m.startTime)).unix(),m.epochEnd=moment(new Date(m.endTime)).unix();var e=i.getDeviceByKey(m.deviceKey);return e.then(function(e){return m.onGetDeviceSuccess(e)},function(e){return m.onGetDeviceFailure(e)}),m.getIssues(m.deviceKey,m.epochStart,m.epochEnd)},m.onGetDeviceSuccess=function(e){return m.currentDevice=e,e.timezone!==m.selectedTimezone&&(m.selectedTimezone=e.timezone),void 0===m.tenantKey&&(m.tenantKey=m.currentDevice.tenantKey),"true"===t.fromDevices?(m.backUrl="/#/devices",m.backUrlText="Back to devices"):m.currentDevice.isUnmanagedDevice===!0?(m.backUrl="/#/tenants/"+m.tenantKey+"/unmanaged",m.backUrlText="Back to tenant unmanaged devices"):(m.backUrl="/#/tenants/"+m.tenantKey+"/managed",m.backUrlText="Back to tenant managed devices")},m.onGetDeviceFailure=function(t){u.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+m.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},m.onClickRefreshButton=function(){l.start(),m.epochStart=moment(new Date(m.startTime)).unix(),m.epochEnd=moment(new Date(m.endTime)).unix(),m.prev_cursor=null,m.next_cursor=null;var e=i.getIssuesByKey(m.deviceKey,m.epochStart,m.epochEnd,m.prev_cursor,m.next_cursor);return e.then(function(e){return m.onRefreshIssuesSuccess(e)},function(e){return m.onRefreshIssuesFailure(e)})},m.onRefreshIssuesSuccess=function(e){return m.replaceIssueTime(e.issues),m.issues=e.issues,m.prev_cursor=e.prev,m.next_cursor=e.next,l.complete()},m.onRefreshIssuesFailure=function(t){return l.complete(),u.showInfoToast("We were unable to refresh the device issues list at this time."),e.error("Failure to refresh device issues: "+t.status+" "+t.statusText)},m}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsPropertiesCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","sweet","ProgressBarService","$mdDialog","ToastsService",function(e,t,n,r,i,a,o,s,c,l,d,u){var m=this;return m.tenantKey=t.tenantKey,m.deviceKey=t.deviceKey,m.fromDevices="true"===t.fromDevices,m.currentDevice={},m.initialize=function(){m.panelModels=i.getPanelModels(),m.panelInputs=i.getPanelInputs();var e=s.getCustomTimezones();e.then(function(e){return m.timezones=e});var t=i.getDeviceByKey(m.deviceKey);return t.then(function(e){return m.onGetDeviceSuccess(e)},function(e){return m.onGetDeviceFailure(e)})},m.onGetDeviceSuccess=function(e){m.currentDevice=e,e.timezone!==m.selectedTimezone&&(m.selectedTimezone=e.timezone),void 0===m.tenantKey&&(m.tenantKey=m.currentDevice.tenantKey),"true"===t.fromDevices?(m.backUrl="/#/devices",m.backUrlText="Back to devices"):m.currentDevice.isUnmanagedDevice===!0?(m.backUrl="/#/tenants/"+m.tenantKey+"/unmanaged",m.backUrlText="Back to tenant unmanaged devices"):(m.backUrl="/#/tenants/"+m.tenantKey+"/managed",m.backUrlText="Back to tenant managed devices");var n=a.getLocationsByTenantKey(m.tenantKey);return n.then(function(e){return m.locations=e,m.setSelectedLocationOptions()})},m.onGetDeviceFailure=function(t){u.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+m.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},m.setSelectedLocationOptions=function(){if(null===m.currentDevice.panelModel)m.currentDevice.panelModel=m.panelModels[0],m.currentDevice.panelInput=m.panelInputs[0];else{for(var e=0;e<m.panelModels.length;e++){var t=m.panelModels[e];t.id===m.currentDevice.panelModel&&(m.currentDevice.panelModel=t)}for(var n=0;n<m.panelInputs.length;n++){var r=m.panelInputs[n],i=r.parentId===m.currentDevice.panelModel.id;i&&r.id.toLowerCase()===m.currentDevice.panelInput&&(m.currentDevice.panelInput=r)}}if(null===m.currentDevice.locationKey);else for(var a=0;a<m.locations.length;a++){var o=m.locations[a];o.key===m.currentDevice.locationKey&&(m.currentDevice.location=o)}},m.onSaveDevice=function(){l.start(),void 0!==m.currentDevice.location&&void 0!==m.currentDevice.location.key&&(m.currentDevice.locationKey=m.currentDevice.location.key),void 0!==m.currentDevice.panelModel.id&&"None"!==m.currentDevice.panelModel.id&&(m.currentDevice.panelModelNumber=m.currentDevice.panelModel.id),void 0!==m.currentDevice.panelInput.id&&"None"!==m.currentDevice.panelInput.id&&(m.currentDevice.panelSerialInput=m.currentDevice.panelInput.id.toLowerCase()),m.currentDevice.timezone=m.selectedTimezone;var e=i.save(m.currentDevice);return e.then(m.onSuccessDeviceSave,m.onFailureDeviceSave)},m.onSuccessDeviceSave=function(){return l.complete(),u.showSuccessToast("We saved your update.")},m.onFailureDeviceSave=function(t){return l.complete(),409===t.status?(e.info("Failure saving device. Customer display code already exists for tenant: "+t.status+" "+t.statusText),c.show("Oops...","This customer display code already exists for this tenant. Please choose another.","error")):(e.error("Failure saving device: "+t.status+" "+t.statusText),u.showErrorToast("Oops. We were unable to save your updates to this device at this time."))},m.confirmDeviceDelete=function(e,t){var n=d.confirm({title:"Are you sure to delete this device?",textContent:"Please remember, you MUST remove this device from Content Manager before deleting it from Provisioning.",targetEvent:e,ok:"Delete",cancel:"Cancel"}),r=d.show(n),i=function(){return m.onConfirmDelete(t)},a=function(){return m.onConfirmCancel()};return r.then(i,a)},m.onConfirmDelete=function(t){var r=function(){return u.showSuccessToast("We processed your delete request."),n.go("devices")},a=function(n){var r="We were unable to complete your delete request at this time.";return u.showErrorToast(r),e.error("Delete device failure for device_key "+t+": "+n.status+" "+n.statusText)},o=i["delete"](t);return o.then(r,a)},m.onConfirmCancel=function(){return u.showInfoToast("We canceled your delete request.")},m.onProofOfPlayLoggingCheck=function(){if(m.currentDevice.proofOfPlayLogging){var e=null===m.currentDevice.locationKey,t=null===m.currentDevice.customerDisplayCode;return e?(c.show("Oops...","You must have a Location to enable Proof of play.","error"),m.currentDevice.proofOfPlayLogging=!1):t?(c.show("Oops...","You must have a Display code to enable Proof of play.","error"),m.currentDevice.proofOfPlayLogging=!1):m.onSaveDevice()}return m.onSaveDevice()},m.autoGenerateCustomerDisplayCode=function(){var e="";return m.currentDevice.customerDisplayName&&(e=m.currentDevice.customerDisplayName.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),m.currentDevice.customerDisplayCode=e},m.logglyForUser=function(){var e=r.getUserEmail().split("@")[1];return"demo.agosto.com"===e||"agosto.com"===e},m}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","IntegrationEvents","sweet","ProgressBarService","$mdDialog","ToastsService",function(e,t,n,r,i,a,o,s,c,l,d,u,m){var v=this;v.tenantKey=t.tenantKey,v.deviceKey=t.deviceKey,v.fromDevices="true"===t.fromDevices,v.currentDevice={},v.locations=[],v.commandEvents=[],v.dayRange=30,v.issues=[],v.pickerOptions="{widgetPositioning: {vertical:'bottom'}, showTodayButton: true, sideBySide: true, icons:{ next:'glyphicon glyphicon-arrow-right', previous:'glyphicon glyphicon-arrow-left', up:'glyphicon glyphicon-arrow-up', down:'glyphicon glyphicon-arrow-down'}}",v.timezones=[],v.selectedTimezone=void 0;var f=new Date,g=new Date(f.getFullYear(),f.getMonth(),f.getDate());// event tab
// command history tab
// enrollment tab
//####################
// Properties Tab
//####################
//####################
// Commands Tab
//####################
return v.endTime=f.toLocaleString().replace(/,/g,""),g.setDate(f.getDate()-v.dayRange),v.startTime=g.toLocaleString().replace(/,/g,""),v.enrollmentEvents=[],v.generateLocalFromUTC=function(e){var t=moment.utc(e).toDate();return t=moment(t).format("YYYY-MM-DD hh:mm:ss A")},v.replaceIssueTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.created&&(n.created=v.generateLocalFromUTC(n.created)),n.updated&&(n.updated=v.generateLocalFromUTC(n.updated))}},v.replaceCommandTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.postedTime&&(n.postedTime=v.generateLocalFromUTC(n.postedTime)),n.confirmedTime&&(n.confirmedTime=v.generateLocalFromUTC(n.confirmedTime))}},v.copyDeviceKey=function(){return m.showSuccessToast("Device key copied to your clipboard")},v.copyCorrelationIdentifier=function(){return m.showSuccessToast("Correlation ID copied to your clipboard")},v.getIssues=function(e,t,n,r,a){d.start();var o=i.getIssuesByKey(e,t,n,r,a);return o.then(function(e){return v.replaceIssueTime(e.issues),v.issues=e.issues,v.prev_cursor=e.prev,v.next_cursor=e.next,d.complete()})},v.getEvents=function(e,t,n){d.start();var r=i.getCommandEventsByKey(e,t,n);return r.then(function(e){return v.replaceCommandTime(e.events),v.event_next_cursor=e.next_cursor,v.event_prev_cursor=e.prev_cursor,v.commandEvents=e.events,d.complete()})},v.getEnrollmentEvents=function(e){d.start();var t=c.getEnrollmentEvents(e);return t.then(function(e){return v.enrollmentEvents=e,d.complete()})},v.paginateCall=function(e){return e?v.getIssues(v.deviceKey,v.epochStart,v.epochEnd,null,v.next_cursor):v.getIssues(v.deviceKey,v.epochStart,v.epochEnd,v.prev_cursor,null)},v.paginateEventCall=function(e){return e?v.getEvents(v.deviceKey,null,v.event_next_cursor):v.getEvents(v.deviceKey,v.event_prev_cursor,null)},v.initialize=function(){v.epochStart=moment(new Date(v.startTime)).unix(),v.epochEnd=moment(new Date(v.endTime)).unix();var e=s.getCustomTimezones();e.then(function(e){return v.timezones=e}),v.panelModels=i.getPanelModels(),v.panelInputs=i.getPanelInputs();var t=i.getDeviceByKey(v.deviceKey);return t.then(function(e){return v.onGetDeviceSuccess(e)},function(e){return v.onGetDeviceFailure(e)}),v.getEvents(v.deviceKey),v.getIssues(v.deviceKey,v.epochStart,v.epochEnd),v.getEnrollmentEvents(v.deviceKey)},v.onGetDeviceSuccess=function(e){v.currentDevice=e,e.timezone!==v.selectedTimezone&&(v.selectedTimezone=e.timezone),void 0===v.tenantKey&&(v.tenantKey=v.currentDevice.tenantKey),"true"===t.fromDevices?(v.backUrl="/#/devices",v.backUrlText="Back to devices"):v.currentDevice.isUnmanagedDevice===!0?(v.backUrl="/#/tenants/"+v.tenantKey+"/unmanaged",v.backUrlText="Back to tenant unmanaged devices"):(v.backUrl="/#/tenants/"+v.tenantKey+"/managed",v.backUrlText="Back to tenant managed devices");var n=a.getLocationsByTenantKey(v.tenantKey);return n.then(function(e){return v.locations=e,v.setSelectedOptions()})},v.onGetDeviceFailure=function(t){m.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+v.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},v.setSelectedOptions=function(){if(null===v.currentDevice.panelModel)v.currentDevice.panelModel=v.panelModels[0],v.currentDevice.panelInput=v.panelInputs[0];else{for(var e=0;e<v.panelModels.length;e++){var t=v.panelModels[e];t.id===v.currentDevice.panelModel&&(v.currentDevice.panelModel=t)}for(var n=0;n<v.panelInputs.length;n++){var r=v.panelInputs[n],i=r.parentId===v.currentDevice.panelModel.id;i&&r.id.toLowerCase()===v.currentDevice.panelInput&&(v.currentDevice.panelInput=r)}}if(null===v.currentDevice.locationKey);else for(var a=0;a<v.locations.length;a++){var o=v.locations[a];o.key===v.currentDevice.locationKey&&(v.currentDevice.location=o)}},v.onSaveDevice=function(){d.start(),void 0!==v.currentDevice.location&&void 0!==v.currentDevice.location.key&&(v.currentDevice.locationKey=v.currentDevice.location.key),void 0!==v.currentDevice.panelModel.id&&"None"!==v.currentDevice.panelModel.id&&(v.currentDevice.panelModelNumber=v.currentDevice.panelModel.id),void 0!==v.currentDevice.panelInput.id&&"None"!==v.currentDevice.panelInput.id&&(v.currentDevice.panelSerialInput=v.currentDevice.panelInput.id.toLowerCase()),v.currentDevice.timezone=v.selectedTimezone;var e=i.save(v.currentDevice);return e.then(v.onSuccessDeviceSave,v.onFailureDeviceSave)},v.onSuccessDeviceSave=function(){return d.complete(),m.showSuccessToast("We saved your update.")},v.onFailureDeviceSave=function(t){return d.complete(),409===t.status?(e.info("Failure saving device. Customer display code already exists for tenant: "+t.status+" "+t.statusText),l.show("Oops...","This customer display code already exists for this tenant. Please choose another.","error")):(e.error("Failure saving device: "+t.status+" "+t.statusText),m.showErrorToast("Oops. We were unable to save your updates to this device at this time."))},v.confirmDeviceDelete=function(e,t){var n=u.confirm({title:"Are you sure to delete this device?",textContent:"Please remember, you MUST remove this device from Content Manager before deleting it from Provisioning.",targetEvent:e,ok:"Delete",cancel:"Cancel"}),r=u.show(n),i=function(){return v.onConfirmDelete(t)},a=function(){return v.onConfirmCancel()};return r.then(i,a)},v.onConfirmDelete=function(t){var r=function(){return m.showSuccessToast("We processed your delete request."),n.go("devices")},a=function(n){var r="We were unable to complete your delete request at this time.";return m.showErrorToast(r),e.error("Delete device failure for device_key "+t+": "+n.status+" "+n.statusText)},o=i["delete"](t);return o.then(r,a)},v.onConfirmCancel=function(){return m.showInfoToast("We canceled your delete request.")},v.onProofOfPlayLoggingCheck=function(){if(v.currentDevice.proofOfPlayLogging){var e=null===v.currentDevice.locationKey,t=null===v.currentDevice.customerDisplayCode;return e?(l.show("Oops...","You must have a Location to enable Proof of play.","error"),v.currentDevice.proofOfPlayLogging=!1):t?(l.show("Oops...","You must have a Display code to enable Proof of play.","error"),v.currentDevice.proofOfPlayLogging=!1):v.onSaveDevice()}return v.onSaveDevice()},v.onUpdateLocation=function(){return v.onSaveDevice()},v.autoGenerateCustomerDisplayCode=function(){var e="";return v.currentDevice.customerDisplayName&&(e=v.currentDevice.customerDisplayName.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),v.currentDevice.customerDisplayCode=e},v.logglyForUser=function(){var e=r.getUserEmail().split("@")[1];return"demo.agosto.com"===e||"agosto.com"===e},v.onResetContent=function(){d.start();var e=o.contentDelete(v.deviceKey);return e.then(v.onResetContentSuccess,v.onResetContentFailure)},v.onResetContentSuccess=function(){return d.complete(),m.showSuccessToast("We posted your reset content command into the player's queue.")},v.onResetContentFailure=function(t){return d.complete(),e.error("Reset content command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your reset content command into the player's queue.","error")},v.onUpdateContent=function(){d.start();var e=o.contentUpdate(v.deviceKey);return e.then(v.onUpdateContentSuccess,v.onUpdateContentFailure)},v.onUpdateContentSuccess=function(){return d.complete(),m.showSuccessToast("We posted your update content command into the player's queue.")},v.onUpdateContentFailure=function(t){return d.complete(),e.error("Content update command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your update content command into the player's queue.","error")},v.onResetPlayer=function(){d.start();var e=o.reset(v.deviceKey);return e.then(v.onResetPlayerSuccess,v.onResetPlayerFailure)},v.onResetPlayerSuccess=function(){return d.complete(),m.showSuccessToast("We posted your reset player command into the player's queue.")},v.onResetPlayerFailure=function(t){return d.complete(),e.error("Reset player command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your reset player command into the player's queue.","error")},v.onPanelOn=function(){d.start();var e=o.powerOn(v.deviceKey);return e.then(v.onPanelOnSuccess,v.onPanelOnFailure)},v.onPanelOnSuccess=function(){return d.complete(),m.showSuccessToast("We posted your panel on command into the player's queue.")},v.onPanelOnFailure=function(t){return d.complete(),e.error("Panel on command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your panel on command into the player's queue.","error")},v.onPanelOff=function(){d.start();var e=o.powerOff(v.deviceKey);return e.then(v.onPanelOffSuccess,v.onPanelOffFailure)},v.onPanelOffSuccess=function(){return d.complete(),m.showSuccessToast("We posted your panel off command into the player's queue.")},v.onPanelOffFailure=function(t){return d.complete(),e.error("Panel off command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your panel off command into the player's queue.","error")},v.onUpdateDevice=function(){d.start();var e=o.updateDevice(v.deviceKey);return e.then(v.onUpdateDeviceSuccess,v.onUpdateDeviceFailure)},v.onUpdateDeviceSuccess=function(){return d.complete(),m.showSuccessToast("We posted your update device command into the player's queue.")},v.onUpdateDeviceFailure=function(t){return d.complete(),e.error("Update device command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your update device command into the player's queue.","error")},v.onVolumeChange=function(){d.start();var e=o.volume(v.deviceKey,v.currentDevice.volume);return e.then(v.onVolumeChangeSuccess(v.currentDevice.volume),v.onVolumeChangeFailure)},v.onVolumeChangeSuccess=function(e){return d.complete(),m.showSuccessToast("We posted your volume change command of "+e+" into the player's queue.")},v.onVolumeChangeFailure=function(t){return d.complete(),e.error("Volume change command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your volume change command into the player's queue.","error")},v.onCustomCommand=function(){d.start();var e=o.custom(v.deviceKey,v.currentDevice.custom);return e.then(v.onCustomCommandSuccess(v.currentDevice.custom),v.onCustomCommandFailure)},v.onCustomCommandSuccess=function(e){return d.complete(),m.showSuccessToast("We posted your custom command '"+e+"' into the player's queue.")},v.onCustomCommandFailure=function(t){return d.complete(),e.error("Custom command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your custom command into the player's queue.","error")},v.onClickRefreshButton=function(){d.start(),v.epochStart=moment(new Date(v.startTime)).unix(),v.epochEnd=moment(new Date(v.endTime)).unix(),v.prev_cursor=null,v.next_cursor=null;var e=i.getIssuesByKey(v.deviceKey,v.epochStart,v.epochEnd,v.prev_cursor,v.next_cursor);return e.then(function(e){return v.onRefreshIssuesSuccess(e)},function(e){return v.onRefreshIssuesFailure(e)})},v.onRefreshIssuesSuccess=function(e){return v.replaceIssueTime(e.issues),v.issues=e.issues,v.prev_cursor=e.prev,v.next_cursor=e.next,d.complete()},v.onRefreshIssuesFailure=function(t){return d.complete(),m.showInfoToast("We were unable to refresh the device issues list at this time."),e.error("Failure to refresh device issues: "+t.status+" "+t.statusText)},v}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DeviceDetailsCtrl",["$log","$stateParams","$state","SessionsService","DevicesService","LocationsService","CommandsService","TimezonesService","IntegrationEvents","sweet","ProgressBarService","$mdDialog","ToastsService",function(e,t,n,r,i,a,o,s,c,l,d,u,m){var v=this;v.tenantKey=t.tenantKey,v.deviceKey=t.deviceKey,v.fromDevices="true"===t.fromDevices,v.currentDevice={},v.locations=[],v.commandEvents=[],v.dayRange=30,v.issues=[],v.pickerOptions="{widgetPositioning: {vertical:'bottom'}, showTodayButton: true, sideBySide: true, icons:{ next:'glyphicon glyphicon-arrow-right', previous:'glyphicon glyphicon-arrow-left', up:'glyphicon glyphicon-arrow-up', down:'glyphicon glyphicon-arrow-down'}}",v.timezones=[],v.selectedTimezone=void 0;var f=new Date,g=new Date(f.getFullYear(),f.getMonth(),f.getDate());// event tab
// command history tab
// enrollment tab
//####################
// Properties Tab
//####################
//####################
// Commands Tab
//####################
return v.endTime=f.toLocaleString().replace(/,/g,""),g.setDate(f.getDate()-v.dayRange),v.startTime=g.toLocaleString().replace(/,/g,""),v.enrollmentEvents=[],v.generateLocalFromUTC=function(e){var t=moment.utc(e).toDate();return t=moment(t).format("YYYY-MM-DD hh:mm:ss A")},v.replaceIssueTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.created&&(n.created=v.generateLocalFromUTC(n.created)),n.updated&&(n.updated=v.generateLocalFromUTC(n.updated))}},v.replaceCommandTime=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.postedTime&&(n.postedTime=v.generateLocalFromUTC(n.postedTime)),n.confirmedTime&&(n.confirmedTime=v.generateLocalFromUTC(n.confirmedTime))}},v.copyDeviceKey=function(){return m.showSuccessToast("Device key copied to your clipboard")},v.copyCorrelationIdentifier=function(){return m.showSuccessToast("Correlation ID copied to your clipboard")},v.getIssues=function(e,t,n,r,a){d.start();var o=i.getIssuesByKey(e,t,n,r,a);return o.then(function(e){return v.replaceIssueTime(e.issues),v.issues=e.issues,v.prev_cursor=e.prev,v.next_cursor=e.next,d.complete()})},v.getEvents=function(e,t,n){d.start();var r=i.getCommandEventsByKey(e,t,n);return r.then(function(e){return v.replaceCommandTime(e.events),v.event_next_cursor=e.next_cursor,v.event_prev_cursor=e.prev_cursor,v.commandEvents=e.events,d.complete()})},v.getEnrollmentEvents=function(e){d.start();var t=c.getEnrollmentEvents(e);return t.then(function(e){return v.enrollmentEvents=e,d.complete()})},v.paginateCall=function(e){return e?v.getIssues(v.deviceKey,v.epochStart,v.epochEnd,null,v.next_cursor):v.getIssues(v.deviceKey,v.epochStart,v.epochEnd,v.prev_cursor,null)},v.paginateEventCall=function(e){return e?v.getEvents(v.deviceKey,null,v.event_next_cursor):v.getEvents(v.deviceKey,v.event_prev_cursor,null)},v.initialize=function(){v.epochStart=moment(new Date(v.startTime)).unix(),v.epochEnd=moment(new Date(v.endTime)).unix();var e=s.getCustomTimezones();e.then(function(e){return v.timezones=e}),v.panelModels=i.getPanelModels(),v.panelInputs=i.getPanelInputs();var t=i.getDeviceByKey(v.deviceKey);return t.then(function(e){return v.onGetDeviceSuccess(e)},function(e){return v.onGetDeviceFailure(e)}),v.getEvents(v.deviceKey),v.getIssues(v.deviceKey,v.epochStart,v.epochEnd),v.getEnrollmentEvents(v.deviceKey)},v.onGetDeviceSuccess=function(e){v.currentDevice=e,e.timezone!==v.selectedTimezone&&(v.selectedTimezone=e.timezone),void 0===v.tenantKey&&(v.tenantKey=v.currentDevice.tenantKey),"true"===t.fromDevices?(v.backUrl="/#/devices",v.backUrlText="Back to devices"):v.currentDevice.isUnmanagedDevice===!0?(v.backUrl="/#/tenants/"+v.tenantKey+"/unmanaged",v.backUrlText="Back to tenant unmanaged devices"):(v.backUrl="/#/tenants/"+v.tenantKey+"/managed",v.backUrlText="Back to tenant managed devices");var n=a.getLocationsByTenantKey(v.tenantKey);return n.then(function(e){return v.locations=e,v.setSelectedOptions()})},v.onGetDeviceFailure=function(t){m.showErrorToast("Oops. We were unable to fetch the details for this device at this time.");var r="No detail for device_key #"+v.deviceKey+". Error: "+t.status+" "+t.statusText;return e.error(r),n.go("devices")},v.setSelectedOptions=function(){if(null===v.currentDevice.panelModel)v.currentDevice.panelModel=v.panelModels[0],v.currentDevice.panelInput=v.panelInputs[0];else{for(var e=0;e<v.panelModels.length;e++){var t=v.panelModels[e];t.id===v.currentDevice.panelModel&&(v.currentDevice.panelModel=t)}for(var n=0;n<v.panelInputs.length;n++){var r=v.panelInputs[n],i=r.parentId===v.currentDevice.panelModel.id;i&&r.id.toLowerCase()===v.currentDevice.panelInput&&(v.currentDevice.panelInput=r)}}if(null===v.currentDevice.locationKey);else for(var a=0;a<v.locations.length;a++){var o=v.locations[a];o.key===v.currentDevice.locationKey&&(v.currentDevice.location=o)}},v.onSaveDevice=function(){d.start(),void 0!==v.currentDevice.location&&void 0!==v.currentDevice.location.key&&(v.currentDevice.locationKey=v.currentDevice.location.key),void 0!==v.currentDevice.panelModel.id&&"None"!==v.currentDevice.panelModel.id&&(v.currentDevice.panelModelNumber=v.currentDevice.panelModel.id),void 0!==v.currentDevice.panelInput.id&&"None"!==v.currentDevice.panelInput.id&&(v.currentDevice.panelSerialInput=v.currentDevice.panelInput.id.toLowerCase()),v.currentDevice.timezone=v.selectedTimezone;var e=i.save(v.currentDevice);return e.then(v.onSuccessDeviceSave,v.onFailureDeviceSave)},v.onSuccessDeviceSave=function(){return d.complete(),m.showSuccessToast("We saved your update.")},v.onFailureDeviceSave=function(t){return d.complete(),409===t.status?(e.info("Failure saving device. Customer display code already exists for tenant: "+t.status+" "+t.statusText),l.show("Oops...","This customer display code already exists for this tenant. Please choose another.","error")):(e.error("Failure saving device: "+t.status+" "+t.statusText),m.showErrorToast("Oops. We were unable to save your updates to this device at this time."))},v.confirmDeviceDelete=function(e,t){var n=u.confirm({title:"Are you sure to delete this device?",textContent:"Please remember, you MUST remove this device from Content Manager before deleting it from Provisioning.",targetEvent:e,ok:"Delete",cancel:"Cancel"}),r=u.show(n),i=function(){return v.onConfirmDelete(t)},a=function(){return v.onConfirmCancel()};return r.then(i,a)},v.onConfirmDelete=function(t){var r=function(){return m.showSuccessToast("We processed your delete request."),n.go("devices")},a=function(n){var r="We were unable to complete your delete request at this time.";return m.showErrorToast(r),e.error("Delete device failure for device_key "+t+": "+n.status+" "+n.statusText)},o=i["delete"](t);return o.then(r,a)},v.onConfirmCancel=function(){return m.showInfoToast("We canceled your delete request.")},v.onProofOfPlayLoggingCheck=function(){if(v.currentDevice.proofOfPlayLogging){var e=null===v.currentDevice.locationKey,t=null===v.currentDevice.customerDisplayCode;return e?(l.show("Oops...","You must have a Location to enable Proof of play.","error"),v.currentDevice.proofOfPlayLogging=!1):t?(l.show("Oops...","You must have a Display code to enable Proof of play.","error"),v.currentDevice.proofOfPlayLogging=!1):v.onSaveDevice()}return v.onSaveDevice()},v.onUpdateLocation=function(){return v.onSaveDevice()},v.autoGenerateCustomerDisplayCode=function(){var e="";return v.currentDevice.customerDisplayName&&(e=v.currentDevice.customerDisplayName.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),v.currentDevice.customerDisplayCode=e},v.logglyForUser=function(){var e=r.getUserEmail().split("@")[1];return"demo.agosto.com"===e||"agosto.com"===e},v.onResetContent=function(){d.start();var e=o.contentDelete(v.deviceKey);return e.then(v.onResetContentSuccess,v.onResetContentFailure)},v.onResetContentSuccess=function(){return d.complete(),m.showSuccessToast("We posted your reset content command into the player's queue.")},v.onResetContentFailure=function(t){return d.complete(),e.error("Reset content command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your reset content command into the player's queue.","error")},v.onUpdateContent=function(){d.start();var e=o.contentUpdate(v.deviceKey);return e.then(v.onUpdateContentSuccess,v.onUpdateContentFailure)},v.onUpdateContentSuccess=function(){return d.complete(),m.showSuccessToast("We posted your update content command into the player's queue.")},v.onUpdateContentFailure=function(t){return d.complete(),e.error("Content update command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your update content command into the player's queue.","error")},v.onResetPlayer=function(){d.start();var e=o.reset(v.deviceKey);return e.then(v.onResetPlayerSuccess,v.onResetPlayerFailure)},v.onResetPlayerSuccess=function(){return d.complete(),m.showSuccessToast("We posted your reset player command into the player's queue.")},v.onResetPlayerFailure=function(t){return d.complete(),e.error("Reset player command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your reset player command into the player's queue.","error")},v.onPanelOn=function(){d.start();var e=o.powerOn(v.deviceKey);return e.then(v.onPanelOnSuccess,v.onPanelOnFailure)},v.onPanelOnSuccess=function(){return d.complete(),m.showSuccessToast("We posted your panel on command into the player's queue.")},v.onPanelOnFailure=function(t){return d.complete(),e.error("Panel on command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your panel on command into the player's queue.","error")},v.onPanelOff=function(){d.start();var e=o.powerOff(v.deviceKey);return e.then(v.onPanelOffSuccess,v.onPanelOffFailure)},v.onPanelOffSuccess=function(){return d.complete(),m.showSuccessToast("We posted your panel off command into the player's queue.")},v.onPanelOffFailure=function(t){return d.complete(),e.error("Panel off command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your panel off command into the player's queue.","error")},v.onUpdateDevice=function(){d.start();var e=o.updateDevice(v.deviceKey);return e.then(v.onUpdateDeviceSuccess,v.onUpdateDeviceFailure)},v.onUpdateDeviceSuccess=function(){return d.complete(),m.showSuccessToast("We posted your update device command into the player's queue.")},v.onUpdateDeviceFailure=function(t){return d.complete(),e.error("Update device command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your update device command into the player's queue.","error")},v.onVolumeChange=function(){d.start();var e=o.volume(v.deviceKey,v.currentDevice.volume);return e.then(v.onVolumeChangeSuccess(v.currentDevice.volume),v.onVolumeChangeFailure)},v.onVolumeChangeSuccess=function(e){return d.complete(),m.showSuccessToast("We posted your volume change command of "+e+" into the player's queue.")},v.onVolumeChangeFailure=function(t){return d.complete(),e.error("Volume change command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your volume change command into the player's queue.","error")},v.onCustomCommand=function(){d.start();var e=o.custom(v.deviceKey,v.currentDevice.custom);return e.then(v.onCustomCommandSuccess(v.currentDevice.custom),v.onCustomCommandFailure)},v.onCustomCommandSuccess=function(e){return d.complete(),m.showSuccessToast("We posted your custom command '"+e+"' into the player's queue.")},v.onCustomCommandFailure=function(t){return d.complete(),e.error("Custom command error: "+t.status+" "+t.statusText),l.show("Oops...","We were unable to post your custom command into the player's queue.","error")},v.onClickRefreshButton=function(){d.start(),v.epochStart=moment(new Date(v.startTime)).unix(),v.epochEnd=moment(new Date(v.endTime)).unix(),v.prev_cursor=null,v.next_cursor=null;var e=i.getIssuesByKey(v.deviceKey,v.epochStart,v.epochEnd,v.prev_cursor,v.next_cursor);return e.then(function(e){return v.onRefreshIssuesSuccess(e)},function(e){return v.onRefreshIssuesFailure(e)})},v.onRefreshIssuesSuccess=function(e){return v.replaceIssueTime(e.issues),v.issues=e.issues,v.prev_cursor=e.prev,v.next_cursor=e.next,d.complete()},v.onRefreshIssuesFailure=function(t){return d.complete(),m.showInfoToast("We were unable to refresh the device issues list at this time."),e.error("Failure to refresh device issues: "+t.status+" "+t.statusText)},v}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DevicesListingCtrl",["$stateParams","$log","DevicesService","$state","SessionsService","ProgressBarService","sweet",function(e,t,n,r,i,a,o){var s=this;//####################################
// Managed
//####################################
//####################################
// Unmanaged
//####################################
return s.distributorKey=void 0,s.devices=[],s.devicesPrev=null,s.devicesNext=null,s.selectedButton="Serial Number",s.serialDevices={},s.disabled=!0,s.macDevices={},s.unmanagedSelectedButton="MAC",s.unmanagedSerialDevices={},s.unmanagedDisabled=!0,s.unmanagedDevicesPrev=null,s.unmanagedDevicesNext=null,s.unmanagedDevices=[],s.unmanagedMacDevices={},s.refreshManagedDevices=function(){return s.devicesPrev=null,s.devicesNext=null,n.deviceCache.removeAll(),s.getManagedDevices(s.distributorKey,s.devicesPrev,s.devicesNext)},s.refreshUnmanagedDevices=function(){return s.unmanagedDevicesPrev=null,s.unmanagedDevicesNext=null,n.deviceCache.removeAll(),s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,s.unmanagedDevicesNext)},s.changeRadio=function(e){return e?(s.unmanagedSearchText="",s.unmanagedDisabled=!0,s.unmanagedSerialDevices={},s.unmanagedMacDevices={}):(s.searchText="",s.disabled=!0,s.serialDevices={},s.macDevices={})},s.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},s.prepareForEditView=function(e,t){if(e){var n="MAC"===s.unmanagedSelectedButton;return s.editItem(n?s.unmanagedMacDevices[t]:s.unmanagedSerialDevices[t])}var n="MAC"===s.selectedButton;return s.editItem(n?s.macDevices[t]:s.serialDevices[t])},s.controlOpenButton=function(e,t){return e?(s.unmanagedDisabled=!t,s.unmanagedDisabledButtonLoading=!1):(s.disabled=!t,s.disabledButtonLoading=!1)},s.isResourceValid=function(e,t){if(t){if(t.length>2){if(e){var r="MAC"===s.unmanagedSelectedButton;s.unmanagedDisabledButtonLoading=!0}else{var r="MAC"===s.selectedButton;s.disabledButtonLoading=!0}return r?n.matchDevicesByFullMac(s.distributorKey,t,e).then(function(t){return s.controlOpenButton(e,t.is_match)}):n.matchDevicesByFullSerial(s.distributorKey,t,e).then(function(t){return s.controlOpenButton(e,t.is_match)})}return s.controlOpenButton(e,!1)}return s.controlOpenButton(e,!1)},s.searchDevices=function(e,t){if(t){if(t.length>2){if(e)var r=s.unmanagedSelectedButton;else var r=s.selectedButton;return"Serial Number"===r?n.searchDevicesByPartialSerial(s.distributorKey,t,e).then(function(t){var n=t.serial_number_matches;e?s.unmanagedSerialDevices=s.convertArrayToDictionary(n,!1):s.serialDevices=s.convertArrayToDictionary(n,!1);for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(a.serial)}return r}):n.searchDevicesByPartialMac(s.distributorKey,t,e).then(function(t){var n=t.mac_matches;e?s.unmanagedMacDevices=s.convertArrayToDictionary(n,!0):s.macDevices=s.convertArrayToDictionary(n,!0);for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(a.mac)}return r})}return[]}return[]},s.getManagedDevices=function(e,t,r){a.start();var i=n.getDevicesByDistributor(e,t,r);return i.then(function(e){return s.devices=e.devices,s.devicesNext=e.next_cursor,s.devicesPrev=e.prev_cursor,s.getFetchSuccess()},function(e){return s.getFetchFailure(e)})},s.getUnmanagedDevices=function(e,t,r){a.start();var i=n.getUnmanagedDevicesByDistributor(e,t,r);return i.then(function(e){return s.unmanagedDevices=e.devices,s.unmanagedDevicesPrev=e.prev_cursor,s.unmanagedDevicesNext=e.next_cursor,s.getFetchSuccess()},function(e){return s.getFetchFailure(e)})},s.initialize=function(){return s.distributorKey=i.getCurrentDistributorKey(),s.getManagedDevices(s.distributorKey,s.devicesPrev,s.devicesNext),s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,s.unmanagedDevicesNext)},s.getFetchSuccess=function(){return a.complete()},s.getFetchFailure=function(e){a.complete();var t="Unable to fetch devices. Error: "+e.status+" "+e.statusText+".";return o.show("Oops...",t,"error")},s.editItem=function(e){return r.go("editDevice",{deviceKey:e.key,tenantKey:e.tenantKey,fromDevices:!0})},s.paginateCall=function(e,t){return e&&(t&&s.getManagedDevices(s.distributorKey,null,s.devicesNext),t||s.getUnmanagedDevices(s.distributorKey,null,s.unmanagedDevicesNext)),e||(t&&s.getManagedDevices(s.distributorKey,s.devicesPrev,null),t)?void 0:s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,null)},s}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DevicesListingCtrl",["$stateParams","$log","DevicesService","$state","SessionsService","ProgressBarService","sweet",function(e,t,n,r,i,a,o){var s=this;//####################################
// Managed
//####################################
//####################################
// Unmanaged
//####################################
return s.distributorKey=void 0,s.devices=[],s.devicesPrev=null,s.devicesNext=null,s.selectedButton="Serial Number",s.serialDevices={},s.disabled=!0,s.macDevices={},s.unmanagedSelectedButton="MAC",s.unmanagedSerialDevices={},s.unmanagedDisabled=!0,s.unmanagedDevicesPrev=null,s.unmanagedDevicesNext=null,s.unmanagedDevices=[],s.unmanagedMacDevices={},s.refreshManagedDevices=function(){return s.devicesPrev=null,s.devicesNext=null,n.deviceCache.removeAll(),s.getManagedDevices(s.distributorKey,s.devicesPrev,s.devicesNext)},s.refreshUnmanagedDevices=function(){return s.unmanagedDevicesPrev=null,s.unmanagedDevicesNext=null,n.deviceCache.removeAll(),s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,s.unmanagedDevicesNext)},s.changeRadio=function(e){return e?(s.unmanagedSearchText="",s.unmanagedDisabled=!0,s.unmanagedSerialDevices={},s.unmanagedMacDevices={}):(s.searchText="",s.disabled=!0,s.serialDevices={},s.macDevices={})},s.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},s.prepareForEditView=function(e,t){if(e){var n="MAC"===s.unmanagedSelectedButton;return s.editItem(n?s.unmanagedMacDevices[t]:s.unmanagedSerialDevices[t])}var n="MAC"===s.selectedButton;return s.editItem(n?s.macDevices[t]:s.serialDevices[t])},s.controlOpenButton=function(e,t){return e?(s.unmanagedDisabled=!t,s.unmanagedDisabledButtonLoading=!1):(s.disabled=!t,s.disabledButtonLoading=!1)},s.isResourceValid=function(e,t){if(t){if(t.length>2){if(e){var r="MAC"===s.unmanagedSelectedButton;s.unmanagedDisabledButtonLoading=!0}else{var r="MAC"===s.selectedButton;s.disabledButtonLoading=!0}return r?n.matchDevicesByFullMac(s.distributorKey,t,e).then(function(t){return s.controlOpenButton(e,t.is_match)}):n.matchDevicesByFullSerial(s.distributorKey,t,e).then(function(t){return s.controlOpenButton(e,t.is_match)})}return s.controlOpenButton(e,!1)}return s.controlOpenButton(e,!1)},s.searchDevices=function(e,t){if(t){if(t.length>2){if(e)var r=s.unmanagedSelectedButton;else var r=s.selectedButton;return"Serial Number"===r?n.searchDevicesByPartialSerial(s.distributorKey,t,e).then(function(t){var n=t.serial_number_matches;e?s.unmanagedSerialDevices=s.convertArrayToDictionary(n,!1):s.serialDevices=s.convertArrayToDictionary(n,!1);for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(a.serial)}return r}):n.searchDevicesByPartialMac(s.distributorKey,t,e).then(function(t){var n=t.mac_matches;e?s.unmanagedMacDevices=s.convertArrayToDictionary(n,!0):s.macDevices=s.convertArrayToDictionary(n,!0);for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(a.mac)}return r})}return[]}return[]},s.getManagedDevices=function(e,t,r){a.start();var i=n.getDevicesByDistributor(e,t,r);return i.then(function(e){return s.devices=e.devices,s.devicesNext=e.next_cursor,s.devicesPrev=e.prev_cursor,s.getFetchSuccess()},function(e){return s.getFetchFailure(e)})},s.getUnmanagedDevices=function(e,t,r){a.start();var i=n.getUnmanagedDevicesByDistributor(e,t,r);return i.then(function(e){return s.unmanagedDevices=e.devices,s.unmanagedDevicesPrev=e.prev_cursor,s.unmanagedDevicesNext=e.next_cursor,s.getFetchSuccess()},function(e){return s.getFetchFailure(e)})},s.initialize=function(){return s.distributorKey=i.getCurrentDistributorKey(),s.getManagedDevices(s.distributorKey,s.devicesPrev,s.devicesNext),s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,s.unmanagedDevicesNext)},s.getFetchSuccess=function(){return a.complete()},s.getFetchFailure=function(e){a.complete();var t="Unable to fetch devices. Error: "+e.status+" "+e.statusText+".";return o.show("Oops...",t,"error")},s.editItem=function(e){return r.go("editDevice",{deviceKey:e.key,tenantKey:e.tenantKey,fromDevices:!0})},s.paginateCall=function(e,t){return e&&(t&&s.getManagedDevices(s.distributorKey,null,s.devicesNext),t||s.getUnmanagedDevices(s.distributorKey,null,s.unmanagedDevicesNext)),e||(t&&s.getManagedDevices(s.distributorKey,s.devicesPrev,null),t)?void 0:s.getUnmanagedDevices(s.distributorKey,s.unmanagedDevicesPrev,null)},s}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DistributorSelectorCtrl",["$log","$state","DistributorsService","SessionsService",function(e,t,n,r){var i=this;return i.distributors=[],i.currentDistributor=void 0,i.loading=!0,i.initialize=function(){i.loading=!0;var e=n.fetchAllByUser(r.getUserKey());return e.then(function(e){return i.distributors=e,1===i.distributors.length?i.selectDistributor(i.distributors[0]):i.loading=!1})},i.selectDistributor=function(e){return n.switchDistributor(e)},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DistributorSelectorCtrl",["$log","$state","DistributorsService","SessionsService",function(e,t,n,r){var i=this;return i.distributors=[],i.currentDistributor=void 0,i.loading=!0,i.initialize=function(){i.loading=!0;var e=n.fetchAllByUser(r.getUserKey());return e.then(function(e){return i.distributors=e,1===i.distributors.length?i.selectDistributor(i.distributors[0]):i.loading=!1})},i.selectDistributor=function(e){return n.switchDistributor(e)},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DistributorsCtrl",["$state",function(){var e=this;return e.distributors=[],e}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DistributorsCtrl",["$state",function(){var e=this;return e.distributors=[],e}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DomainDetailsCtrl",["$log","$stateParams","DistributorsService","DomainsService","$state","sweet","ProgressBarService","ToastsService","SessionsService",function(e,t,n,r,i,a,o,s,c){var l=this;if(l.currentDomain={key:void 0,name:void 0,impersonation_admin_email_address:void 0,distributor_key:void 0,active:!0},l.currentDomains=[],l.editMode=!!t.domainKey,l.editMode){var d=r.getDomainByKey(t.domainKey);d.then(function(e){return l.currentDomain=e})}else l.currentDomain.distributor_key=c.getCurrentDistributorKey();return l.onSaveDomain=function(){o.start();var e=r.save(l.currentDomain);return e.then(l.onSuccessSaveDomain,l.onFailureSaveDomain)},l.onSuccessSaveDomain=function(){return o.complete(),s.showSuccessToast("We saved your update.")},l.onFailureSaveDomain=function(t){return o.complete(),409===t.status?(e.info("Failure saving domain. Domain already exists: "+t.status+" "+t.statusText),a.show("Oops...","This domain name already exist. Please enter a unique domain name.","error")):(e.error("Failure saving domain: "+t.status+" "+t.statusText),s.showErrorToast("Oops. We were unable to save your updates at this time."))},l.editItem=function(e){return i.go("editDomain",{domainKey:e.key})},l}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DomainDetailsCtrl",["$log","$stateParams","DistributorsService","DomainsService","$state","sweet","ProgressBarService","ToastsService","SessionsService",function(e,t,n,r,i,a,o,s,c){var l=this;if(l.currentDomain={key:void 0,name:void 0,impersonation_admin_email_address:void 0,distributor_key:void 0,active:!0},l.currentDomains=[],l.editMode=!!t.domainKey,l.editMode){var d=r.getDomainByKey(t.domainKey);d.then(function(e){return l.currentDomain=e})}else l.currentDomain.distributor_key=c.getCurrentDistributorKey();return l.onSaveDomain=function(){o.start();var e=r.save(l.currentDomain);return e.then(l.onSuccessSaveDomain,l.onFailureSaveDomain)},l.onSuccessSaveDomain=function(){return o.complete(),s.showSuccessToast("We saved your update.")},l.onFailureSaveDomain=function(t){return o.complete(),409===t.status?(e.info("Failure saving domain. Domain already exists: "+t.status+" "+t.statusText),a.show("Oops...","This domain name already exist. Please enter a unique domain name.","error")):(e.error("Failure saving domain: "+t.status+" "+t.statusText),s.showErrorToast("Oops. We were unable to save your updates at this time."))},l.editItem=function(e){return i.go("editDomain",{domainKey:e.key})},l}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DomainsCtrl",["$state","$log","DomainsService","sweet",function(e,t,n,r){var i=this;return i.domains=[],i.initialize=function(){var e=n.fetchAllDomains();return e.then(function(e){return i.domains=e})},i.editItem=function(t){return e.go("editDomain",{domainKey:t.key})},i.deleteItem=function(e){var t=function(){var t=n["delete"](e);return t.then(function(){return i.initialize()})};return r.show({title:"Are you sure?",text:"This will permanently remove the domain from the distributor and disconnect from tenants.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the domain!",closeOnConfirm:!0},t)},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("DomainsCtrl",["$state","$log","DomainsService","sweet",function(e,t,n,r){var i=this;return i.domains=[],i.initialize=function(){var e=n.fetchAllDomains();return e.then(function(e){return i.domains=e})},i.editItem=function(t){return e.go("editDomain",{domainKey:t.key})},i.deleteItem=function(e){var t=function(){var t=n["delete"](e);return t.then(function(){return i.initialize()})};return r.show({title:"Are you sure?",text:"This will permanently remove the domain from the distributor and disconnect from tenants.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the domain!",closeOnConfirm:!0},t)},i}])}(),function(){var e=angular.module("skykitProvisioning");e.config(["toastrConfig",function(e){return angular.extend(e,{progressBar:!0,closeButton:!0,tapToDismiss:!0,newestOnTop:!0,positionClass:"toast-bottom-left",timeOut:5e3})}]),e.config(["$breadcrumbProvider",function(e){return e.setOptions({prefixStateName:"home",template:"bootstrap3"})}])}(),function(){var e=angular.module("skykitProvisioning");e.config(["toastrConfig",function(e){return angular.extend(e,{progressBar:!0,closeButton:!0,tapToDismiss:!0,newestOnTop:!0,positionClass:"toast-bottom-left",timeOut:5e3})}]),e.config(["$breadcrumbProvider",function(e){return e.setOptions({prefixStateName:"home",template:"bootstrap3"})}])}(),function(){var e=angular.module("skykitProvisioning");e.config(["$stateProvider","$urlRouterProvider","RestangularProvider",function(e,t,n){return e.state("sign_in",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],notAuthenticated:["AuthorizationService",function(e){return e.notAuthenticated()}]},url:"/sign_in",templateUrl:"app/authentication/sign_in.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("signed_out",{url:"/signed_out",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],notAuthenticated:["AuthorizationService",function(e){return e.notAuthenticated()}]},templateUrl:"app/authentication/signed_out.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("sign_out",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/sign_out",templateUrl:"app/authentication/sign_out.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("distributor_selection",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/distributor_selection",templateUrl:"app/distributor/distributor_selector.html",controller:"DistributorSelectorCtrl",controllerAs:"vm"}),e.state("home",{url:"/",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},controller:"WelcomeCtrl",controllerAs:"welcomeCtrl",ncyBreadcrumb:{label:"Skykit Provisioning"}}),e.state("welcome",{url:"/welcome",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},controller:"WelcomeCtrl",controllerAs:"welcomeCtrl",ncyBreadcrumb:{label:"Skykit Provisioning"}}),e.state("domains",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains",templateUrl:"app/domain/domains-listing.html",controller:"DomainsCtrl",controllerAs:"domainsCtrl",ncyBreadcrumb:{label:"Domains"}}),e.state("addDomain",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains/add",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:"domainDetailsCtrl",ncyBreadcrumb:{label:"Add domain",parent:"domains"}}),e.state("editDomain",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains/:domainKey",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:"domainDetailsCtrl",ncyBreadcrumb:{label:"{{ domainDetailsCtrl.currentDomain.name }}",parent:"domains"}}),e.state("tenants",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants",templateUrl:"app/tenant/tenants-listing.html",controller:"TenantsCtrl",controllerAs:"tenantsCtrl",ncyBreadcrumb:{label:"Tenants"}}),e.state("addTenant",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/add",templateUrl:"app/tenant/tenant-add.html",controller:"TenantAddCtrl",controllerAs:"tenantAddCtrl",ncyBreadcrumb:{label:"Add tenant",parent:"tenants"}}),e.state("tenantDetails",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/details",templateUrl:"app/tenant/tenant-details.html",controller:"TenantDetailsCtrl",controllerAs:"tenantDetailsCtrl",ncyBreadcrumb:{label:"{{ tenantDetailsCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantManagedDevices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/managed",templateUrl:"app/tenant/tenant-managed-devices.html",controller:"TenantManagedDevicesCtrl",controllerAs:"tenantManagedDevicesCtrl",ncyBreadcrumb:{label:"{{ tenantManagedDevicesCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantUnmanagedDevices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/unmanaged",templateUrl:"app/tenant/tenant-unmanaged-devices.html",controller:"TenantUnmanagedDevicesCtrl",controllerAs:"tenantUnmanagedDevicesCtrl",ncyBreadcrumb:{label:"{{ tenantUnmanagedDevicesCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantLocations",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/locations",templateUrl:"app/tenant/tenant-locations.html",controller:"TenantLocationsCtrl",controllerAs:"tenantLocationsCtrl",ncyBreadcrumb:{label:"{{ tenantLocationsCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("editLocation",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/locations/:locationKey",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:"tenantLocationCtrl",ncyBreadcrumb:{label:"{{ tenantLocationCtrl.tenantName }}  / {{ tenantLocationCtrl.locationName }}",parent:"tenants"}}),e.state("addLocation",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/location",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:"tenantLocationCtrl",ncyBreadcrumb:{label:"{{ tenantLocationCtrl.tenantName }}  / Location",parent:"tenants"}}),e.state("devices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/devices",templateUrl:"app/device/devices-listing.html",controller:"DevicesListingCtrl",controllerAs:"devicesListingCtrl",ncyBreadcrumb:{label:"Devices"}}),e.state("editDevice",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/devices/:deviceKey?tenantKey?fromDevices",templateUrl:"app/device/device-detail.html",ncyBreadcrumb:{label:"{{ deviceDetailsCtrl.currentDevice.key }}",parent:"devices"},controller:"DeviceDetailsCtrl","function":function(e,t){e.tenantKey=t.tenantKey},controllerAs:"deviceDetailsCtrl"}),e.state("proof",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/proof",templateUrl:"app/proof/main.html",controller:"ProofOfPlayCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Proof of Play"}}),e.state("proofDetail",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/proof/:tenant",templateUrl:"app/proof/detail.html",controller:"ProofOfPlayCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Proof of Play"}}),e.state("admin",{resolve:{isAdmin:["AuthorizationService",function(e){return e.isAdminOrDistributorAdmin()}]},url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Admin"}}),t.otherwise("/sign_in"),n.setBaseUrl("/api/v1"),n.addResponseInterceptor(function(e){var t=e;// Uncomment this for pagination support when using PagingListHandlerMixin on the Python side.
//    if resourceType == 'devices' and operation = 'getList' and url == '/api/v1/devices'
//      result = data.objects
return t}),n.setRestangularFields({id:"key"})}])}(),function(){var e=angular.module("skykitProvisioning");e.config(["$stateProvider","$urlRouterProvider","RestangularProvider",function(e,t,n){return e.state("sign_in",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],notAuthenticated:["AuthorizationService",function(e){return e.notAuthenticated()}]},url:"/sign_in",templateUrl:"app/authentication/sign_in.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("signed_out",{url:"/signed_out",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],notAuthenticated:["AuthorizationService",function(e){return e.notAuthenticated()}]},templateUrl:"app/authentication/signed_out.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("sign_out",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/sign_out",templateUrl:"app/authentication/sign_out.html",controller:"AuthenticationCtrl",controllerAs:"authenticationCtrl"}),e.state("distributor_selection",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/distributor_selection",templateUrl:"app/distributor/distributor_selector.html",controller:"DistributorSelectorCtrl",controllerAs:"vm"}),e.state("home",{url:"/",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},controller:"WelcomeCtrl",controllerAs:"welcomeCtrl",ncyBreadcrumb:{label:"Skykit Provisioning"}}),e.state("welcome",{url:"/welcome",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},controller:"WelcomeCtrl",controllerAs:"welcomeCtrl",ncyBreadcrumb:{label:"Skykit Provisioning"}}),e.state("domains",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains",templateUrl:"app/domain/domains-listing.html",controller:"DomainsCtrl",controllerAs:"domainsCtrl",ncyBreadcrumb:{label:"Domains"}}),e.state("addDomain",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains/add",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:"domainDetailsCtrl",ncyBreadcrumb:{label:"Add domain",parent:"domains"}}),e.state("editDomain",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/domains/:domainKey",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:"domainDetailsCtrl",ncyBreadcrumb:{label:"{{ domainDetailsCtrl.currentDomain.name }}",parent:"domains"}}),e.state("tenants",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants",templateUrl:"app/tenant/tenants-listing.html",controller:"TenantsCtrl",controllerAs:"tenantsCtrl",ncyBreadcrumb:{label:"Tenants"}}),e.state("addTenant",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/add",templateUrl:"app/tenant/tenant-add.html",controller:"TenantAddCtrl",controllerAs:"tenantAddCtrl",ncyBreadcrumb:{label:"Add tenant",parent:"tenants"}}),e.state("tenantDetails",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/details",templateUrl:"app/tenant/tenant-details.html",controller:"TenantDetailsCtrl",controllerAs:"tenantDetailsCtrl",ncyBreadcrumb:{label:"{{ tenantDetailsCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantManagedDevices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/managed",templateUrl:"app/tenant/tenant-managed-devices.html",controller:"TenantManagedDevicesCtrl",controllerAs:"tenantManagedDevicesCtrl",ncyBreadcrumb:{label:"{{ tenantManagedDevicesCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantUnmanagedDevices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/unmanaged",templateUrl:"app/tenant/tenant-unmanaged-devices.html",controller:"TenantUnmanagedDevicesCtrl",controllerAs:"tenantUnmanagedDevicesCtrl",ncyBreadcrumb:{label:"{{ tenantUnmanagedDevicesCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("tenantLocations",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/locations",templateUrl:"app/tenant/tenant-locations.html",controller:"TenantLocationsCtrl",controllerAs:"tenantLocationsCtrl",ncyBreadcrumb:{label:"{{ tenantLocationsCtrl.currentTenant.name }}",parent:"tenants"}}),e.state("editLocation",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/locations/:locationKey",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:"tenantLocationCtrl",ncyBreadcrumb:{label:"{{ tenantLocationCtrl.tenantName }}  / {{ tenantLocationCtrl.locationName }}",parent:"tenants"}}),e.state("addLocation",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/tenants/:tenantKey/location",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:"tenantLocationCtrl",ncyBreadcrumb:{label:"{{ tenantLocationCtrl.tenantName }}  / Location",parent:"tenants"}}),e.state("devices",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/devices",templateUrl:"app/device/devices-listing.html",controller:"DevicesListingCtrl",controllerAs:"devicesListingCtrl",ncyBreadcrumb:{label:"Devices"}}),e.state("editDevice",{resolve:{identity:["IdentityService",function(e){return e.getIdentity()}],authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/devices/:deviceKey?tenantKey?fromDevices",templateUrl:"app/device/device-detail.html",ncyBreadcrumb:{label:"{{ deviceDetailsCtrl.currentDevice.key }}",parent:"devices"},controller:"DeviceDetailsCtrl","function":function(e,t){e.tenantKey=t.tenantKey},controllerAs:"deviceDetailsCtrl"}),e.state("proof",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/proof",templateUrl:"app/proof/main.html",controller:"ProofOfPlayCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Proof of Play"}}),e.state("proofDetail",{resolve:{authenticated:["AuthorizationService",function(e){return e.authenticated()}]},url:"/proof/:tenant",templateUrl:"app/proof/detail.html",controller:"ProofOfPlayCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Proof of Play"}}),e.state("admin",{resolve:{isAdmin:["AuthorizationService",function(e){return e.isAdminOrDistributorAdmin()}]},url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",controllerAs:"vm",ncyBreadcrumb:{label:"Admin"}}),t.otherwise("/sign_in"),n.setBaseUrl("/api/v1"),n.addResponseInterceptor(function(e){var t=e;// Uncomment this for pagination support when using PagingListHandlerMixin on the Python side.
//    if resourceType == 'devices' and operation = 'getList' and url == '/api/v1/devices'
//      result = data.objects
return t}),n.setRestangularFields({id:"key"})}])}(),function(){var e=angular.module("skykitProvisioning");e.run(["StorageService","Restangular","$location","$injector","$rootScope","$timeout",function(t,n,r,i,a,o){e.constant("moment",moment);var s=function(){var e=i.get("$state");return a.$on("$stateChangeError",function(t,n,r,i,a,o){return"authError"===o[0]?e.go(o[1]):void 0})};return o(s,500),n.addRequestInterceptor(function(e,i){var a="6C346588BD4C6D722A1165B43C51C";return r.host().indexOf("provisioning-gamestop")>-1&&(a="5XZHBF3mOwqJlYAlG1NeeWX0Cb72g"),n.setDefaultHeaders({"Content-Type":"application/json",Accept:"application/json",Authorization:a,"X-Provisioning-User":t.get("userKey"),"X-Provisioning-Distributor":t.get("currentDistributorKey")}),"remove"===i?void 0:e})}]),e.factory("RequestInterceptor",["StorageService","$location",function(e,t){var n={request:function(n){var r="5XZHBF3mOwqJlYAlG1NeeWX0Cb72g",i="6C346588BD4C6D722A1165B43C51C";return n.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:t.host().indexOf("provisioning-gamestop")>-1?r:i,"X-Provisioning-User":e.get("userKey"),"X-Provisioning-User-Identifier":e.get("userEmail"),"X-Provisioning-Distributor":e.get("currentDistributorKey")},n}};return n}]),e.config(["$httpProvider",function(e){return e.interceptors.push("RequestInterceptor")}])}(),function(){var e=angular.module("skykitProvisioning");e.run(["StorageService","Restangular","$location","$injector","$rootScope","$timeout",function(t,n,r,i,a,o){e.constant("moment",moment);var s=function(){var e=i.get("$state");return a.$on("$stateChangeError",function(t,n,r,i,a,o){return"authError"===o[0]?e.go(o[1]):void 0})};return o(s,500),n.addRequestInterceptor(function(e,i){var a="6C346588BD4C6D722A1165B43C51C";return r.host().indexOf("provisioning-gamestop")>-1&&(a="5XZHBF3mOwqJlYAlG1NeeWX0Cb72g"),n.setDefaultHeaders({"Content-Type":"application/json",Accept:"application/json",Authorization:a,"X-Provisioning-User":t.get("userKey"),"X-Provisioning-Distributor":t.get("currentDistributorKey")}),"remove"===i?void 0:e})}]),e.factory("RequestInterceptor",["StorageService","$location",function(e,t){var n={request:function(n){var r="5XZHBF3mOwqJlYAlG1NeeWX0Cb72g",i="6C346588BD4C6D722A1165B43C51C";return n.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:t.host().indexOf("provisioning-gamestop")>-1?r:i,"X-Provisioning-User":e.get("userKey"),"X-Provisioning-User-Identifier":e.get("userEmail"),"X-Provisioning-Distributor":e.get("currentDistributorKey")},n}};return n}]),e.config(["$httpProvider",function(e){return e.interceptors.push("RequestInterceptor")}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiDisplayCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Date",group2:"Summarized",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,displays:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_displays=[],a.initialize=function(){return t.getAllDisplays(a.tenant).then(function(e){return a.loading=!1,a.displays=e.data.devices,a.had_some_items=a.displays.length>0?!0:!1})},a.refreshDisplays=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_displays=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedDisplays=function(e){if(a.isDisplayValid(e)){a.selected_displays.push(e);var t=a.displays.indexOf(e);a.displays.splice(t,1),a.searchText=""}return a.areDisplaysValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isDisplayValid=function(t){return e(t,a.displays)?e(t,a.selected_displays)?!1:!0:!1},a.areDisplaysValid=function(){return a.formValidity.displays=a.selected_displays.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedDisplay=function(e){var t=a.selected_displays.indexOf(e);return a.selected_displays.splice(t,1),a.displays.push(e),a.areDisplaysValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.displays&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),displays:a.selected_displays,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){return"1"===a["final"].type?t.downloadCSVForMultipleDevicesByDate(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].displays,a.tenant):t.downloadCSVForMultipleDevicesSummarized(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].displays,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiDisplayCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Date",group2:"Summarized",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,displays:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_displays=[],a.initialize=function(){return t.getAllDisplays(a.tenant).then(function(e){return a.loading=!1,a.displays=e.data.devices,a.had_some_items=a.displays.length>0?!0:!1})},a.refreshDisplays=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_displays=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedDisplays=function(e){if(a.isDisplayValid(e)){a.selected_displays.push(e);var t=a.displays.indexOf(e);a.displays.splice(t,1),a.searchText=""}return a.areDisplaysValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isDisplayValid=function(t){return e(t,a.displays)?e(t,a.selected_displays)?!1:!0:!1},a.areDisplaysValid=function(){return a.formValidity.displays=a.selected_displays.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedDisplay=function(e){var t=a.selected_displays.indexOf(e);return a.selected_displays.splice(t,1),a.displays.push(e),a.areDisplaysValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.displays&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),displays:a.selected_displays,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){return"1"===a["final"].type?t.downloadCSVForMultipleDevicesByDate(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].displays,a.tenant):t.downloadCSVForMultipleDevicesSummarized(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].displays,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiLocationCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Device",group2:"Summarized",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,locations:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_locations=[],a.initialize=function(){return t.getAllLocations(a.tenant).then(function(e){return a.loading=!1,a.locations=e.data.locations,a.had_some_items=a.locations.length>0?!0:!1})},a.refreshLocations=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_locations=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedLocations=function(e){if(a.isLocationValid(e)){a.selected_locations.push(e);var t=a.locations.indexOf(e);a.locations.splice(t,1),a.searchText=""}return a.areLocationsValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isLocationValid=function(t){return e(t,a.locations)?e(t,a.selected_locations)?!1:!0:!1},a.areLocationsValid=function(){return a.formValidity.locations=a.selected_locations.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedLocation=function(e){var t=a.selected_locations.indexOf(e);return a.selected_locations.splice(t,1),a.locations.push(e),a.areLocationsValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.locations&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),locations:a.selected_locations,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){return"1"===a["final"].type?t.downloadCSVForMultipleLocationsByDevice(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].locations,a.tenant):t.downloadCSVForMultipleLocationsSummarized(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].locations,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiLocationCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Device",group2:"Summarized",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,locations:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_locations=[],a.initialize=function(){return t.getAllLocations(a.tenant).then(function(e){return a.loading=!1,a.locations=e.data.locations,a.had_some_items=a.locations.length>0?!0:!1})},a.refreshLocations=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_locations=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedLocations=function(e){if(a.isLocationValid(e)){a.selected_locations.push(e);var t=a.locations.indexOf(e);a.locations.splice(t,1),a.searchText=""}return a.areLocationsValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isLocationValid=function(t){return e(t,a.locations)?e(t,a.selected_locations)?!1:!0:!1},a.areLocationsValid=function(){return a.formValidity.locations=a.selected_locations.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedLocation=function(e){var t=a.selected_locations.indexOf(e);return a.selected_locations.splice(t,1),a.locations.push(e),a.areLocationsValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.locations&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),locations:a.selected_locations,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){return"1"===a["final"].type?t.downloadCSVForMultipleLocationsByDevice(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].locations,a.tenant):t.downloadCSVForMultipleLocationsSummarized(a["final"].start_date_unix,a["final"].end_date_unix,a["final"].locations,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiResourceCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Device",group2:"By Date",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,resources:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_resources=[],a.initialize=function(){return t.getAllResources(a.tenant).then(function(e){a.loading=!1,a.full_resource_map=e.data.resources,a.resources=[];for(var t=0;t<e.data.resources.length;t++){var n=e.data.resources[t];a.resources.push(n.resource_name)}return a.had_some_items=a.resources.length>0?!0:!1})},a.refreshResources=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_resources=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedResources=function(e){if(a.isResourceValid(e)){a.selected_resources.push(e);var t=a.resources.indexOf(e);a.resources.splice(t,1),a.searchText=""}return a.areResourcesValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isResourceValid=function(t){return e(t,a.resources)?e(t,a.selected_resources)?!1:!0:!1},a.areResourcesValid=function(){return a.formValidity.resources=a.selected_resources.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedResource=function(e){var t=a.selected_resources.indexOf(e);return a.selected_resources.splice(t,1),a.resources.push(e),a.areResourcesValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.resources&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),resources:a.selected_resources,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){for(var e=[],n=0;n<a["final"].resources.length;n++)for(var r=a["final"].resources[n],i=0;i<a.full_resource_map.length;i++){var o=a.full_resource_map[i];o.resource_name===r&&e.push(o.resource_identifier)}return"1"===a["final"].type?t.downloadCSVForMultipleResourcesByDevice(a["final"].start_date_unix,a["final"].end_date_unix,e,a.tenant):t.downloadCSVForMultipleResourcesByDate(a["final"].start_date_unix,a["final"].end_date_unix,e,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayMultiResourceCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r,i){var a=this;return a.radioButtonChoices={group1:"By Device",group2:"By Date",selection:null},a.dateTimeSelection={start:null,end:null},a.formValidity={start_date:!1,end_date:!1,resources:!1},a.tenant=n.tenant,a.no_cache=!0,a.loading=!0,a.disabled=!0,a.disabledTenant=!0,a.selected_resources=[],a.initialize=function(){return t.getAllResources(a.tenant).then(function(e){a.loading=!1,a.full_resource_map=e.data.resources,a.resources=[];for(var t=0;t<e.data.resources.length;t++){var n=e.data.resources[t];a.resources.push(n.resource_name)}return a.had_some_items=a.resources.length>0?!0:!1})},a.refreshResources=function(){return a.searchText="",a.selectedItem="",a.loading=!0,a.disabled=!0,a.selected_resources=[],t.proofplayCache.removeAll(),a.initialize()},a.addToSelectedResources=function(e){if(a.isResourceValid(e)){a.selected_resources.push(e);var t=a.resources.indexOf(e);a.resources.splice(t,1),a.searchText=""}return a.areResourcesValid(),a.isDisabled()},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isRadioValid=function(e){return a.formValidity.type=e,a.isDisabled()},a.isResourceValid=function(t){return e(t,a.resources)?e(t,a.selected_resources)?!1:!0:!1},a.areResourcesValid=function(){return a.formValidity.resources=a.selected_resources.length>0,a.isDisabled()},a.isStartDateValid=function(e){return a.formValidity.start_date=e instanceof Date,a.isDisabled()},a.isEndDateValid=function(e){return a.formValidity.end_date=e instanceof Date,a.isDisabled()},a.removeFromSelectedResource=function(e){var t=a.selected_resources.indexOf(e);return a.selected_resources.splice(t,1),a.resources.push(e),a.areResourcesValid(),a.isDisabled()},a.isDisabled=function(){return a.formValidity.start_date&&a.formValidity.end_date&&a.formValidity.resources&&a.formValidity.type?(a.disabled=!1,a["final"]={start_date_unix:moment(a.dateTimeSelection.start).unix(),end_date_unix:moment(a.dateTimeSelection.end).unix(),resources:a.selected_resources,type:a.radioButtonChoices.selection}):a.disabled=!0},a.submit=function(){for(var e=[],n=0;n<a["final"].resources.length;n++)for(var r=a["final"].resources[n],i=0;i<a.full_resource_map.length;i++){var o=a.full_resource_map[i];o.resource_name===r&&e.push(o.resource_identifier)}return"1"===a["final"].type?t.downloadCSVForMultipleResourcesByDevice(a["final"].start_date_unix,a["final"].end_date_unix,e,a.tenant):t.downloadCSVForMultipleResourcesByDate(a["final"].start_date_unix,a["final"].end_date_unix,e,a.tenant)},a.tenants=null,a.currentTenant=a.tenant,a.initialize_tenant_select=function(){return t.getAllTenants().then(function(e){return a.tenants=e.data.tenants})},a.querySearch=function(e,n){return t.querySearch(e,n)},a.isSelectionValid=function(t){return a.disabledTenant=e(t,a.tenants)?!1:!0},a.submitTenant=function(e){return e!==a.currentTenant?(r.go("proofDetail",{tenant:e}),i.showSuccessToast("Proof of Play reporting set to "+e)):i.showErrorToast("Proof of Play reporting is already set to "+e)},a}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r){var i=this;return i.resource={title:"Resource Report"},i.location={title:"Location Report"},i.display={title:"Display Report"},i.chosen_tenant=null,i.tenants=null,i.disabled=!0,i.initialize=function(){return t.getAllTenants().then(function(e){return i.tenants=e.data.tenants})},i.querySearch=function(e,n){return t.querySearch(e,n)},i.isSelectionValid=function(t){return i.disabled=e(t,i.tenants)?!1:!0},i.submitTenant=function(e){return e?(i.chosen_tenant=e,r.go("proofDetail",{tenant:i.chosen_tenant})):void 0},i.refreshTenants=function(){i.tenants=null;var e=t.makeHTTPURL("/retrieve_my_tenants","");return t.proofplayCache.remove(e),i.initialize()},i}])}(),function(){function e(e,t){return t.indexOf(e)>=0}var t=angular.module("skykitProvisioning");t.controller("ProofOfPlayCtrl",["ProofPlayService","$stateParams","$state","ToastsService",function(t,n,r){var i=this;return i.resource={title:"Resource Report"},i.location={title:"Location Report"},i.display={title:"Display Report"},i.chosen_tenant=null,i.tenants=null,i.disabled=!0,i.initialize=function(){return t.getAllTenants().then(function(e){return i.tenants=e.data.tenants})},i.querySearch=function(e,n){return t.querySearch(e,n)},i.isSelectionValid=function(t){return i.disabled=e(t,i.tenants)?!1:!0},i.submitTenant=function(e){return e?(i.chosen_tenant=e,r.go("proofDetail",{tenant:i.chosen_tenant})):void 0},i.refreshTenants=function(){i.tenants=null;var e=t.makeHTTPURL("/retrieve_my_tenants","");return t.proofplayCache.remove(e),i.initialize()},i}])}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("AdminService",["Restangular",function(e){return new(function(){function t(){_classCallCheck(this,t),this.USER_SERVICE="users",this.DISTRIBUTOR_SERVICE="distributors"}return _createClass(t,[{key:"makeDistributor",value:function(t,n){var r={distributor:t,admin_email:n},i=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").customPOST(r);return i}},{key:"addUserToDistributor",value:function(t,n,r){var i={user_email:t,distributor:n,distributor_admin:r},a=e.oneUrl(this.USER_SERVICE,"/api/v1/users").customPOST(i);return a}},{key:"getUsersOfDistributor",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/analytics/distributors/"+t+"/users").get();return n}},{key:"getAllDistributors",value:function(){var t=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").get();return t}}]),t}())}]),angular.module("skykitProvisioning").factory("AdminService",["Restangular",function(e){return new(function(){function t(){_classCallCheck2(this,t),this.USER_SERVICE="users",this.DISTRIBUTOR_SERVICE="distributors"}return _createClass2(t,[{key:"makeDistributor",value:function(t,n){var r={distributor:t,admin_email:n},i=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").customPOST(r);return i}},{key:"addUserToDistributor",value:function(t,n,r){var i={user_email:t,distributor:n,distributor_admin:r},a=e.oneUrl(this.USER_SERVICE,"/api/v1/users").customPOST(i);return a}},{key:"getUsersOfDistributor",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/analytics/distributors/"+t+"/users").get();return n}},{key:"getAllDistributors",value:function(){var t=e.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").get();return t}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("AuthorizationService",["SessionsService","$q",function(e,t){return new(function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"authenticated",value:function(){var n=t.defer(),r=e.getUserKey();return r?n.resolve(!0):n.reject(["authError","sign_in"]),n.promise}},{key:"notAuthenticated",value:function(){var n=t.defer(),r=e.getUserKey();return r?n.reject(["authError","home"]):n.resolve(!0),n.promise}},{key:"isAdminOrDistributorAdmin",value:function(){var n=t.defer(),r=e.getIsAdmin(),i=e.getDistributorsAsAdmin(),a=!1;i&&i.length>0&&(a=!0);var o=e.getUserKey();return o?r||a?n.resolve(!0):n.reject(["authError","home"]):n.reject("sign_in"),n.promise}}]),n}())}]),angular.module("skykitProvisioning").factory("AuthorizationService",["SessionsService","$q",function(e,t){return new(function(){function n(){_classCallCheck2(this,n)}return _createClass2(n,[{key:"authenticated",value:function(){var n=t.defer(),r=e.getUserKey();return r?n.resolve(!0):n.reject(["authError","sign_in"]),n.promise}},{key:"notAuthenticated",value:function(){var n=t.defer(),r=e.getUserKey();return r?n.reject(["authError","home"]):n.resolve(!0),n.promise}},{key:"isAdminOrDistributorAdmin",value:function(){var n=t.defer(),r=e.getIsAdmin(),i=e.getDistributorsAsAdmin(),a=!1;i&&i.length>0&&(a=!0);var o=e.getUserKey();return o?r||a?n.resolve(!0):n.reject(["authError","home"]):n.reject("sign_in"),n.promise}}]),n}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("CommandsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck(this,t),this.SERVICE_NAME="devices"}return _createClass(t,[{key:"reset",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/reset").post();return n}},{key:"contentDelete",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/content-delete").post();return n}},{key:"contentUpdate",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/content-update").post();return n}},{key:"updateDevice",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/refresh-device-representation").post();return n}},{key:"powerOn",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/power-on").post();return n}},{key:"powerOff",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/power-off").post();return n}},{key:"volume",value:function(t,n){var r={volume:n},i=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t).customPOST(r,"commands/volume");return i}},{key:"custom",value:function(t,n){var r={command:n},i=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t).customPOST(r,"commands/custom");return i}}]),t}())}]),angular.module("skykitProvisioning").factory("CommandsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck2(this,t),this.SERVICE_NAME="devices"}return _createClass2(t,[{key:"reset",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/reset").post();return n}},{key:"contentDelete",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/content-delete").post();return n}},{key:"contentUpdate",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/content-update").post();return n}},{key:"updateDevice",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/refresh-device-representation").post();return n}},{key:"powerOn",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/power-on").post();return n}},{key:"powerOff",value:function(t){var n=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t+"/commands/power-off").post();return n}},{key:"volume",value:function(t,n){var r={volume:n},i=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t).customPOST(r,"commands/volume");return i}},{key:"custom",value:function(t,n){var r={command:n},i=e.oneUrl(this.SERVICE_NAME,"api/v1/devices/"+t).customPOST(r,"commands/custom");return i}}]),t}())}]);var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("DevicesService",["$log","Restangular","$q","CacheFactory","$http",function(e,t,n,r,i){var a,a;return new(function(){function e(){var t=this;_classCallCheck(this,e),this.SERVICE_NAME="devices",this.uriBase="v1/devices",r.get("deviceCache")||(this.deviceCache=r("deviceCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e){i.get(e).success(function(n){t.deviceCache.put(e,n)})}})),r.get("deviceByTenantCache")||(this.deviceByTenantCache=r("deviceByTenantCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e){i.get(e).success(function(n){t.deviceByTenantCache.put(e,n)})}}))}return _createClass(e,[{key:"getDeviceByMacAddress",value:function(e){var n="api/v1/devices?mac_address="+e;return t.oneUrl("api/v1/devices",n).get()}},{key:"getDeviceByKey",value:function(e){var n="api/v1/devices/"+e,r=t.oneUrl(this.SERVICE_NAME,n).get();return r}},{key:"getIssuesByKey",value:function(e,n,r,i,a){i=void 0===i?null:i,a=void 0===a?null:a;var o="/api/v1/devices/"+i+"/"+a+"/"+e+"/issues?start="+n+"&end="+r,s=t.oneUrl(this.SERVICE_NAME,o).get();return s}},{key:"getCommandEventsByKey",value:function(e,n,r){n=void 0===n?null:n,r=void 0===r?null:r;var i="/api/v1/player-command-events/"+n+"/"+r+"/"+e,a=t.oneUrl(this.SERVICE_NAME,i).get();return a}},{key:"getDevicesByTenant",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByTenantURL(e,r,i,!1);if(a.deviceByTenantCache.get(s))o.resolve(a.deviceByTenantCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceByTenantCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}}},{key:"getUnmanagedDevicesByTenant",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByTenantURL(e,r,i,!0);if(a.deviceByTenantCache.get(s))o.resolve(a.deviceByTenantCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceByTenantCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}}},{key:"searchDevicesByPartialSerialByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/search/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialMacByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/search/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();
return a}}},{key:"matchDevicesByFullSerialByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/match/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullMacByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/match/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialSerial",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/search/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialMac",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/search/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullSerial",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/match/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullMac",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/match/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"getDevicesByDistributor",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByDistributorURL(e,r,i,!1);if(a.deviceCache.get(s))o.resolve(a.deviceCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}}},{key:"getUnmanagedDevicesByDistributor",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByDistributorURL(e,r,i,!0);if(a.deviceCache.get(s))o.resolve(a.deviceCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}}},{key:"getDevices",value:function(){var e=t.all(this.SERVICE_NAME).getList();return e}},{key:"save",value:function(e){if(void 0!==e.key)var n=e.put();else var n=t.service("devices").post(e);return n}},{key:"delete",value:function(e){var n=t.one(this.SERVICE_NAME,e).remove();return n}},{key:"getPanelModels",value:function(){return[{id:"None",displayName:"None"},{id:"Sony-FXD40LX2F",displayName:"Sony FXD40LX2F"},{id:"NEC-LCD4215",displayName:"NEC LCD4215"},{id:"Phillips-BDL5560EL",displayName:"Phillips BDL5560EL"},{id:"Panasonic-TH55LF6U",displayName:"Panasonic TH55LF6U"},{id:"Sharp-PNE521",displayName:"Sharp PNE521"}]}},{key:"getPanelInputs",value:function(){return[{id:"None",parentId:"None"},{id:"HDMI1",parentId:"Sony-FXD40LX2F"},{id:"HDMI2",parentId:"Sony-FXD40LX2F"},{id:"HDMI1",parentId:"Phillips-BDL5560EL"},{id:"HDMI2",parentId:"Phillips-BDL5560EL"},{id:"DVI",parentId:"Phillips-BDL5560EL"},{id:"HDMI1",parentId:"Panasonic-TH55LF6U"},{id:"HDMI2",parentId:"Panasonic-TH55LF6U"},{id:"DVI",parentId:"Panasonic-TH55LF6U"},{id:"HDMI1",parentId:"Sharp-PNE521"},{id:"HDMI2",parentId:"Sharp-PNE521"},{id:"DVI",parentId:"Sharp-PNE521"},{id:"VGA",parentId:"NEC-LCD4215"},{id:"DVI1",parentId:"NEC-LCD4215"}]}},{key:"makeDevicesByDistributorURL",value:function(e,t,n,r){return a="/api/v1/distributors/"+t+"/"+n+"/"+e+"/devices?unmanaged="+r}},{key:"makeDevicesByTenantURL",value:function(e,t,n,r){return a="/api/v1/tenants/"+t+"/"+n+"/"+e+"/devices?unmanaged="+r}}]),e}())}]),angular.module("skykitProvisioning").factory("DevicesService",["$log","Restangular","$q","CacheFactory","$http",function(e,t,n,r,i){var a,a;return new(function(){function e(){var t=this;_classCallCheck2(this,e),this.SERVICE_NAME="devices",this.uriBase="v1/devices",r.get("deviceCache")||(this.deviceCache=r("deviceCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e){i.get(e).success(function(n){t.deviceCache.put(e,n)})}})),r.get("deviceByTenantCache")||(this.deviceByTenantCache=r("deviceByTenantCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e){i.get(e).success(function(n){t.deviceByTenantCache.put(e,n)})}}))}return _createClass2(e,[{key:"getDeviceByMacAddress",value:function(e){var n="api/v1/devices?mac_address="+e;return t.oneUrl("api/v1/devices",n).get()}},{key:"getDeviceByKey",value:function(e){var n="api/v1/devices/"+e,r=t.oneUrl(this.SERVICE_NAME,n).get();return r}},{key:"getIssuesByKey",value:function(e,n,r,i,a){i=void 0===i?null:i,a=void 0===a?null:a;var o="/api/v1/devices/"+i+"/"+a+"/"+e+"/issues?start="+n+"&end="+r,s=t.oneUrl(this.SERVICE_NAME,o).get();return s}},{key:"getCommandEventsByKey",value:function(e,n,r){n=void 0===n?null:n,r=void 0===r?null:r;var i="/api/v1/player-command-events/"+n+"/"+r+"/"+e,a=t.oneUrl(this.SERVICE_NAME,i).get();return a}},{key:"getDevicesByTenant",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByTenantURL(e,r,i,!1);if(a.deviceByTenantCache.get(s))o.resolve(a.deviceByTenantCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceByTenantCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof2(o)))return o.v}}},{key:"getUnmanagedDevicesByTenant",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByTenantURL(e,r,i,!0);if(a.deviceByTenantCache.get(s))o.resolve(a.deviceByTenantCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceByTenantCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof2(o)))return o.v}}},{key:"searchDevicesByPartialSerialByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/search/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialMacByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/search/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullSerialByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/match/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullMacByTenant",value:function(e,n,r){if(void 0!==e){var i="api/v1/tenants/match/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialSerial",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/search/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"searchDevicesByPartialMac",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/search/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullSerial",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/match/serial/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"matchDevicesByFullMac",value:function(e,n,r){if(void 0!==e){var i="api/v1/distributors/match/mac/"+e+"/"+n+"/"+r+"/devices",a=t.oneUrl(this.SERVICE_NAME,i).get();return a}}},{key:"getDevicesByDistributor",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByDistributorURL(e,r,i,!1);if(a.deviceCache.get(s))o.resolve(a.deviceCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof2(o)))return o.v}}},{key:"getUnmanagedDevicesByDistributor",value:function(e,r,i){var a=this;if(void 0!==e){var o=function(){var o=n.defer(),s=a.makeDevicesByDistributorURL(e,r,i,!0);if(a.deviceCache.get(s))o.resolve(a.deviceCache.get(s));else{var c=t.oneUrl(a.SERVICE_NAME,s).get();c.then(function(e){return a.deviceCache.put(s,e),o.resolve(e)})}return{v:o.promise}}();if("object"===("undefined"==typeof o?"undefined":_typeof2(o)))return o.v}}},{key:"getDevices",value:function(){var e=t.all(this.SERVICE_NAME).getList();return e}},{key:"save",value:function(e){if(void 0!==e.key)var n=e.put();else var n=t.service("devices").post(e);return n}},{key:"delete",value:function(e){var n=t.one(this.SERVICE_NAME,e).remove();return n}},{key:"getPanelModels",value:function(){return[{id:"None",displayName:"None"},{id:"Sony-FXD40LX2F",displayName:"Sony FXD40LX2F"},{id:"NEC-LCD4215",displayName:"NEC LCD4215"},{id:"Phillips-BDL5560EL",displayName:"Phillips BDL5560EL"},{id:"Panasonic-TH55LF6U",displayName:"Panasonic TH55LF6U"},{id:"Sharp-PNE521",displayName:"Sharp PNE521"}]}},{key:"getPanelInputs",value:function(){return[{id:"None",parentId:"None"},{id:"HDMI1",parentId:"Sony-FXD40LX2F"},{id:"HDMI2",parentId:"Sony-FXD40LX2F"},{id:"HDMI1",parentId:"Phillips-BDL5560EL"},{id:"HDMI2",parentId:"Phillips-BDL5560EL"},{id:"DVI",parentId:"Phillips-BDL5560EL"},{id:"HDMI1",parentId:"Panasonic-TH55LF6U"},{id:"HDMI2",parentId:"Panasonic-TH55LF6U"},{id:"DVI",parentId:"Panasonic-TH55LF6U"},{id:"HDMI1",parentId:"Sharp-PNE521"},{id:"HDMI2",parentId:"Sharp-PNE521"},{id:"DVI",parentId:"Sharp-PNE521"},{id:"VGA",parentId:"NEC-LCD4215"},{id:"DVI1",parentId:"NEC-LCD4215"}]}},{key:"makeDevicesByDistributorURL",value:function(e,t,n,r){return a="/api/v1/distributors/"+t+"/"+n+"/"+e+"/devices?unmanaged="+r}},{key:"makeDevicesByTenantURL",value:function(e,t,n,r){return a="/api/v1/tenants/"+t+"/"+n+"/"+e+"/devices?unmanaged="+r}}]),e}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("DistributorsService",["Restangular","$state","SessionsService","ProofPlayService","TenantsService","DevicesService",function(e,t,n,r,i,a){return new(function(){function o(){_classCallCheck(this,o),this.DISTRIBUTOR_SERVICE="distributors"}return _createClass(o,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service(this.DISTRIBUTOR_SERVICE).post(t);return n}},{key:"fetchAll",value:function(){var t=e.all(this.DISTRIBUTOR_SERVICE).getList();return t}},{key:"fetchAllByUser",value:function(t){if(t){var n=e.one("users",t).doGET(this.DISTRIBUTOR_SERVICE);return n}}},{key:"getByKey",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"api/v1/distributors/"+t).get();return n}},{key:"delete",value:function(t){if(t.key){var n=e.one(this.DISTRIBUTOR_SERVICE,t.key).remove();return n}}},{key:"getByName",value:function(t){var n=e.all(this.DISTRIBUTOR_SERVICE).getList({distributorName:t});return n}},{key:"getDomainsByKey",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"api/v1/distributors/"+t+"/domains").get();return n}},{key:"switchDistributor",value:function(e){return r.proofplayCache.removeAll(),i.tenantCache.removeAll(),a.deviceCache.removeAll(),a.deviceByTenantCache.removeAll(),n.setCurrentDistributorName(e.name),n.setCurrentDistributorKey(e.key),t.go("welcome")}}]),o}())}]),angular.module("skykitProvisioning").factory("DistributorsService",["Restangular","$state","SessionsService","ProofPlayService","TenantsService","DevicesService",function(e,t,n,r,i,a){return new(function(){function o(){_classCallCheck2(this,o),this.DISTRIBUTOR_SERVICE="distributors"}return _createClass2(o,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service(this.DISTRIBUTOR_SERVICE).post(t);return n}},{key:"fetchAll",value:function(){var t=e.all(this.DISTRIBUTOR_SERVICE).getList();return t}},{key:"fetchAllByUser",value:function(t){if(t){var n=e.one("users",t).doGET(this.DISTRIBUTOR_SERVICE);return n}}},{key:"getByKey",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"api/v1/distributors/"+t).get();return n}},{key:"delete",value:function(t){if(t.key){var n=e.one(this.DISTRIBUTOR_SERVICE,t.key).remove();return n}}},{key:"getByName",value:function(t){var n=e.all(this.DISTRIBUTOR_SERVICE).getList({distributorName:t});return n}},{key:"getDomainsByKey",value:function(t){var n=e.oneUrl(this.DISTRIBUTOR_SERVICE,"api/v1/distributors/"+t+"/domains").get();return n}},{key:"switchDistributor",value:function(e){return r.proofplayCache.removeAll(),i.tenantCache.removeAll(),a.deviceCache.removeAll(),a.deviceByTenantCache.removeAll(),n.setCurrentDistributorName(e.name),n.setCurrentDistributorKey(e.key),t.go("welcome")}}]),o}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("DomainsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("domains").post(t);return n}},{key:"fetchAllDomains",value:function(){var t=e.all("domains").getList();return t}},{key:"getDomainByKey",value:function(t){var n=e.oneUrl("domains","api/v1/domains/"+t).get();return n}},{key:"delete",value:function(t){if(void 0!==t.key){var n=e.one("domains",t.key).remove();return n}}}]),t}())}]),angular.module("skykitProvisioning").factory("DomainsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck2(this,t)}return _createClass2(t,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("domains").post(t);return n}},{key:"fetchAllDomains",value:function(){var t=e.all("domains").getList();return t}},{key:"getDomainByKey",value:function(t){var n=e.oneUrl("domains","api/v1/domains/"+t).get();return n}},{key:"delete",value:function(t){if(void 0!==t.key){var n=e.one("domains",t.key).remove();return n}}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("IdentityService",["$log","Restangular",function(e,t){return new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getIdentity",value:function(){return t.oneUrl("identity").get()}}]),e}())}]),angular.module("skykitProvisioning").factory("IdentityService",["$log","Restangular",function(e,t){return new(function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"getIdentity",value:function(){return t.oneUrl("identity").get()}}]),e}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("IntegrationEvents",["Restangular",function(e){return new(function(){function t(){_classCallCheck(this,t),this.ENROLLMENT_EVENTS="integration_events/enrollment"}return _createClass(t,[{key:"getEnrollmentEvents",value:function(t){var n={deviceKey:t};return e.all(this.ENROLLMENT_EVENTS).customGET("",n)}}]),t}())}]),angular.module("skykitProvisioning").factory("IntegrationEvents",["Restangular",function(e){return new(function(){function t(){_classCallCheck2(this,t),this.ENROLLMENT_EVENTS="integration_events/enrollment"}return _createClass2(t,[{key:"getEnrollmentEvents",value:function(t){var n={deviceKey:t};return e.all(this.ENROLLMENT_EVENTS).customGET("",n)}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("LocationsService",["Restangular",function(e){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("locations").post(t);return n}},{key:"getLocationsByTenantKey",value:function(t){var n=e.oneUrl("tenants","api/v1/tenants/"+t+"/locations").get();return n}},{key:"getLocationsByTenantKeyPaginated",value:function(t,n,r){n=void 0===n?null:n,r=void 0===r?null:r;var i=e.oneUrl("tenants","api/v1/tenants/"+t+"/"+n+"/"+r+"/locations").get();return i}},{key:"getLocationByKey",value:function(t){var n=e.oneUrl("locations","api/v1/locations/"+t).get();return n}}]),t}();return new t}]),angular.module("skykitProvisioning").factory("LocationsService",["Restangular",function(e){var t=function(){function t(){_classCallCheck2(this,t)}return _createClass2(t,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("locations").post(t);return n}},{key:"getLocationsByTenantKey",value:function(t){var n=e.oneUrl("tenants","api/v1/tenants/"+t+"/locations").get();return n}},{key:"getLocationsByTenantKeyPaginated",value:function(t,n,r){n=void 0===n?null:n,r=void 0===r?null:r;var i=e.oneUrl("tenants","api/v1/tenants/"+t+"/"+n+"/"+r+"/locations").get();return i}},{key:"getLocationByKey",value:function(t){var n=e.oneUrl("locations","api/v1/locations/"+t).get();return n}}]),t}();return new t}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("ProgressBarService",["ngProgressFactory",function(e){return new(function(){function t(){_classCallCheck(this,t),this.progressBar=e.createInstance()}return _createClass(t,[{key:"start",value:function(){return this.progressBar.setColor("#00FCFF"),this.progressBar.setHeight("4px"),this.progressBar.start()}},{key:"complete",value:function(){return this.progressBar.complete()}}]),t}())}]),angular.module("skykitProvisioning").factory("ProgressBarService",["ngProgressFactory",function(e){return new(function(){function t(){_classCallCheck2(this,t),this.progressBar=e.createInstance()}return _createClass2(t,[{key:"start",value:function(){return this.progressBar.setColor("#00FCFF"),this.progressBar.setHeight("4px"),this.progressBar.start()}},{key:"complete",value:function(){return this.progressBar.complete()}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("ProofPlayService",["$http","$q","$window","SessionsService","$stateParams","$state","ToastsService","CacheFactory",function(e,t,n,r,i,a,o,s){var c=void 0;return new(function(){function i(){var t=this;_classCallCheck(this,i),this.makeHTTPRequest=this.makeHTTPRequest.bind(this),this.uriBase="proofplay/api/v1",s.get("proofplayCache")||(this.proofplayCache=s("proofplayCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(n){e.get(n).success(function(e){t.proofplayCache.put(n,e)})}}))}return _createClass(i,[{key:"makeHTTPURL",value:function(e,t){return c=this.uriBase+e+t}},{key:"makeHTTPRequest",value:function(n,r){var i=this,a=t.defer(),o=this.makeHTTPURL(n,r);if(this.proofplayCache.get(o))a.resolve(this.proofplayCache.get(o));else{var s=e.get(o);s.then(function(e){return i.proofplayCache.put(o,e),a.resolve(e)}),s["catch"](function(e){return a.reject(e)})}return a.promise}},{key:"getAllResources",value:function(e){var t=this.makeHTTPRequest("/retrieve_all_resources/",e);return t["catch"](function(e){var t=e.status;return 403===t&&(o.showErrorToast("You are not allowed to view this tenant!"),a.go("proof",{})),404===t?(o.showErrorToast("You must select a tenant first!"),a.go("proof",{})):void 0}),t.then(function(e){return e})}},{key:"getAllDisplays",value:function(e){return this.makeHTTPRequest("/retrieve_all_displays/",e)}},{key:"getAllLocations",value:function(e){return this.makeHTTPRequest("/retrieve_all_locations/",e)}},{key:"getAllTenants",value:function(){return this.makeHTTPRequest("/retrieve_my_tenants","")}},{key:"downloadCSVForMultipleResourcesByDate",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_resource_by_date/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleResourcesByDevice",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_resource_by_device/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleDevicesSummarized",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_device_summarized/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleDevicesByDate",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_device_by_date/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleLocationsByDevice",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_location_by_device/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleLocationsSummarized",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_location_summarized/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"createFilterFor",value:function(e){return e=angular.lowercase(e),function(t){return t=angular.lowercase(t),0===t.indexOf(e)}}},{key:"querySearch",value:function(e,t){return t?e.filter(this.createFilterFor(t)):e}}]),i}())}]),angular.module("skykitProvisioning").factory("ProofPlayService",["$http","$q","$window","SessionsService","$stateParams","$state","ToastsService","CacheFactory",function(e,t,n,r,i,a,o,s){var c=void 0;return new(function(){function i(){var t=this;_classCallCheck2(this,i),this.makeHTTPRequest=this.makeHTTPRequest.bind(this),this.uriBase="proofplay/api/v1",s.get("proofplayCache")||(this.proofplayCache=s("proofplayCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(n){e.get(n).success(function(e){t.proofplayCache.put(n,e)})}}))}return _createClass2(i,[{key:"makeHTTPURL",value:function(e,t){return c=this.uriBase+e+t}},{key:"makeHTTPRequest",value:function(n,r){var i=this,a=t.defer(),o=this.makeHTTPURL(n,r);if(this.proofplayCache.get(o))a.resolve(this.proofplayCache.get(o));else{var s=e.get(o);s.then(function(e){return i.proofplayCache.put(o,e),a.resolve(e)}),s["catch"](function(e){return a.reject(e)})}return a.promise}},{key:"getAllResources",value:function(e){var t=this.makeHTTPRequest("/retrieve_all_resources/",e);return t["catch"](function(e){var t=e.status;return 403===t&&(o.showErrorToast("You are not allowed to view this tenant!"),a.go("proof",{})),404===t?(o.showErrorToast("You must select a tenant first!"),a.go("proof",{})):void 0}),t.then(function(e){return e})}},{key:"getAllDisplays",value:function(e){return this.makeHTTPRequest("/retrieve_all_displays/",e)}},{key:"getAllLocations",value:function(e){return this.makeHTTPRequest("/retrieve_all_locations/",e)}},{key:"getAllTenants",value:function(){return this.makeHTTPRequest("/retrieve_my_tenants","")}},{key:"downloadCSVForMultipleResourcesByDate",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_resource_by_date/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleResourcesByDevice",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_resource_by_device/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleDevicesSummarized",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_device_summarized/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleDevicesByDate",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_device_by_date/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleLocationsByDevice",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_location_by_device/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"downloadCSVForMultipleLocationsSummarized",value:function(e,t,i,a){for(var o="",s=0;s<i.length;s++){var c=i[s];o=o+"|"+c}return n.open(this.uriBase+"/multi_location_summarized/"+e+"/"+t+"/"+o+"/"+a+"/"+r.getCurrentDistributorKey(),"_blank"),!0}},{key:"createFilterFor",value:function(e){return e=angular.lowercase(e),function(t){return t=angular.lowercase(t),0===t.indexOf(e)}}},{key:"querySearch",value:function(e,t){return t?e.filter(this.createFilterFor(t)):e}}]),i}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("SessionsService",["$http","$log","StorageService","IdentityService","Restangular","$q",function(e,t,n,r,i,a){return new(function(){function t(){_classCallCheck(this,t),this.setIdentity=this.setIdentity.bind(this),this.uriBase="v1/sessions"}return _createClass(t,[{key:"setDistributors",value:function(e){return n.set("distributors",e)}},{key:"setDistributorsAsAdmin",value:function(e){return n.set("distributorsAsAdmin",e)}},{key:"setIsAdmin",value:function(e){return n.set("isAdmin",e)}},{key:"setUserKey",value:function(e){return n.set("userKey",e)}},{key:"setUserEmail",value:function(e){return n.set("userEmail",e)}},{key:"setCurrentDistributorKey",value:function(e){return n.set("currentDistributorKey",e)}},{key:"setCurrentDistributorName",value:function(e){return n.set("currentDistributorName",e)}},{key:"getUserKey",value:function(){return n.get("userKey")}},{key:"getUserEmail",value:function(){return n.get("userEmail")}},{key:"getDistributors",value:function(){return n.get("distributors")}},{key:"getCurrentDistributorName",value:function(){return n.get("currentDistributorName")}},{key:"getCurrentDistributorKey",value:function(){return n.get("currentDistributorKey")}},{key:"getDistributorsAsAdmin",value:function(){return n.get("distributorsAsAdmin")}},{key:"getIsAdmin",value:function(){return n.get("isAdmin")}},{key:"login",value:function(t){var n=this,r={access_token:_.clone(t.access_token),authuser:_.clone(t.authuser),client_id:_.clone(t.client_id),code:_.clone(t.code),id_token:_.clone(t.id_token),scope:_.clone(t.scope),session_state:_.clone(t.session_state),state:_.clone(t.state),status:_.clone(t.status)};t.email&&t.password&&(r=t);var i=e.post("/login",r);return i.success(function(e){return n.setUserKey(e.user.key),n.setIdentity().then(function(){return e})})}},{key:"setIdentity",value:function(){var e=this,t=a.defer(),n=r.getIdentity();return n.then(function(n){return e.setDistributors(n.distributors),e.setDistributorsAsAdmin(n.distributors_as_admin),e.setIsAdmin(n.is_admin),e.setUserEmail(n.email),e.setIsAdmin(n.is_admin),t.resolve()}),t.promise}},{key:"removeUserInfo",value:function(){return n.removeAll()}}]),t}())}]),angular.module("skykitProvisioning").factory("SessionsService",["$http","$log","StorageService","IdentityService","Restangular","$q",function(e,t,n,r,i,a){return new(function(){function t(){_classCallCheck2(this,t),this.setIdentity=this.setIdentity.bind(this),this.uriBase="v1/sessions"}return _createClass2(t,[{key:"setDistributors",value:function(e){return n.set("distributors",e)}},{key:"setDistributorsAsAdmin",value:function(e){return n.set("distributorsAsAdmin",e)}},{key:"setIsAdmin",value:function(e){return n.set("isAdmin",e)}},{key:"setUserKey",value:function(e){return n.set("userKey",e)}},{key:"setUserEmail",value:function(e){return n.set("userEmail",e)}},{key:"setCurrentDistributorKey",value:function(e){return n.set("currentDistributorKey",e)}},{key:"setCurrentDistributorName",value:function(e){return n.set("currentDistributorName",e)}},{key:"getUserKey",value:function(){return n.get("userKey")}},{key:"getUserEmail",value:function(){return n.get("userEmail")}},{key:"getDistributors",value:function(){return n.get("distributors")}},{key:"getCurrentDistributorName",value:function(){return n.get("currentDistributorName")}},{key:"getCurrentDistributorKey",value:function(){return n.get("currentDistributorKey")}},{key:"getDistributorsAsAdmin",value:function(){return n.get("distributorsAsAdmin")}},{key:"getIsAdmin",value:function(){return n.get("isAdmin")}},{key:"login",value:function(t){var n=this,r={access_token:_.clone(t.access_token),authuser:_.clone(t.authuser),client_id:_.clone(t.client_id),code:_.clone(t.code),id_token:_.clone(t.id_token),scope:_.clone(t.scope),session_state:_.clone(t.session_state),state:_.clone(t.state),status:_.clone(t.status)};t.email&&t.password&&(r=t);var i=e.post("/login",r);return i.success(function(e){return n.setUserKey(e.user.key),n.setIdentity().then(function(){return e})})}},{key:"setIdentity",value:function(){var e=this,t=a.defer(),n=r.getIdentity();return n.then(function(n){return e.setDistributors(n.distributors),e.setDistributorsAsAdmin(n.distributors_as_admin),e.setIsAdmin(n.is_admin),e.setUserEmail(n.email),e.setIsAdmin(n.is_admin),t.resolve()}),t.promise}},{key:"removeUserInfo",value:function(){return n.removeAll()}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("StorageService",function(){return new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"set",value:function(e,t){return Lockr.set(e,t)}},{key:"get",value:function(e){return Lockr.get(e)}},{key:"rm",value:function(e){return Lockr.rm(e)}},{key:"removeAll",value:function(){return Lockr.flush()}}]),e}())}),angular.module("skykitProvisioning").factory("StorageService",function(){return new(function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"set",value:function(e,t){return Lockr.set(e,t)}},{key:"get",value:function(e){return Lockr.get(e)}},{key:"rm",value:function(e){return Lockr.rm(e)}},{key:"removeAll",value:function(){return Lockr.flush()}}]),e}())});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("TenantsService",["Restangular","CacheFactory","SessionsService",function(e,t){return new(function(){function n(){var e=this;_classCallCheck(this,n),t.get("tenantCache")||(this.tenantCache=t("tenantCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(t){$http.get(t).success(function(n){e.tenantCache.put(t,n)})}}))}return _createClass(n,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("tenants").post(t);return n}},{key:"fetchAllTenants",value:function(){var t=e.all("tenants").getList();
return t}},{key:"fetchAllTenantsPaginated",value:function(t,n){var r="api/v1/tenants/paginated/"+t+"/"+n,i=e.oneUrl("tenants",r).get();return i}},{key:"getTenantByKey",value:function(t){var n="api/v1/tenants/"+t,r=e.oneUrl("tenants",n).get();return r}},{key:"delete",value:function(t){if(void 0!==t.key){var n=e.one("tenants",t.key).remove();return n}}}]),n}())}]),angular.module("skykitProvisioning").factory("TenantsService",["Restangular","CacheFactory","SessionsService",function(e,t){return new(function(){function n(){var e=this;_classCallCheck2(this,n),t.get("tenantCache")||(this.tenantCache=t("tenantCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(t){$http.get(t).success(function(n){e.tenantCache.put(t,n)})}}))}return _createClass2(n,[{key:"save",value:function(t){if(void 0!==t.key)var n=t.put();else var n=e.service("tenants").post(t);return n}},{key:"fetchAllTenants",value:function(){var t=e.all("tenants").getList();return t}},{key:"fetchAllTenantsPaginated",value:function(t,n){var r="api/v1/tenants/paginated/"+t+"/"+n,i=e.oneUrl("tenants",r).get();return i}},{key:"getTenantByKey",value:function(t){var n="api/v1/tenants/"+t,r=e.oneUrl("tenants",n).get();return r}},{key:"delete",value:function(t){if(void 0!==t.key){var n=e.one("tenants",t.key).remove();return n}}}]),n}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("TimezonesService",["$http","$log","Restangular",function(e,t,n){var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getUsTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/us").get();return e}},{key:"getAllTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/all").get();return e}},{key:"getCustomTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/custom").get();return e}}]),e}();return new r}]),angular.module("skykitProvisioning").factory("TimezonesService",["$http","$log","Restangular",function(e,t,n){var r=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"getUsTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/us").get();return e}},{key:"getAllTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/all").get();return e}},{key:"getCustomTimezones",value:function(){var e=n.oneUrl("timezones","api/v1/timezones/custom").get();return e}}]),e}();return new r}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("ToastsService",["toastr",function(e){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"showSuccessToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Success!":arguments[1];return e.success(t,n)}},{key:"showErrorToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Error!":arguments[1];return e.error(t,n)}},{key:"showInfoToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Information":arguments[1];return e.info(t,n)}}]),t}())}]),angular.module("skykitProvisioning").factory("ToastsService",["toastr",function(e){return new(function(){function t(){_classCallCheck2(this,t)}return _createClass2(t,[{key:"showSuccessToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Success!":arguments[1];return e.success(t,n)}},{key:"showErrorToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Error!":arguments[1];return e.error(t,n)}},{key:"showInfoToast",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"Information":arguments[1];return e.info(t,n)}}]),t}())}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();angular.module("skykitProvisioning").factory("VersionsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getVersions",value:function(){var t=e.oneUrl("versions").get();return t}}]),t}())}]),angular.module("skykitProvisioning").factory("VersionsService",["Restangular",function(e){return new(function(){function t(){_classCallCheck2(this,t)}return _createClass2(t,[{key:"getVersions",value:function(){var t=e.oneUrl("versions").get();return t}}]),t}())}]),function(){var e=angular.module("skykitProvisioning");e.controller("TenantAddCtrl",["$log","$location","TenantsService","DistributorsService","TimezonesService","$state","sweet","ProgressBarService","SessionsService",function(e,t,n,r,i,a,o,s,c){var l=this;return l.gameStopServer=t.host().indexOf("provisioning-gamestop")>-1,l.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,proof_of_play_url:void 0,active:!0},l.selectedDomain=void 0,l.distributorDomains=[],l.timezones=[],l.selectedTimezone="America/Chicago",l.initialize=function(){var e=i.getCustomTimezones();e.then(function(e){return l.timezones=e}),l.currentDistributorKey=c.getCurrentDistributorKey();var t=r.getByKey(l.currentDistributorKey);t.then(function(e){return l.currentTenant.content_manager_base_url=e.content_manager_url,l.currentTenant.content_server_url=e.player_content_url});var n=r.getDomainsByKey(l.currentDistributorKey);return n.then(function(e){return l.distributorDomains=e})},l.onClickSaveButton=function(){s.start(),l.currentTenant.default_timezone=l.selectedTimezone,l.currentTenant.domain_key=l.selectedDomain.key;var e=n.save(l.currentTenant);return e.then(l.onSuccessTenantSave,l.onFailureTenantSave)},l.onSuccessTenantSave=function(){return s.complete(),a.go("tenants")},l.onFailureTenantSave=function(t){return s.complete(),409===t.status?o.show("Oops...","Tenant code unavailable. Please modify tenant name to generate a unique tenant code.","error"):(e.error(t),o.show("Oops...","Unable to save the tenant.","error"))},l.autoGenerateTenantCode=function(){if(!l.currentTenant.key){var e="";return l.currentTenant.name&&(e=l.currentTenant.name.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),l.currentTenant.tenant_code=e}},l}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantAddCtrl",["$log","$location","TenantsService","DistributorsService","TimezonesService","$state","sweet","ProgressBarService","SessionsService",function(e,t,n,r,i,a,o,s,c){var l=this;return l.gameStopServer=t.host().indexOf("provisioning-gamestop")>-1,l.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,proof_of_play_url:void 0,active:!0},l.selectedDomain=void 0,l.distributorDomains=[],l.timezones=[],l.selectedTimezone="America/Chicago",l.initialize=function(){var e=i.getCustomTimezones();e.then(function(e){return l.timezones=e}),l.currentDistributorKey=c.getCurrentDistributorKey();var t=r.getByKey(l.currentDistributorKey);t.then(function(e){return l.currentTenant.content_manager_base_url=e.content_manager_url,l.currentTenant.content_server_url=e.player_content_url});var n=r.getDomainsByKey(l.currentDistributorKey);return n.then(function(e){return l.distributorDomains=e})},l.onClickSaveButton=function(){s.start(),l.currentTenant.default_timezone=l.selectedTimezone,l.currentTenant.domain_key=l.selectedDomain.key;var e=n.save(l.currentTenant);return e.then(l.onSuccessTenantSave,l.onFailureTenantSave)},l.onSuccessTenantSave=function(){return s.complete(),a.go("tenants")},l.onFailureTenantSave=function(t){return s.complete(),409===t.status?o.show("Oops...","Tenant code unavailable. Please modify tenant name to generate a unique tenant code.","error"):(e.error(t),o.show("Oops...","Unable to save the tenant.","error"))},l.autoGenerateTenantCode=function(){if(!l.currentTenant.key){var e="";return l.currentTenant.name&&(e=l.currentTenant.name.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),l.currentTenant.tenant_code=e}},l}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantDetailsCtrl",["$stateParams","TenantsService","DomainsService","TimezonesService","DistributorsService","$state","sweet","ProgressBarService","ToastsService","SessionsService","$scope","$location",function(e,t,n,r,i,a,o,s,c,l,d,u){var m=this;if(m.gameStopServer=u.host().indexOf("provisioning-gamestop")>-1,m.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,proof_of_play_url:void 0,active:!0},m.selectedDomain=void 0,m.distributorDomains=[],m.timezones=[],m.selectedTimezone="America/Chicago",m.editMode=!!e.tenantKey,m.editMode){var v=t.getTenantByKey(e.tenantKey);v.then(function(e){return m.currentTenant=e,m.onSuccessResolvingTenant(e)})}return m.initialize=function(){var e=r.getCustomTimezones();e.then(function(e){return m.timezones=e}),m.currentDistributorKey=l.getCurrentDistributorKey();var t=i.getDomainsByKey(m.currentDistributorKey);return t.then(function(e){return m.distributorDomains=e})},m.onSuccessResolvingTenant=function(e){m.selectedTimezone=e.default_timezone;var t=n.getDomainByKey(e.domain_key);return t.then(function(e){return m.selectedDomain=e})},m.onClickSaveButton=function(){s.start(),m.currentTenant.default_timezone=m.selectedTimezone,m.currentTenant.domain_key=m.selectedDomain.key;var e=t.save(m.currentTenant);return e.then(m.onSuccessTenantSave,m.onFailureTenantSave)},m.onSuccessTenantSave=function(){return s.complete(),c.showSuccessToast("We saved your tenant information.")},m.onFailureTenantSave=function(e){return s.complete(),409===e.status?o.show("Oops...","Tenant code unavailable. Please modify tenant name to generate a unique tenant code.","error"):o.show("Oops...","Unable to save the tenant.","error")},m.editItem=function(t){return a.go("editDevice",{deviceKey:t.key,tenantKey:e.tenantKey})},m.autoGenerateTenantCode=function(){if(!m.currentTenant.key){var e="";return m.currentTenant.name&&(e=m.currentTenant.name.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),m.currentTenant.tenant_code=e}},d.tabIndex=0,d.$watch("tabIndex",function(t){if(void 0!==t)switch(t){case 0:return a.go("tenantDetails",{tenantKey:e.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:e.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:e.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:e.tenantKey})}}),m}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantDetailsCtrl",["$stateParams","TenantsService","DomainsService","TimezonesService","DistributorsService","$state","sweet","ProgressBarService","ToastsService","SessionsService","$scope","$location",function(e,t,n,r,i,a,o,s,c,l,d,u){var m=this;if(m.gameStopServer=u.host().indexOf("provisioning-gamestop")>-1,m.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,proof_of_play_url:void 0,active:!0},m.selectedDomain=void 0,m.distributorDomains=[],m.timezones=[],m.selectedTimezone="America/Chicago",m.editMode=!!e.tenantKey,m.editMode){var v=t.getTenantByKey(e.tenantKey);v.then(function(e){return m.currentTenant=e,m.onSuccessResolvingTenant(e)})}return m.initialize=function(){var e=r.getCustomTimezones();e.then(function(e){return m.timezones=e}),m.currentDistributorKey=l.getCurrentDistributorKey();var t=i.getDomainsByKey(m.currentDistributorKey);return t.then(function(e){return m.distributorDomains=e})},m.onSuccessResolvingTenant=function(e){m.selectedTimezone=e.default_timezone;var t=n.getDomainByKey(e.domain_key);return t.then(function(e){return m.selectedDomain=e})},m.onClickSaveButton=function(){s.start(),m.currentTenant.default_timezone=m.selectedTimezone,m.currentTenant.domain_key=m.selectedDomain.key;var e=t.save(m.currentTenant);return e.then(m.onSuccessTenantSave,m.onFailureTenantSave)},m.onSuccessTenantSave=function(){return s.complete(),c.showSuccessToast("We saved your tenant information.")},m.onFailureTenantSave=function(e){return s.complete(),409===e.status?o.show("Oops...","Tenant code unavailable. Please modify tenant name to generate a unique tenant code.","error"):o.show("Oops...","Unable to save the tenant.","error")},m.editItem=function(t){return a.go("editDevice",{deviceKey:t.key,tenantKey:e.tenantKey})},m.autoGenerateTenantCode=function(){if(!m.currentTenant.key){var e="";return m.currentTenant.name&&(e=m.currentTenant.name.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),m.currentTenant.tenant_code=e}},d.tabIndex=0,d.$watch("tabIndex",function(t){if(void 0!==t)switch(t){case 0:return a.go("tenantDetails",{tenantKey:e.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:e.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:e.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:e.tenantKey})}}),m}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantLocationCtrl",["$stateParams","TenantsService","LocationsService","$state","sweet","ProgressBarService","ToastsService",function(e,t,n,r,i,a,o){var s=this;if(s.location={key:void 0},s.tenantKey=e.tenantKey,s.editMode=!!e.locationKey,s.editMode){var c=n.getLocationByKey(e.locationKey);c.then(function(e){return s.location=e,s.tenantKey=e.tenantKey,s.locationName=e.customerLocationName,s.fetchTenantName(s.tenantKey)})}return s.initialize=function(){return s.editMode?void 0:(s.fetchTenantName(s.tenantKey),s.location={tenantKey:s.tenantKey,active:!0})},s.onClickSaveButton=function(){a.start();var e=n.save(s.location);return s.editMode?e.then(s.onSuccessUpdatingLocation(s.tenantKey),s.onFailureSavingLocation):e.then(s.onSuccessSavingLocation,s.onFailureSavingLocation)},s.onSuccessSavingLocation=function(){return a.complete(),o.showSuccessToast("We saved your location."),setTimeout(function(){r.go("tenantLocations",{tenantKey:e.tenantKey})},1e3)},s.onSuccessUpdatingLocation=function(e){return a.complete(),o.showSuccessToast("We updated your location."),setTimeout(function(){r.go("tenantLocations",{tenantKey:e})},1e3)},s.onFailureSavingLocation=function(e){return a.complete(),409===e.status?(o.showErrorToast("Location code conflict. Unable to save your location."),i.show("Oops...","Please change your customer location name. Location name must generate a unique location code.","error")):o.showErrorToast("Unable to save your location.")},s.fetchTenantName=function(e){var n=t.getTenantByKey(e);return n.then(function(e){return s.tenantName=e.name})},s.autoGenerateCustomerLocationCode=function(){if(!s.location.key){var e="";return s.location.customerLocationName&&(e=s.location.customerLocationName.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),s.location.customerLocationCode=e}},s}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantLocationCtrl",["$stateParams","TenantsService","LocationsService","$state","sweet","ProgressBarService","ToastsService",function(e,t,n,r,i,a,o){var s=this;if(s.location={key:void 0},s.tenantKey=e.tenantKey,s.editMode=!!e.locationKey,s.editMode){var c=n.getLocationByKey(e.locationKey);c.then(function(e){return s.location=e,s.tenantKey=e.tenantKey,s.locationName=e.customerLocationName,s.fetchTenantName(s.tenantKey)})}return s.initialize=function(){return s.editMode?void 0:(s.fetchTenantName(s.tenantKey),s.location={tenantKey:s.tenantKey,active:!0})},s.onClickSaveButton=function(){a.start();var e=n.save(s.location);return s.editMode?e.then(s.onSuccessUpdatingLocation(s.tenantKey),s.onFailureSavingLocation):e.then(s.onSuccessSavingLocation,s.onFailureSavingLocation)},s.onSuccessSavingLocation=function(){return a.complete(),o.showSuccessToast("We saved your location."),setTimeout(function(){r.go("tenantLocations",{tenantKey:e.tenantKey})},1e3)},s.onSuccessUpdatingLocation=function(e){return a.complete(),o.showSuccessToast("We updated your location."),setTimeout(function(){r.go("tenantLocations",{tenantKey:e})},1e3)},s.onFailureSavingLocation=function(e){return a.complete(),409===e.status?(o.showErrorToast("Location code conflict. Unable to save your location."),i.show("Oops...","Please change your customer location name. Location name must generate a unique location code.","error")):o.showErrorToast("Unable to save your location.")},s.fetchTenantName=function(e){var n=t.getTenantByKey(e);return n.then(function(e){return s.tenantName=e.name})},s.autoGenerateCustomerLocationCode=function(){if(!s.location.key){var e="";return s.location.customerLocationName&&(e=s.location.customerLocationName.toLowerCase(),e=e.replace(/\s+/g,"_"),e=e.replace(/\W+/g,"")),s.location.customerLocationCode=e}},s}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantLocationsCtrl",["$scope","$stateParams","TenantsService","LocationsService","$state","ProgressBarService",function(e,t,n,r,i,a){var o=this,s=t.tenantKey;return o.currentTenant=void 0,e.tabIndex=3,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return i.go("tenantDetails",{tenantKey:s});case 1:return i.go("tenantManagedDevices",{tenantKey:s});case 2:return i.go("tenantUnmanagedDevices",{tenantKey:s});case 3:return i.go("tenantLocations",{tenantKey:s})}}),o.getLocations=function(e,t,n){a.start();var i=r.getLocationsByTenantKeyPaginated(e,t,n);return i.then(function(e){return o.locations=e.locations,o.next_cursor=e.next_cursor,o.prev_cursor=e.prev_cursor,a.complete()})},o.paginateCall=function(e){return e?o.getLocations(s,null,o.next_cursor):o.getLocations(s,o.prev_cursor,null)},o.initialize=function(){o.locations=[];var e=n.getTenantByKey(s);return e.then(function(e){return o.currentTenant=e}),o.getLocations(s)},o.editItem=function(e){return i.go("editLocation",{locationKey:e.key})},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantLocationsCtrl",["$scope","$stateParams","TenantsService","LocationsService","$state","ProgressBarService",function(e,t,n,r,i,a){var o=this,s=t.tenantKey;return o.currentTenant=void 0,e.tabIndex=3,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return i.go("tenantDetails",{tenantKey:s});case 1:return i.go("tenantManagedDevices",{tenantKey:s});case 2:return i.go("tenantUnmanagedDevices",{tenantKey:s});case 3:return i.go("tenantLocations",{tenantKey:s})}}),o.getLocations=function(e,t,n){a.start();var i=r.getLocationsByTenantKeyPaginated(e,t,n);return i.then(function(e){return o.locations=e.locations,o.next_cursor=e.next_cursor,o.prev_cursor=e.prev_cursor,a.complete()})},o.paginateCall=function(e){return e?o.getLocations(s,null,o.next_cursor):o.getLocations(s,o.prev_cursor,null)},o.initialize=function(){o.locations=[];var e=n.getTenantByKey(s);return e.then(function(e){return o.currentTenant=e}),o.getLocations(s)},o.editItem=function(e){return i.go("editLocation",{locationKey:e.key})},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantManagedDevicesCtrl",["$scope","$stateParams","TenantsService","DevicesService","ProgressBarService","$state",function(e,t,n,r,i,a){var o=this;if(o.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,active:!0},o.tenantDevices=[],o.devicesPrev=null,o.devicesNext=null,o.selectedButton="Serial Number",o.serialDevices={},o.disabled=!0,o.macDevices={},o.editMode=!!t.tenantKey,o.tenantKey=t.tenantKey,o.getManagedDevices=function(e,t,n){i.start();var a=r.getDevicesByTenant(e,t,n);return a.then(function(e){return o.devicesPrev=e.prev_cursor,o.devicesNext=e.next_cursor,o.tenantDevices=e.devices,i.complete()})},o.refreshDevices=function(){return o.devicesPrev=null,o.devicesNext=null,o.tenantDevices=null,r.deviceByTenantCache.removeAll(),o.getManagedDevices(o.tenantKey,o.devicesPrev,o.devicesNext)},o.editMode){var s=n.getTenantByKey(o.tenantKey);s.then(function(e){return o.currentTenant=e}),o.getManagedDevices(o.tenantKey,null,null)}return e.tabIndex=1,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return a.go("tenantDetails",{tenantKey:o.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:o.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:o.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:o.tenantKey})}}),o.editItem=function(e){return a.go("editDevice",{deviceKey:e.key,tenantKey:o.tenantKey,fromDevices:!1})},o.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},o.changeRadio=function(){return o.searchText="",o.disabled=!0,o.serialDevices={},o.macDevices={}},o.searchDevices=function(e){return e&&e.length>2?"Serial Number"===o.selectedButton?r.searchDevicesByPartialSerialByTenant(o.tenantKey,e,!1).then(function(e){var t=e.serial_number_matches;o.serialDevices=o.convertArrayToDictionary(t,!1);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.serial)}return n}):r.searchDevicesByPartialMacByTenant(o.tenantKey,e,!1).then(function(e){var t=e.mac_matches;o.macDevices=o.convertArrayToDictionary(t,!0);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.mac)}return n}):[]},o.paginateCall=function(e){return e?o.getManagedDevices(o.tenantKey,null,o.devicesNext):o.getManagedDevices(o.tenantKey,o.devicesPrev,null)},o.prepareForEditView=function(e){var t="MAC"===o.selectedButton;return o.editItem(t?o.macDevices[e]:o.serialDevices[e])},o.controlOpenButton=function(e){return o.disabled=!e,o.loadingDisabled=!1},o.isResourceValid=function(e){if(e){if(e.length>2){var t="MAC"===o.selectedButton;return o.loadingDisabled=!0,t?r.matchDevicesByFullMacByTenant(o.tenantKey,e,!1).then(function(e){return o.controlOpenButton(e.is_match)}):r.matchDevicesByFullSerialByTenant(o.tenantKey,e,!1).then(function(e){return o.controlOpenButton(e.is_match)})}return o.controlOpenButton(!1)}return o.controlOpenButton(!1)},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantManagedDevicesCtrl",["$scope","$stateParams","TenantsService","DevicesService","ProgressBarService","$state",function(e,t,n,r,i,a){var o=this;if(o.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,active:!0},o.tenantDevices=[],o.devicesPrev=null,o.devicesNext=null,o.selectedButton="Serial Number",o.serialDevices={},o.disabled=!0,o.macDevices={},o.editMode=!!t.tenantKey,o.tenantKey=t.tenantKey,o.getManagedDevices=function(e,t,n){i.start();var a=r.getDevicesByTenant(e,t,n);return a.then(function(e){return o.devicesPrev=e.prev_cursor,o.devicesNext=e.next_cursor,o.tenantDevices=e.devices,i.complete()})},o.refreshDevices=function(){return o.devicesPrev=null,o.devicesNext=null,o.tenantDevices=null,r.deviceByTenantCache.removeAll(),o.getManagedDevices(o.tenantKey,o.devicesPrev,o.devicesNext)},o.editMode){var s=n.getTenantByKey(o.tenantKey);s.then(function(e){return o.currentTenant=e}),o.getManagedDevices(o.tenantKey,null,null)}return e.tabIndex=1,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return a.go("tenantDetails",{tenantKey:o.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:o.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:o.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:o.tenantKey})}}),o.editItem=function(e){return a.go("editDevice",{deviceKey:e.key,tenantKey:o.tenantKey,fromDevices:!1})},o.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},o.changeRadio=function(){return o.searchText="",o.disabled=!0,o.serialDevices={},o.macDevices={}},o.searchDevices=function(e){return e&&e.length>2?"Serial Number"===o.selectedButton?r.searchDevicesByPartialSerialByTenant(o.tenantKey,e,!1).then(function(e){var t=e.serial_number_matches;o.serialDevices=o.convertArrayToDictionary(t,!1);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.serial)}return n}):r.searchDevicesByPartialMacByTenant(o.tenantKey,e,!1).then(function(e){var t=e.mac_matches;o.macDevices=o.convertArrayToDictionary(t,!0);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.mac)}return n}):[]},o.paginateCall=function(e){return e?o.getManagedDevices(o.tenantKey,null,o.devicesNext):o.getManagedDevices(o.tenantKey,o.devicesPrev,null)},o.prepareForEditView=function(e){var t="MAC"===o.selectedButton;return o.editItem(t?o.macDevices[e]:o.serialDevices[e])},o.controlOpenButton=function(e){return o.disabled=!e,o.loadingDisabled=!1},o.isResourceValid=function(e){if(e){if(e.length>2){var t="MAC"===o.selectedButton;return o.loadingDisabled=!0,t?r.matchDevicesByFullMacByTenant(o.tenantKey,e,!1).then(function(e){return o.controlOpenButton(e.is_match)}):r.matchDevicesByFullSerialByTenant(o.tenantKey,e,!1).then(function(e){return o.controlOpenButton(e.is_match)})}return o.controlOpenButton(!1)}return o.controlOpenButton(!1)},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantUnmanagedDevicesCtrl",["$scope","$stateParams","TenantsService","DevicesService","ProgressBarService","$state",function(e,t,n,r,i,a){var o=this;if(o.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,active:!0},o.tenantDevices=[],o.devicesPrev=null,o.devicesNext=null,o.selectedButton="MAC",o.serialDevices={},o.disabled=!0,o.macDevices={},o.editMode=!!t.tenantKey,o.tenantKey=t.tenantKey,o.getUnmanagedDevices=function(e,t,n){i.start();var a=r.getUnmanagedDevicesByTenant(e,t,n);return a.then(function(e){return o.devicesPrev=e.prev_cursor,o.devicesNext=e.next_cursor,o.tenantDevices=e.devices,i.complete()})},o.refreshDevices=function(){return o.devicesPrev=null,o.devicesNext=null,o.tenantDevices=null,r.deviceByTenantCache.removeAll(),o.getUnmanagedDevices(o.tenantKey,o.devicesPrev,o.devicesNext)},o.editMode){var s=n.getTenantByKey(o.tenantKey);s.then(function(e){return o.currentTenant=e}),o.getUnmanagedDevices(o.tenantKey,null,null)}return e.tabIndex=2,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return a.go("tenantDetails",{tenantKey:o.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:o.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:o.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:o.tenantKey})}}),o.editItem=function(e){return a.go("editDevice",{deviceKey:e.key,tenantKey:o.tenantKey,fromDevices:!1})},o.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},o.changeRadio=function(){return o.searchText="",o.disabled=!0,o.serialDevices={},o.macDevices={}},o.searchDevices=function(e){return e&&e.length>2?"Serial Number"===o.selectedButton?r.searchDevicesByPartialSerialByTenant(o.tenantKey,e,!0).then(function(e){var t=e.serial_number_matches;o.serialDevices=o.convertArrayToDictionary(t,!1);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.serial)}return n}):r.searchDevicesByPartialMacByTenant(o.tenantKey,e,!0).then(function(e){var t=e.mac_matches;o.macDevices=o.convertArrayToDictionary(t,!0);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.mac)}return n}):[]},o.paginateCall=function(e){return e?o.getUnmanagedDevices(o.tenantKey,null,o.devicesNext):o.getUnmanagedDevices(o.tenantKey,o.devicesPrev,null)},o.prepareForEditView=function(e){var t="MAC"===o.selectedButton;return o.editItem(t?o.macDevices[e]:o.serialDevices[e])},o.controlOpenButton=function(e){return o.disabled=!e,o.loadingDisabled=!1},o.isResourceValid=function(e){if(e){if(e.length>2){var t="MAC"===o.selectedButton;return o.loadingDisabled=!0,t?r.matchDevicesByFullMacByTenant(o.tenantKey,e,!0).then(function(e){return o.controlOpenButton(e.is_match)}):r.matchDevicesByFullSerialByTenant(o.tenantKey,e,!0).then(function(e){return o.controlOpenButton(e.is_match)})}return o.controlOpenButton(!1)}return o.controlOpenButton(!1)},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantUnmanagedDevicesCtrl",["$scope","$stateParams","TenantsService","DevicesService","ProgressBarService","$state",function(e,t,n,r,i,a){var o=this;if(o.currentTenant={key:void 0,name:void 0,tenant_code:void 0,admin_email:void 0,content_server_url:void 0,content_manager_base_url:void 0,domain_key:void 0,notification_emails:void 0,proof_of_play_logging:!1,active:!0},o.tenantDevices=[],o.devicesPrev=null,o.devicesNext=null,o.selectedButton="MAC",o.serialDevices={},o.disabled=!0,o.macDevices={},o.editMode=!!t.tenantKey,o.tenantKey=t.tenantKey,o.getUnmanagedDevices=function(e,t,n){i.start();var a=r.getUnmanagedDevicesByTenant(e,t,n);return a.then(function(e){return o.devicesPrev=e.prev_cursor,o.devicesNext=e.next_cursor,o.tenantDevices=e.devices,i.complete()})},o.refreshDevices=function(){return o.devicesPrev=null,o.devicesNext=null,o.tenantDevices=null,r.deviceByTenantCache.removeAll(),o.getUnmanagedDevices(o.tenantKey,o.devicesPrev,o.devicesNext)},o.editMode){var s=n.getTenantByKey(o.tenantKey);s.then(function(e){return o.currentTenant=e}),o.getUnmanagedDevices(o.tenantKey,null,null)}return e.tabIndex=2,e.$watch("tabIndex",function(e){if(void 0!==e)switch(e){case 0:return a.go("tenantDetails",{tenantKey:o.tenantKey});case 1:return a.go("tenantManagedDevices",{tenantKey:o.tenantKey});case 2:return a.go("tenantUnmanagedDevices",{tenantKey:o.tenantKey});case 3:return a.go("tenantLocations",{tenantKey:o.tenantKey})}}),o.editItem=function(e){return a.go("editDevice",{deviceKey:e.key,tenantKey:o.tenantKey,fromDevices:!1})},o.convertArrayToDictionary=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];t?n[i.mac]=i:n[i.serial]=i}return n},o.changeRadio=function(){return o.searchText="",o.disabled=!0,o.serialDevices={},o.macDevices={}},o.searchDevices=function(e){return e&&e.length>2?"Serial Number"===o.selectedButton?r.searchDevicesByPartialSerialByTenant(o.tenantKey,e,!0).then(function(e){var t=e.serial_number_matches;o.serialDevices=o.convertArrayToDictionary(t,!1);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.serial)}return n}):r.searchDevicesByPartialMacByTenant(o.tenantKey,e,!0).then(function(e){var t=e.mac_matches;o.macDevices=o.convertArrayToDictionary(t,!0);for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.mac)}return n}):[]},o.paginateCall=function(e){return e?o.getUnmanagedDevices(o.tenantKey,null,o.devicesNext):o.getUnmanagedDevices(o.tenantKey,o.devicesPrev,null)},o.prepareForEditView=function(e){var t="MAC"===o.selectedButton;return o.editItem(t?o.macDevices[e]:o.serialDevices[e])},o.controlOpenButton=function(e){return o.disabled=!e,o.loadingDisabled=!1},o.isResourceValid=function(e){if(e){if(e.length>2){var t="MAC"===o.selectedButton;return o.loadingDisabled=!0,t?r.matchDevicesByFullMacByTenant(o.tenantKey,e,!0).then(function(e){return o.controlOpenButton(e.is_match)}):r.matchDevicesByFullSerialByTenant(o.tenantKey,e,!0).then(function(e){return o.controlOpenButton(e.is_match)})}return o.controlOpenButton(!1)
}return o.controlOpenButton(!1)},o}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantsCtrl",["$state","$log","TenantsService","ProgressBarService","sweet",function(e,t,n,r,i){var a=this;return a.tenants=[],a.getTenants=function(e,t){a.offset=t,a.loading=!0,r.start();var i=n.fetchAllTenantsPaginated(e,t);return i.then(function(e){return a.getFetchSuccess(e)},function(e){return a.getFetchFailure(e)})},a.initialize=function(){return a.offset=0,a.getTenants(100,a.offset)},a.getFetchSuccess=function(e){return a.tenants=e.tenants,a.total=e.total,a.is_first_page=e.is_first_page,a.is_last_page=e.is_last_page,r.complete(),a.loading=!1},a.getFetchFailure=function(e){r.complete();var t="Unable to fetch tenants. Error: "+e.status+" "+e.statusText+".";return i.show("Oops...",t,"error")},a.editItem=function(t){return e.go("tenantDetails",{tenantKey:t.key})},a.deleteItem=function(e){var t=function(){var t=n["delete"](e);return t.then(function(){return a.initialize()})};return i.show({title:"Are you sure?",text:"This will permanently remove the tenant from the system.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the tenant!",closeOnConfirm:!0},t)},a}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("TenantsCtrl",["$state","$log","TenantsService","ProgressBarService","sweet",function(e,t,n,r,i){var a=this;return a.tenants=[],a.getTenants=function(e,t){a.offset=t,a.loading=!0,r.start();var i=n.fetchAllTenantsPaginated(e,t);return i.then(function(e){return a.getFetchSuccess(e)},function(e){return a.getFetchFailure(e)})},a.initialize=function(){return a.offset=0,a.getTenants(100,a.offset)},a.getFetchSuccess=function(e){return a.tenants=e.tenants,a.total=e.total,a.is_first_page=e.is_first_page,a.is_last_page=e.is_last_page,r.complete(),a.loading=!1},a.getFetchFailure=function(e){r.complete();var t="Unable to fetch tenants. Error: "+e.status+" "+e.statusText+".";return i.show("Oops...",t,"error")},a.editItem=function(t){return e.go("tenantDetails",{tenantKey:t.key})},a.deleteItem=function(e){var t=function(){var t=n["delete"](e);return t.then(function(){return a.initialize()})};return i.show({title:"Are you sure?",text:"This will permanently remove the tenant from the system.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the tenant!",closeOnConfirm:!0},t)},a}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("WelcomeCtrl",["VersionsService","$state","DistributorsService","SessionsService",function(e,t,n,r){var i=this;return i.version_data=[],i.loading=!0,i.proceedToSignIn=function(){return t.go("sign_in")},i.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},i.giveOptionToChangeDistributor=function(){var e=n.fetchAllByUser(r.getUserKey());return e.then(function(e){return i.has_multiple_distributors=e.length>1,i.loading=!1})},i.changeDistributor=function(){return t.go("distributor_selection")},i.getVersion=function(){var t=e.getVersions();return t.then(function(e){return i.version_data=e})},i.initialize=function(){return i.identity={key:r.getUserKey(),email:r.getUserEmail(),distributorKey:r.getCurrentDistributorKey(),distributorName:r.getCurrentDistributorName()},i.giveOptionToChangeDistributor(),i.identity.email?i.getVersion():t.go("sign_in")},i}])}(),function(){var e=angular.module("skykitProvisioning");e.controller("WelcomeCtrl",["VersionsService","$state","DistributorsService","SessionsService",function(e,t,n,r){var i=this;return i.version_data=[],i.loading=!0,i.proceedToSignIn=function(){return t.go("sign_in")},i.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},i.giveOptionToChangeDistributor=function(){var e=n.fetchAllByUser(r.getUserKey());return e.then(function(e){return i.has_multiple_distributors=e.length>1,i.loading=!1})},i.changeDistributor=function(){return t.go("distributor_selection")},i.getVersion=function(){var t=e.getVersions();return t.then(function(e){return i.version_data=e})},i.initialize=function(){return i.identity={key:r.getUserKey(),email:r.getUserEmail(),distributorKey:r.getCurrentDistributorKey(),distributorName:r.getCurrentDistributorName()},i.giveOptionToChangeDistributor(),i.identity.email?i.getVersion():t.go("sign_in")},i}])}(),angular.module("skykitProvisioning").run(["$templateCache",function(e){e.put("app/admin/admin.html",'<div ng-init="vm.initialize()"><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-lock ng-scope"></i> Admin</h2></div></md-toolbar><md-content><div flex="100" flex-sm="100" flex-xs="100"><div ng-if="!vm.isAdmin" ng-include="\'webapp/src/app/admin/create-user.html\'"></div><md-tabs md-dynamic-height="" md-border-bottom="" ng-if="vm.isAdmin"><div class="container"><md-tab label="Create User"><div ng-include="\'webapp/src/app/admin/create-user.html\'"></div></md-tab><md-tab label="Create Distributor" layout-align="center center" ng-if="vm.isAdmin"><div ng-include="\'webapp/src/app/admin/create-distributor.html\'"></div></md-tab></div></md-tabs></div></md-content></div>'),e.put("app/admin/create-distributor.html",'<div class="admin-container"><div flex-xs="" flex-gt-xs="30"><md-card><md-card-title><md-card-title-text><span class="md-headline">Create Distributor</span></md-card-title-text></md-card-title><md-card-content><form name="distributorForm" ng-submit="vm.makeDistributor($event, vm.distributor.name, vm.distributor.adminEmail, distributorForm)" novalidate=""><md-input-container class="md-block"><label>Admin Email</label> <input ng-model="vm.distributor.adminEmail" type="email" required=""></md-input-container><md-input-container class="md-block"><label>Name</label> <input ng-model="vm.distributor.name" type="text" ng-minlength="3" required=""></md-input-container><md-card-actions layout="row" layout-align="end center"><md-button class="md-raised" type="submit" ng-disabled="distributorForm.$pristine || distributorForm.$invalid">Submit</md-button></md-card-actions></form></md-card-content></md-card></div><div flex-xs="" flex-gt-xs="30"><md-card><md-card-title><md-card-title-text><span class="md-headline">All Distributors</span><p>Click to switch to another Distributor.</p></md-card-title-text></md-card-title><md-card-content><md-list ng-if="!vm.loadingAllDistributors"><md-list-item ng-repeat="item in vm.allDistributors | orderBy:\'item\' track by $index">{{$index + 1}}.<md-button class="md-raised" ng-click="vm.switchDistributor(item)"><p>{{ item.name }}</p></md-button></md-list-item></md-list><h5 ng-if="vm.loadingAllDistributors">Loading...</h5></md-card-content></md-card></div></div>'),e.put("app/admin/create-user.html",'<div class="admin-container"><div flex-xs="" flex-gt-xs="30"><md-card><md-card-title><md-card-title-text><span class="md-headline">Create User</span></md-card-title-text></md-card-title><md-card-content><form name="userForm" ng-submit="vm.addUserToDistributor($event, vm.user.email, vm.user.cb1, vm.user.distributor, userForm)" novalidate=""><md-input-container class="md-block"><label>Email</label> <input ng-model="vm.user.email" type="email" required=""></md-input-container><md-input-container><md-checkbox ng-model="vm.user.cb1" aria-label="Distributor Admin">Distributor Admin</md-checkbox></md-input-container><md-input-container class="md-block"><div ng-if="vm.isAdmin && vm.allDistributors.length > 1"><md-select ng-model="vm.user.distributor" required="" aria-label="distribuor select"><label>Distributer</label><md-option ng-repeat="distributor in vm.allDistributors" value="{{distributor.name}}">{{distributor.name}}</md-option></md-select></div><div ng-if="!vm.isAdmin && vm.distributorsAsAdmin.length > 1"><md-select ng-model="vm.user.distributor" required="" aria-label="distribuor select"><label>Distributer</label><md-option ng-repeat="distributor in vm.distributorsAsAdmin" value="{{distributor.name}}">{{distributor.name}}</md-option></md-select></div></md-input-container><md-card-actions layout="row" layout-align="end center"><md-button class="md-raised" type="submit" ng-disabled="userForm.$pristine || userForm.$invalid">Submit</md-button></md-card-actions></form></md-card-content></md-card></div><div flex-xs="" flex-gt-xs="30"><md-card><md-card-title><md-card-title-text><span class="md-headline">{{vm.currentDistributorName}} Users</span></md-card-title-text></md-card-title><md-card-content><md-list ng-if="!vm.loadingUsersOfDistributor"><md-list-item ng-repeat="item in vm.usersOfDistributor | orderBy:\'item\' track by $index"><p>{{$index + 1}}. {{ item.email }}</p></md-list-item></md-list><h5 ng-if="vm.loadingUsersOfDistributor">Loading...</h5><h5 ng-if="!vm.loadingUsersOfDistributor && vm.usersOfDistributor.length < 1">Sorry, you have no users.</h5></md-card-content></md-card></div></div>'),e.put("app/authentication/sign_in.html",'<div id="page-wrapper" ng-init="authenticationCtrl.initializeSignIn()"><div class="container-fluid"><div class="row"><div class="col-lg-12"><h1 class="page-header">Sign into Skykit Provisioning</h1></div></div><div class="row"><div class="col-lg-12"><google-plus-signin ng-click="authenticationCtrl.onClickGooglePlusSignIn()" clientid="{{ authenticationCtrl.clientId }}" state="{{ authenticationCtrl.state }}" language="en"></google-plus-signin></div></div></div></div>'),e.put("app/authentication/sign_out.html",'<div id="page-wrapper" ng-init="authenticationCtrl.initializeSignOut()"><div class="container-fluid"><div class="row"><div class="col-lg-12"><h1 class="page-header">Signing out of Skykit Provisioning</h1></div></div><div class="row"><div class="col-lg-12"></div></div></div></div>'),e.put("app/authentication/signed_out.html",'<div id="page-wrapper" ng-init="authenticationCtrl.initializeSignOut()"><div class="container-fluid"><div class="row"><div class="col-lg-12"><h1 class="page-header">Signed out</h1></div></div><div class="row"><div class="col-lg-12"><md-button class="md-raised md-button" ng-click="authenticationCtrl.proceedToSignIn()">Sign In</md-button></div></div></div></div>'),e.put("app/distributor/distributor_selector.html",'<div ng-init="vm.initialize()" layout="column" ng-cloak=""><md-content flex="" layout-padding=""><div layout="row" layout-sm="column" layout-align="space-around" ng-show="vm.loading"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div flex="35" flex-sm="35" flex-xs="35" layout="column"><md-card><div ng-if="!vm.loading && (vm.distributors.length < 1 || vm.distributors.length > 1)"><md-card-title><md-card-title-text><span class="md-headline">Distributor</span></md-card-title-text></md-card-title><md-card-content><div class="container-fluid"><div class="row"><div class="col-lg-12"><div ng-show="vm.distributors.length < 1"><div class="alert alert-warning" role="alert"><strong>Your account is not associated with a distributor.</strong><br><br>Try signing out, and then back in. If you continue to see this message, please contact Skykit support at <a class="md-primary md-ink-ripple" href="mailto:support@skykit.com?subject=Distributor Setup for Account">support@skykit.com</a> for distributor setup.</div><md-button class="md-raised" ng-href="#/sign_out">Log Out</md-button></div><div ng-show="vm.distributors.length > 1"><md-radio-group class="ng-valid ng-dirty ng-valid-parse ng-touched" role="radiogroup" tabindex="0" aria-invalid="false" style="" ng-repeat="distributor in vm.distributors"><md-radio-button value="{{ distributor.name }}" class="md-primary md-checked distributor-selection" role="radio" aria-label="{{ distributor.name }}" ng-click="vm.selectDistributor(distributor);">{{ distributor.name }}</md-radio-button></md-radio-group></div></div></div></div></md-card-content></div></md-card></div></md-content></div>'),e.put("app/distributor/distributors.html",'<div id="wrapper" ng-init="tenantsCtrl.initialize()"><div id="page-wrapper"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div ncy-breadcrumb=""></div><h1 class="page-header">Distributors</h1></div></div><div class="row"><div class="col-lg-12"></div></div></div></div></div>'),e.put("app/device/device-command.html",'<md-content class="md-padding" layout="row" layout-wrap="" layout-align="left start" layout-xs="column"><div flex="35" flex-sm="35" flex-xs="35" layout="column"><md-card><md-card-content><h3>Commands</h3><hr><md-content class="md-padding" layout="row" layout-wrap="" layout-xs="column"><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Reset Content</h5></div><div flex="55"><form name="resetContentForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onResetContent()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Reset Content"><md-tooltip>skykit.com/skdchromeapp/content/delete</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Update Content</h5></div><div flex="55"><form name="updateContentForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onUpdateContent()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Update Content"><md-tooltip>skykit.com/skdchromeapp/update/content</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Reset Player</h5></div><div flex="55"><form name="resetPlayerForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onResetPlayer()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Reset Player"><md-tooltip>skykit.com/skdchromeapp/reset</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Panel On</h5></div><div flex="55"><form name="panelOnForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onPanelOn()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Panel On"><md-tooltip>skykit.com/skdchromeapp/tv/on</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Panel Off</h5></div><div flex="55"><form name="panelOffForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onPanelOff()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Panel Off"><md-tooltip>skykit.com/skdchromeapp/tv/off</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><div layout="row"><div flex="55"><h5 class="md-headline" style="padding-left: 15px">Update Device</h5></div><div flex="55"><form name="updateDeviceForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onUpdateDevice()" novalidate=""><div layout="row"><md-button type="submit"><i class="fa fa-fw fa-building"></i> Send</md-button><md-button class="md-fab md-primary" aria-label="Update Device"><md-tooltip>skykit.com/skdchromeapp/update/provisioning</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex="100"><md-card-title><md-card-title-text><span class="md-headline">Volume</span></md-card-title-text></md-card-title><md-card-content><form name="volumeForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onVolumeChange()" novalidate=""><div layout="row"><div flex="40"><input type="number" class="form-control" name="volume" id="volume" ng-model="deviceDetailsCtrl.currentDevice.volume" min="1" max="100" ngminlength="1" ngmaxlength="3" ng-required="true"></div><div flex="60"><md-button type="submit" ng-disabled="!volumeForm.$dirty || volumeForm.$invalid"><i class="fa fa-fw fa-building"></i> Send</md-button></div></div></form></md-card-content></md-card><md-card flex="100"><md-card-title><md-card-title-text><span class="md-headline">Custom</span></md-card-title-text></md-card-title><md-card-content><form name="customForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onCustomCommand()" novalidate=""><div layout="row"><div flex="70"><input type="text" class="form-control" name="custom" id="custom" ng-model="deviceDetailsCtrl.currentDevice.custom" ng-required="true"></div><div flex="30"><md-button type="submit" ng-disabled="!customForm.$dirty || customForm.$invalid"><i class="fa fa-fw fa-building"></i> Send</md-button></div></div></form></md-card-content></md-card></md-content></md-card-content></md-card></div><div flex="65" flex-sm="65" flex-xs="65" layout="column"><md-card><md-card-content><h3>Command History</h3><hr><div class="row"><div class="col-md-12"><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.event_prev_cursor" ng-click="deviceDetailsCtrl.paginateEventCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.event_next_cursor" ng-click="deviceDetailsCtrl.paginateEventCall(true)">Next</md-button><hr></div><div class="col-lg-12"><table class="table table-responsive table-striped"><thead><tr><th>Command</th><th>Posted (US/Central)</th><th>Confirmed (US/Central)</th><th>Issued by</th><th style="width:1px"></th></tr></thead><tbody><tr ng-hide="deviceDetailsCtrl.commandEvents.length"><td class="text-center text-warning" colspan="4">No commands posted to this player</td></tr><tr ng-repeat="item in deviceDetailsCtrl.commandEvents | orderBy:[\'-postedTime\']"><td class="command-history-command">{{ item.payload }}</td><td>{{ item.postedTime }}</td><td>{{ item.confirmedTime }}</td><td>{{ item.userIdentifier }}</td><td class="up-{{ item.confirmed}}-background"></td></tr></tbody></table></div><div class="col-md-12" ng-if="deviceDetailsCtrl.commandEvents.length > 10"><hr><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.event_prev_cursor" ng-click="deviceDetailsCtrl.paginateEventCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.event_next_cursor" ng-click="deviceDetailsCtrl.paginateEventCall(true)">Next</md-button><hr></div></div></md-card-content></md-card></div></md-content>'),e.put("app/device/device-detail.html",'<div ng-controller="DeviceDetailsCtrl" ng-init="deviceDetailsCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-desktop ng-scope"></i> Devices</h2></div></md-toolbar><md-content flex="" layout-padding=""><div flex="100" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div><md-card><md-card-content><div class="col-sm-5"><div ng-show="deviceDetailsCtrl.currentDevice.macAddress"><h5><i class="fa fa-fw fa-wifi"></i> Wifi Mac Address: {{deviceDetailsCtrl.currentDevice.macAddress}}</h5></div><div ng-show="deviceDetailsCtrl.currentDevice.ethernetMacAddress"><h5><i class="fa fa-fw fa-plug"></i> Ethernet Mac Address: {{deviceDetailsCtrl.currentDevice.ethernetMacAddress }}</h5></div><div ng-show="deviceDetailsCtrl.currentDevice.serialNumber"><h5><i class="fa fa-hashtag"></i> Serial Number: {{deviceDetailsCtrl.currentDevice.serialNumber}}</h5></div></div><div class="col-sm-2 col-sm-offset-4"><md-button ngclipboard="" data-clipboard-target="#hidden-device-key" ng-click="deviceDetailsCtrl.copyDeviceKey()" class="md-raised"><i class="fa fa-fw fa-clipboard"></i> Copy Device key</md-button><a href="{{deviceDetailsCtrl.backUrl}}" class="md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-backward"></i>Back</a></div></md-card-content></md-card><md-tabs md-dynamic-height="" md-border-bottom=""><md-tab label="Properties"><div ng-include="\'webapp/src/app/device/device-properties.html\'"></div></md-tab><md-tab label="Events"><div ng-include="\'webapp/src/app/device/device-event.html\'"></div></md-tab><md-tab label="Commands"><div ng-include="\'webapp/src/app/device/device-command.html\'"></div></md-tab></md-tabs></div></md-content><div id="hidden-device-key" class="copy-ready-device-key">{{deviceDetailsCtrl.currentDevice.key}}</div></div>'),e.put("app/device/device-event.html",'<md-content class="md-padding"><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-card><md-card-content><form name="tenantForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onClickRefreshButton()" novalidate=""><div class="row"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.prev_cursor" ng-click="deviceDetailsCtrl.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.next_cursor" ng-click="deviceDetailsCtrl.paginateCall(true)">Next</md-button></div><div class="col-sm-2 col-sm-offset-3"><b><p>From:</p></b><input type="text" class="form-control input-sm" datetimepicker="" datetimepicker-options="{{deviceDetailsCtrl.pickerOptions}}" placeholder="{{deviceDetailsCtrl.startTime}}" name="startTime" id="startTime" ng-model="deviceDetailsCtrl.startTime"></div><div class="col-sm-2"><b><p>To:</p></b><input type="text" class="form-control input-sm" datetimepicker="" datetimepicker-options="{{deviceDetailsCtrl.pickerOptions}}" placeholder="{{deviceDetailsCtrl.endTime}}" name="endTime" id="endTime" ng-model="deviceDetailsCtrl.endTime"></div><div class="col-sm-2"><md-button type="submit" class="md-raised"><i class="fa fa-fw fa-filter"></i> Filter</md-button></div></div></form></md-card-content></md-card><md-card><md-card-content><div class="row margin-top-15"><div class="col-lg-12"><table class="table table-responsive table-striped"><thead><tr><th width="3px"></th><th>Category</th><th>Memory</th><th>Storage</th><th>Program</th><th>Event created</th><th>Last updated</th><th></th></tr></thead><tbody><tr ng-hide="deviceDetailsCtrl.issues.length"><td class="text-center text-warning" colspan="8">No events logged in the past {{deviceDetailsCtrl.dayRange}} days.<br>Please try an earlier \'From date\' above.</td></tr><tr ng-repeat="item in deviceDetailsCtrl.issues | orderBy:[\'-updated\']"><td class="issue-{{ item.level_descriptor}}-background"></td><td>{{ item.category }}</td><td>{{ item.memory_utilization }}%</td><td>{{ item.storage_utilization }}%</td><td>{{ item.program }}</td><td>{{ item.created }}</td><td>{{ item.updated }}</td><td class="issue-{{ item.level_descriptor}}-text"><i ng-class="item.level==1? \'fa fa-fw fa-warning\' : item.level==0? \'fa fa-fw fa-check-circle\': \'fa fa-fw fa-ambulance\'"></i> {{ item.elapsed_time }}</td></tr></tbody></table></div></div></md-card-content></md-card><md-card><md-card-content><form name="tenantForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onClickRefreshButton()" novalidate=""><div class="row"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.prev_cursor" ng-click="deviceDetailsCtrl.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!deviceDetailsCtrl.next_cursor" ng-click="deviceDetailsCtrl.paginateCall(true)">Next</md-button></div></div></form></md-card-content></md-card></div></md-content>'),e.put("app/device/device-listing-managed.html",'<md-content class="md-padding"><div flex="100" flex-sm="100" flex-xs="100" layout="column" id="to-pin"><md-card><md-card-content><div class="col-md-12" id="to-pin"><div class="col-sm-4"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false, true)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true, true)">Next</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshManagedDevices()">Refresh</md-button></div><div class="col-md-3 col-md-offset-1"><md-radio-group ng-model="vm.selectedButton" ng-change="vm.changeRadio(false)" class="radio-horizontal"><div class="col-md-4"><md-radio-button value="Serial Number" class="md-primary">Serial Number</md-radio-button></div><div class="col-md-2 col-md-offset-2"><md-radio-button value="MAC" class="md-primary radio-button">MAC</md-radio-button></div></md-radio-group></div><div class="col-md-3"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.searchDevices(false, vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isResourceValid(false, vm.searchText)" md-selected-item-change="vm.isResourceValid(false, vm.searchText)" placeholder="Make A Search"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1"><div style="margin-left: -20px !important; margin-top: -4px !important"><md-button class="md-raised md-primary" aria-label="OPEN" ng-disabled="vm.disabled" ng-click="vm.prepareForEditView(false, vm.searchText)"><div ng-if="!vm.disabledButtonLoading">OPEN</div><div ng-if="vm.disabledButtonLoading">Loading...</div></md-button></div></div></div></md-card-content></md-card><md-card><md-card-content><md-data-table-container layout="column"><table class="table table-responsive table-striped"><thead><tr><th></th><th>Tenant code</th><th><i class="fa fa-fw fa-wifi"></i> MAC</th><th><i class="fa fa-fw fa-plug"></i> MAC</th><th>Serial number</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide="vm.devices.length"><td class="no-devices text-center text-danger" colspan="7">No managed devices retrieved</td></tr><tr ng-repeat="item in vm.devices | orderBy:\'-created\'" ng-click="vm.editItem(item)"><td><a ng-click="vm.editItem(item)" title="Device detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{ item.tenantCode }}</td><td>{{ item.macAddress || "None" }}</td><td>{{ item.ethernetMacAddress || "None" }}</td><td><a name="edit-device" class="md-primary md-ink-ripple" ng-click="vm.editItem(item)" title="Device detail">{{item.serialNumber}}</a></td><td>{{ item.created }}</td><td class="up-{{ item.up}}-background"></td></tr></tbody></table></md-data-table-container></md-card-content></md-card><md-card ng-if="vm.devices.length > 10"><md-card-content><div class="col-md-12"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false, true)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true, true)">Next</md-button></div></div></md-card-content></md-card></div></md-content>'),e.put("app/device/device-listing-unmanaged.html",'<md-content class="md-padding"><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-card><md-card-content><div class="col-md-12"><div class="col-sm-4"><md-button class="md-raised" ng-disabled="!vm.unmanagedDevicesPrev" ng-click="vm.paginateCall(false, false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.unmanagedDevicesNext" ng-click="vm.paginateCall(true, false)">Next</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshUnmanagedDevices()">Refresh</md-button></div><div class="col-md-3 col-md-offset-1"><md-radio-group ng-model="vm.unmanagedSelectedButton" ng-change="vm.changeRadio(false)" class="radio-horizontal"><div class="col-md-4"><md-radio-button value="Serial Number" class="md-primary" ng-disabled="true">Serial Number</md-radio-button></div><div class="col-md-2 col-md-offset-2"><md-radio-button value="MAC" class="md-primary radio-button">MAC</md-radio-button></div></md-radio-group></div><div class="col-md-3"><md-autocomplete md-no-cache="true" md-selected-item="vm.unmanagedSelectedItem" md-search-text="vm.unmanagedSearchText" md-items="item in vm.searchDevices(true, vm.unmanagedSearchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isResourceValid(true, vm.unmanagedSearchText)" md-selected-item-change="vm.isResourceValid(true, vm.unmanagedSearchText)" placeholder="Make A Search"><md-item-template><span md-highlight-text="vm.unmanagedSearchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.unmanagedSearchText !== \'\' && vm.unmanagedSearchText.length > 2">No results for "{{vm.unmanagedSearchText}}" were found.</div><div ng-if="vm.unmanagedSearchText !== \'\' && vm.unmanagedSearchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1" style="margin-left: -20px !important; margin-top: -4px !important"><md-button class="md-raised md-primary" ng-disabled="vm.unmanagedDisabled" aria-label="OPEN" ng-click="vm.prepareForEditView(true, vm.unmanagedSearchText)"><div ng-if="!vm.unmanagedDisabledButtonLoading">OPEN</div><div ng-if="vm.unmanagedDisabledButtonLoading">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><md-data-table-container layout="column"><table class="table table-responsive table-striped"><thead><tr><th></th><th>Tenant code</th><th><i class="fa fa-fw fa-wifi"></i> MAC</th><th><i class="fa fa-fw fa-plug"></i> MAC</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide="vm.unmanagedDevices.length"><td class="no-devices text-center text-danger" colspan="6">No unmanaged devices retrieved</td></tr><tr ng-repeat="item in vm.unmanagedDevices | orderBy:\'-created\'"><td><a ng-click="vm.editItem(item)" title="Device detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{ item.tenantCode }}</td><td>{{ item.macAddress || "None" }}</td><td>{{ item.ethernetMacAddress || "None" }}</td><td>{{ item.created }}</td><td class="up-{{ item.up}}-background"></td></tr></tbody></table></md-data-table-container></md-card-content></md-card><md-card ng-if="vm.unmanagedDevices.length > 10"><md-card-content><div class="col-md-12"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!vm.unmanagedDevicesPrev" ng-click="vm.paginateCall(false, false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.unmanagedDevicesNext" ng-click="vm.paginateCall(true, false)">Next</md-button></div></div></md-card-content></md-card></div></md-content>'),e.put("app/device/device-properties.html",'<md-content class="md-padding" layout="row" layout-wrap="" layout-align="left start" layout-xs="column"><div flex="50" flex-sm="50" flex-xs="50" layout="column"><md-card><md-card-content><h2>Information</h2><hr><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.serialNumber == null || deviceDetailsCtrl.currentDevice.serialNumber == \'\'"><label>Serial number</label><div>{{deviceDetailsCtrl.currentDevice.serialNumber}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.annotatedLocation == null || deviceDetailsCtrl.currentDevice.annotatedLocation == \'\'"><label>Annotated location</label><div>{{deviceDetailsCtrl.currentDevice.annotatedLocation}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.annotatedUser == null || deviceDetailsCtrl.currentDevice.annotatedUser == \'\'"><label>Annotated user</label><div>{{deviceDetailsCtrl.currentDevice.annotatedUser}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.apiKey == null || deviceDetailsCtrl.currentDevice.apiKey == \'\'"><label>API key</label><div>{{deviceDetailsCtrl.currentDevice.apiKey}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.bootMode == null || deviceDetailsCtrl.currentDevice.bootMode == \'\'"><label>Boot mode</label><div>{{deviceDetailsCtrl.currentDevice.bootMode}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.chromeDeviceDomain == null || deviceDetailsCtrl.currentDevice.chromeDeviceDomain == \'\'"><label>Chrome device domain</label><div>{{deviceDetailsCtrl.currentDevice.chromeDeviceDomain}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.contentServerUrl == null || deviceDetailsCtrl.currentDevice.contentServerUrl == \'\'"><label>Content server URL</label><div>{{deviceDetailsCtrl.currentDevice.contentServerUrl}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.created == null || deviceDetailsCtrl.currentDevice.created == \'\'"><label>Created timestamp</label><div>{{deviceDetailsCtrl.currentDevice.created}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.deviceId == null || deviceDetailsCtrl.currentDevice.deviceId == \'\'"><label>Device ID</label><div>{{deviceDetailsCtrl.currentDevice.deviceId}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.etag == null || deviceDetailsCtrl.currentDevice.etag == \'\'"><label>ETag</label><div>{{deviceDetailsCtrl.currentDevice.etag}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.firmwareVersion == null || deviceDetailsCtrl.currentDevice.firmwareVersion == \'\'"><label>Firmware version</label><div>{{deviceDetailsCtrl.currentDevice.firmwareVersion}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.gcmRegistrationId == null || deviceDetailsCtrl.currentDevice.gcmRegistrationId == \'\'"><label>GCM registration ID</label><div class="gcm-registration-id-word-break">{{deviceDetailsCtrl.currentDevice.gcmRegistrationId}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.kind == null || deviceDetailsCtrl.currentDevice.kind == \'\'"><label>Kind</label><div>{{deviceDetailsCtrl.currentDevice.kind}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.lastEnrollmentTime == null || deviceDetailsCtrl.currentDevice.lastEnrollmentTime == \'\'"><label>Last enrollment</label><div>{{deviceDetailsCtrl.currentDevice.lastEnrollmentTime}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.lastSync == null || deviceDetailsCtrl.currentDevice.lastSync == \'\'"><label>Last sync</label><div>{{deviceDetailsCtrl.currentDevice.lastSync}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.logglyLink == null || deviceDetailsCtrl.currentDevice.logglyLink == \'\'"><div ng-show="deviceDetailsCtrl.logglyForUser()"><label>Loggly</label><div><a ng-href="{{deviceDetailsCtrl.currentDevice.logglyLink}}" class="md-primary md-ink-ripple">{{deviceDetailsCtrl.currentDevice.logglyLink}}</a></div></div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.macAddress == null || deviceDetailsCtrl.currentDevice.macAddress == \'\'"><label>MAC WiFi</label><div>{{deviceDetailsCtrl.currentDevice.macAddress}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.ethernetMacAddress == null || deviceDetailsCtrl.currentDevice.ethernetMacAddress == \'\'"><label>Ethernet MAC</label><div>{{deviceDetailsCtrl.currentDevice.ethernetMacAddress}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.model == null || deviceDetailsCtrl.currentDevice.model == \'\'"><label>Model</label><div>{{deviceDetailsCtrl.currentDevice.model}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.osVersion == null || deviceDetailsCtrl.currentDevice.osVersion == \'\'"><label>OS version</label><div>{{deviceDetailsCtrl.currentDevice.osVersion}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.orgUnitPath == null || deviceDetailsCtrl.currentDevice.orgUnitPath == \'\'"><label>OU path</label><div>{{deviceDetailsCtrl.currentDevice.orgUnitPath}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.platformVersion == null || deviceDetailsCtrl.currentDevice.platformVersion == \'\'"><label>Platform version</label><div>{{deviceDetailsCtrl.currentDevice.platformVersion}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.status == null || deviceDetailsCtrl.currentDevice.status == \'\'"><label>Status</label><div>{{deviceDetailsCtrl.currentDevice.status}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.tenantCode == null || deviceDetailsCtrl.currentDevice.tenantCode == \'\'"><label>Tenant code</label><div>{{deviceDetailsCtrl.currentDevice.tenantCode}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.timezone == null || deviceDetailsCtrl.currentDevice.timezone == \'\'"><label>Timezone</label><div>{{deviceDetailsCtrl.currentDevice.timezone}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.isUnmanagedDevice == null || deviceDetailsCtrl.currentDevice.isUnmanagedDevice == \'\'"><label>Unmanaged</label><div>{{deviceDetailsCtrl.currentDevice.isUnmanagedDevice}}</div></div><div class="form-group" ng-hide="deviceDetailsCtrl.currentDevice.updated == null || deviceDetailsCtrl.currentDevice.updated == \'\'"><label>Updated timestamp</label><div>{{deviceDetailsCtrl.currentDevice.updated}}</div></div></md-card-content></md-card><md-card><md-card-content><h2>Delete</h2><hr><div class="form-group"><label>Device key</label><div class="gcm-registration-id-word-break">{{deviceDetailsCtrl.currentDevice.key}}</div><md-card-actions layout="row" layout-align="end center"><button class="md-raised md-primary md-button md-ink-ripple" type="button" aria-label="Delete" layout-align="right" ng-click="deviceDetailsCtrl.confirmDeviceDelete( $event, deviceDetailsCtrl.currentDevice.key)"><i class="fa fa-fw fa-trash ng-scope"></i><span class="ng-scope">Delete</span></button></md-card-actions></div></md-card-content></md-card></div><div flex="50" flex-sm="50" flex-xs="50" layout="column"><md-card><md-card-content><h2>Edit</h2><hr><form name="deviceForm" class="form-horizontal" ng-submit="deviceDetailsCtrl.onSaveDevice()" novalidate=""><section name="proofOfPlay" ng-show="deviceDetailsCtrl.currentDevice.proofOfPlayEditable"><h3>Proof of play</h3><div class="form-group"><div class="col-sm-2"><label>Logging</label><div><input type="checkbox" ng-model="deviceDetailsCtrl.currentDevice.proofOfPlayLogging" ng-change="deviceDetailsCtrl.onProofOfPlayLoggingCheck()"> <span>Enable</span></div></div><div class="col-sm-2"><md-button class="md-fab md-primary" aria-label="Proof of play logging" ng-show="deviceDetailsCtrl.currentDevice.proofOfPlayLogging == false && (deviceDetailsCtrl.currentDevice.locationKey == null || deviceDetailsCtrl.currentDevice.customerDisplayCode == null)"><md-tooltip>A device must have a Location and Display code to it to enable Proof of play logging.</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></div><hr></section><section name="location"><h3>Location</h3><div class="form-group"><div class="col-sm-5"><label>Panel location</label><select id="customerLocationName" class="form-control" ng-model="deviceDetailsCtrl.currentDevice.location" ng-options="i.customerLocationName for i in deviceDetailsCtrl.locations track by i.key" ng-change="deviceDetailsCtrl.onUpdateLocation()"></select></div><div class="col-sm-2"><md-button class="md-fab md-primary" aria-label="Customer Location Name" ng-hide="deviceDetailsCtrl.currentDevice.proofOfPlayLogging || deviceDetailsCtrl.currentDevice.locationKey != null"><md-tooltip>Locations may be added or edited in the Locations tab of the tenant view for the tenant {{deviceDetailsCtrl.currentDevice.tenantName}}.</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></div><hr></section><section name="displayCode"><h3>Display code</h3><div class="form-group"><div class="col-sm-6"><label>Customer display name</label><div><input type="text" class="form-control" autofocus="" name="customerDisplayName" placeholder="e.g., Panel in Front Reception" ng-change="deviceDetailsCtrl.autoGenerateCustomerDisplayCode()" ng-model="deviceDetailsCtrl.currentDevice.customerDisplayName"></div></div><div class="col-sm-6" ng-class="{ \'has-error\' : deviceForm.customerDisplayCode.$invalid && !deviceForm.customerDisplayCode.$pristine }"><label>Customer display code</label><div><input type="text" class="form-control" name="customerDisplayCode" placeholder="auto-generated" ng-model="deviceDetailsCtrl.currentDevice.customerDisplayCode" ng-pattern="/^[a-z0-9_]*$/"><p ng-show="deviceForm.customerDisplayCode.$invalid && !deviceForm.customerDisplayCode.$invalid.$pristine" class="help-block">Alphanumeric and underscore allowed.</p></div></div></div><hr></section><section name="serialControl"><h3>Serial control</h3><div class="form-group"><div class="col-sm-5"><label>Panel model</label><select id="panelModel" class="form-control" ng-model="deviceDetailsCtrl.currentDevice.panelModel" ng-options="p.displayName for p in deviceDetailsCtrl.panelModels track by p.id"></select></div><div class="col-sm-5"><label>Panel input</label><select id="panelInput" class="form-control" ng-required="deviceDetailsCtrl.currentDevice.panelModel !== null" ng-model="deviceDetailsCtrl.currentDevice.panelInput" ng-options="c.id for c in deviceDetailsCtrl.panelInputs | filter:{parentId: deviceDetailsCtrl.currentDevice.panelModel.id}"></select></div></div><hr></section><section name="timezone"><h3>Timezone</h3><div class="form-group" ng-class="{ \'has-error\' : deviceForm.timezone.$invalid && !deviceForm.timezone.$pristine }"><div class="col-sm-4"><br><select id="timezone" ng-model="deviceDetailsCtrl.selectedTimezone" class="form-control" ng-options="item for item in deviceDetailsCtrl.timezones track by item"><option value="">Select timezone</option></select></div></div><hr></section><section name="intervals"><h3>Intervals</h3><div class="form-group"><div class="col-sm-4"><label>Check content</label> <input type="number" class="form-control" name="checkContentInterval" id="checkContentInterval" ng-model="deviceDetailsCtrl.currentDevice.checkContentInterval" min="0" ng-required="true">minutes</div><div class="col-sm-4"><label>Player heartbeat</label><br>{{deviceDetailsCtrl.currentDevice.heartbeatInterval}} minutes</div></div><hr></section><section name="notes"><h3>Notes</h3><div class="form-group"><div class="col-sm-12"><div><input type="text" class="form-control" name="notes" ng-model="deviceDetailsCtrl.currentDevice.notes"></div></div></div><hr></section><md-card-actions layout="row" layout-align="end center"><md-button type="submit" class="md-raised md-primary" ng-disabled="deviceForm.$pristine || deviceForm.$invalid"><i class="fa fa-fw fa-save"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content>'),e.put("app/device/devices-listing.html",'<div ng-controller="DevicesListingCtrl as vm" ng-init="vm.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-desktop ng-scope"></i> Devices</h2></div></md-toolbar><md-content><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-tabs md-dynamic-height="" md-border-bottom=""><md-tab label="Managed"><div ng-include="\'webapp/src/app/device/device-listing-managed.html\'"></div></md-tab><md-tab label="Unmanaged"><div ng-include="\'webapp/src/app/device/device-listing-unmanaged.html\'"></div></md-tab></md-tabs></div></md-content></div>'),e.put("app/domain/domain-detail.html",'<div layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-cube ng-scope"></i> Domain</h2></div></md-toolbar><md-content flex="" layout-padding=""><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><div flex="80" flex-xs="100" layout="column"><md-card><md-card-title><md-card-title-text><span class="md-headline">Domain</span></md-card-title-text></md-card-title><form name="domainForm" class="form-horizontal" ng-submit="domainDetailsCtrl.onSaveDomain()" novalidate=""><md-card-content><div class="form-group" ng-class="{ \'has-error\' : domainForm.name.$invalid && !domainForm.name.$pristine }"><label for="domainName" class="col-sm-3 control-label">Name</label><div class="col-sm-4"><input type="text" class="form-control" name="domainName" id="domainName" ng-readonly="domainDetailsCtrl.editMode" ng-model="domainDetailsCtrl.currentDomain.name" required=""></div><div class="col-sm-5"><p ng-show="domainForm.name.$invalid && !domainForm.name.$pristine" class="help-block">The name is required.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : domainForm.impersonation_admin_email_address.$invalid && !domainForm.impersonation_admin_email_address.$pristine }"><label for="impersonationAdminEmailAddress" class="col-sm-3 control-label">Impersonation email</label><div class="col-sm-4"><input type="text" class="form-control" name="impersonationAdminEmailAddress" id="impersonationAdminEmailAddress" ng-readonly="domainDetailsCtrl.editMode" ng-model="domainDetailsCtrl.currentDomain.impersonation_admin_email_address" required=""></div><div class="col-sm-5"><p ng-show="domainForm.impersonationAdminEmailAddress.$invalid && !domainForm.impersonationAdminEmailAddress.$pristine" class="help-block">The impersonation email is required.</p></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-9"><input type="checkbox" id="active" ng-model="domainDetailsCtrl.currentDomain.active"> <label for="active">Active</label></div></div></md-card-content><md-card-actions layout="row" layout-align="end center"><md-button class="md-raised md-primary md-button md-ink-ripple" type="submit" ng-disabled="!domainForm.$dirty || domainForm.$invalid"><i class="fa fa-fw fa-save"></i> Save</md-button></md-card-actions></form></md-card></div></md-content></div>'),e.put("app/domain/domains-listing.html",'<div ng-controller="DomainsCtrl" ng-init="domainsCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-cube ng-scope"></i> Domains</h2></div></md-toolbar><md-content><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-card><md-card-content><div class="row"><div class="col-lg-12"><md-card-actions layout="row" layout-align="end center"><md-button href="#/domains/add" class="md-raised md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-plus"></i> Add</md-button></md-card-actions><table class="table table-responsive table-striped"><thead><tr><th></th><th>Name</th><th>Impersonation Admin Email</th><th>Created</th></tr></thead><tbody><tr ng-hide="domainsCtrl.domains.length"><td class="no-devices text-center text-danger" colspan="4">No domains</td></tr><tr ng-repeat="item in domainsCtrl.domains | orderBy:\'-created\'" ng-click="domainsCtrl.editItem(item)"><td><a ng-click="domainsCtrl.editItem(item)" title="Domain detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td class="domain-key"><a name="edit-domain" class="md-primary md-ink-ripple" ng-click="domainsCtrl.editItem(item)" title="Edit domain">{{item.name}}</a></td><td class="domain-impersonation-admin-email-address">{{item.impersonation_admin_email_address}}</td><td class="domain-created">{{item.created}}</td></tr></tbody></table></div></div></md-card-content></md-card></div></md-content></div>'),e.put("app/welcome/welcome.html",'<div ng-controller="WelcomeCtrl as vm" ng-init="vm.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex">{{ vm.identity.distributorName }}</h2></div></md-toolbar><md-content class="md-padding" layout="row" layout-wrap="" layout-xs="column"><div class="my-flex container" style="text-align: center"><div flex="35" flex-sm="50" flex-xs="50" layout="column"><md-card><md-card-title><md-card-title-text><span class="md-headline"><i class="fa fa-fw fa-tag ng-scope"></i> Version</span></md-card-title-text></md-card-title><md-card-content><table class="table"><tbody><tr><td class="text-right col-md-3">Number:</td><td class="col-md-3">{{vm.version_data.number}}</td></tr><tr><td class="text-right col-md-3">Module:</td><td class="col-md-3">{{vm.version_data.web_module_name}}</td></tr><tr><td class="text-right col-md-3">Tag:</td><td class="col-md-3">{{vm.version_data.web_version_name}}</td></tr><tr><td class="text-right col-md-3">Hostname:</td><td class="col-md-3 hostname-word-break">{{vm.version_data.hostname}}</td></tr></tbody></table></md-card-content></md-card></div><div flex="60" flex-sm="60" flex-xs="60" layout="column"><md-card><md-card-title><md-card-title-text><h3>Welcome <b>{{ vm.identity.email }}</b>!</h3></md-card-title-text></md-card-title><md-card-content><div ng-if="vm.loading"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="!vm.loading"><h3>You are signed in under the <b>{{ vm.identity.distributorName }}</b> distributor.</h3><p>Click on the hamburger icon in the top-left to get started.</p><div ng-if="vm.has_multiple_distributors"><h5>OR</h5><h4>Click<md-button class="md-raised" ng-click="vm.changeDistributor()">Here</md-button>to change your Distributor</h4></div></div></md-card-content></md-card></div></div></md-content></div>'),e.put("app/proof/detail.html",'<div ng-controller="ProofOfPlayCtrl as vm" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-film ng-scope"></i> Proof of Play</h2></div></md-toolbar><md-content><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-tabs md-dynamic-height="" md-border-bottom=""><div class="container"><div ng-include="\'webapp/src/app/proof/resources.html\'"></div><div ng-include="\'webapp/src/app/proof/locations.html\'"></div><div ng-include="\'webapp/src/app/proof/displays.html\'"></div></div></md-tabs></div></md-content></div>'),e.put("app/proof/displays.html",'<md-tab label="{{vm.display.title}}" layout-align="center center"><div ng-controller="ProofOfPlayMultiDisplayCtrl as vm" layout="column" ng-cloak=""><div ng-init="vm.initialize()" class="container"><md-card><div class="col-md-12" ng-init="vm.initialize_tenant_select()"><div class="col-md-1"><h3>{{vm.currentTenant}}</h3></div><div ng-if="!vm.tenants" class="col-md-offset-9 proof-of-play-horizontal-top-bar"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.tenants" class="proof-of-play-horizontal-top-bar"><div class="col-md-3 col-md-offset-7"><md-autocomplete md-no-cache="true" md-selected-item="vm.tenantselectedItem" md-search-text="vm.tenantsearchText" md-items="item in vm.querySearch(vm.tenants, vm.tenantsearchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isSelectionValid(vm.tenantsearchText)" md-selected-item-change="vm.isSelectionValid(vm.tenantsearchText)" placeholder="Switch Tenants"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1"><md-button md-no-ink="" class="md-raised" ng-disabled="vm.disabledTenant" ng-click="vm.submitTenant(vm.tenantsearchText)">Submit</md-button></div></div></div></md-card><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><div ng-show="vm.loading"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.had_some_items && !vm.loading"><div ng-hide="vm.loading"><h4 class="proof-of-play-label">Display Selection</h4><form ng-submit="$event.preventDefault()"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.querySearch(vm.displays, vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isDisplayValid(vm.searchText)" md-selected-item-change="vm.isDisplayValid(vm.searchText)" placeholder="Select a display"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found>No matching item for search "{{vm.searchText}}" was found.</md-not-found></md-autocomplete><br><md-button class="md-raised" ng-click="vm.addToSelectedDisplays(vm.searchText)" style="float: right">Add</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshDisplays()" style="float: right">Refresh</md-button><br><br><br><hr></form></div><div class="row"><div class="col-sm-3"><h4 class="proof-of-play-label">Start Date</h4><md-datepicker ng-model="vm.dateTimeSelection.start" ng-change="vm.isStartDateValid(vm.dateTimeSelection.start)" required="" md-placeholder="Enter date"></md-datepicker></div><div class="col-sm-3 col-sm-offset-4"><h4 class="proof-of-play-label">End Date</h4><md-datepicker ng-model="vm.dateTimeSelection.end" ng-change="vm.isEndDateValid(vm.dateTimeSelection.end)" required="" md-placeholder="Enter date"></md-datepicker></div></div><hr><md-input-container class="md-block"><h4 class="proof-of-play-label">Report Type</h4><md-radio-group ng-model="vm.radioButtonChoices.selection" ng-change="vm.isRadioValid(vm.radioButtonChoices.selection)"><md-radio-button value="1">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value="2">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class="md-raised" ng-click="vm.submit()" ng-disabled="vm.disabled" style="margin-top: 25px; float: right; margin-bottom: 50px">Submit</md-button></div><div ng-if="!vm.had_some_items && !vm.loading"><h3>This tenant has no displays logged. Make sure your devices have proof of play activated.</h3><md-button class="md-raised md-primary" ng-click="vm.refreshDisplays()" style="float: right">Refresh</md-button></div></div></md-card-content></md-card></div><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><h3>Selected Displays</h3><hr><div ng-show="vm.selected_displays.length > 0"><md-list><li ng-repeat="item in vm.selected_displays" class="proof-of-play-selected-item"><md-button md-no-ink="" class="md-primary" id="proofplay-selected-items" ng-click="vm.removeFromSelectedDisplay(item)">X</md-button>{{ item }}</li></md-list></div><div ng-hide="vm.selected_displays.length > 0"><h5>You have no selected displays</h5></div></div></md-card-content></md-card></div></div></div></md-tab>'),e.put("app/proof/locations.html",'<md-tab label="{{vm.location.title}}" layout-align="center center"><div ng-controller="ProofOfPlayMultiLocationCtrl as vm" layout="column" ng-cloak=""><div ng-init="vm.initialize()" class="container"><md-card><div class="col-md-12" ng-init="vm.initialize_tenant_select()"><div class="col-md-1"><h3>{{vm.currentTenant}}</h3></div><div ng-if="!vm.tenants" class="col-md-offset-9 proof-of-play-horizontal-top-bar"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.tenants" class="proof-of-play-horizontal-top-bar"><div class="col-md-3 col-md-offset-7"><md-autocomplete md-no-cache="true" md-selected-item="vm.tenantselectedItem" md-search-text="vm.tenantsearchText" md-items="item in vm.querySearch(vm.tenants, vm.tenantsearchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isSelectionValid(vm.tenantsearchText)" md-selected-item-change="vm.isSelectionValid(vm.tenantsearchText)" placeholder="Switch Tenants"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1"><md-button md-no-ink="" class="md-raised" ng-disabled="vm.disabledTenant" ng-click="vm.submitTenant(vm.tenantsearchText)">Submit</md-button></div></div></div></md-card><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><div ng-show="vm.loading"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.had_some_items && !vm.loading"><div ng-hide="vm.loading"><h4 class="proof-of-play-label">Location Selection</h4><form ng-submit="$event.preventDefault()"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.querySearch(vm.locations, vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isLocationValid(vm.searchText)" md-selected-item-change="vm.isLocationValid(vm.searchText)" placeholder="Select a resource"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found>No matching item for search "{{vm.searchText}}" was found.</md-not-found></md-autocomplete><br><md-button class="md-raised" ng-click="vm.addToSelectedLocations(vm.searchText)" style="float: right">Add</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshLocations()" style="float: right">Refresh</md-button><br><br><br><hr></form></div><div class="row"><div class="col-sm-3"><h4 class="proof-of-play-label">Start Date</h4><md-datepicker ng-model="vm.dateTimeSelection.start" ng-change="vm.isStartDateValid(vm.dateTimeSelection.start)" required="" md-placeholder="Enter date"></md-datepicker></div><div class="col-sm-3 col-sm-offset-4"><h4 class="proof-of-play-label">End Date</h4><md-datepicker ng-model="vm.dateTimeSelection.end" ng-change="vm.isEndDateValid(vm.dateTimeSelection.end)" required="" md-placeholder="Enter date"></md-datepicker></div></div><hr><md-input-container class="md-block"><h4 class="proof-of-play-label">Report Type</h4><md-radio-group ng-model="vm.radioButtonChoices.selection" ng-change="vm.isRadioValid(vm.radioButtonChoices.selection)"><md-radio-button value="1">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value="2">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class="md-raised" ng-click="vm.submit()" ng-disabled="vm.disabled" style="margin-top: 25px; float: right; margin-bottom: 50px">Submit</md-button></div><div ng-if="!vm.had_some_items && !vm.loading"><h3>This tenant has no locations logged. Make sure your devices have proof of play activated.</h3><md-button class="md-raised md-primary" ng-click="vm.refreshLocations()" style="float: right">Refresh</md-button></div></div></md-card-content></md-card></div><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><h3>Selected Locations</h3><hr><div ng-show="vm.selected_locations.length > 0"><md-list><li ng-repeat="item in vm.selected_locations" class="proof-of-play-selected-item"><md-button md-no-ink="" class="md-primary" id="proofplay-selected-items" ng-click="vm.removeFromSelectedLocation(item)">X</md-button>{{ item }}</li></md-list></div><div ng-hide="vm.selected_locations.length > 0"><h5>You have no selected locations</h5></div></div></md-card-content></md-card></div></div></div></md-tab>'),e.put("app/proof/main.html",'<div ng-controller="ProofOfPlayCtrl as vm" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-film ng-scope"></i> Proof of Play</h2></div></md-toolbar><md-content><div class="container"><div ng-init="vm.initialize()" style="margin-top: 1em;"><div ng-hide="vm.tenants"><div layout="row" layout-sm="column" layout-align="space-around"><div class="col-md-12"><h3>Loading Tenants...</h3></div><div class="col-md-1"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div></div><div ng-show="vm.tenants"><div ng-if="vm.tenants.length > 0"><h3>Please choose a tenant</h3></div><hr><div class="col-md-12"><div class="col-md-6"><div ng-if="vm.tenants.length > 0"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.querySearch(vm.tenants, vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isSelectionValid( vm.searchText)" md-selected-item-change="vm.isSelectionValid( vm.searchText)" placeholder="Make A Search"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div ng-if="vm.tenants.length < 1"><h3>Sorry, you do not have any tenants. Please create one, and then Refresh.</h3></div></div><div class="col-md-5" style="margin-top: -3px"><md-button md-no-ink="" class="md-raised" ng-disabled="vm.disabled || vm.tenants.length < 1" ng-click="vm.submitTenant(vm.searchText)">Submit</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshTenants()">Refresh</md-button></div></div></div></div></div></md-content></div>'),e.put("app/proof/resources.html",'<md-tab label="{{vm.resource.title}}" layout-align="center center"><div ng-controller="ProofOfPlayMultiResourceCtrl as vm" layout="column" ng-cloak=""><div ng-init="vm.initialize()" class="container"><md-card><div class="col-md-12" ng-init="vm.initialize_tenant_select()"><div class="col-md-1"><h3>{{vm.currentTenant}}</h3></div><div ng-if="!vm.tenants" class="col-md-offset-9 proof-of-play-horizontal-top-bar"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.tenants" class="proof-of-play-horizontal-top-bar"><div class="col-md-3 col-md-offset-7"><md-autocomplete md-no-cache="true" md-selected-item="vm.tenantselectedItem" md-search-text="vm.tenantsearchText" md-items="item in vm.querySearch(vm.tenants, vm.tenantsearchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isSelectionValid(vm.tenantsearchText)" md-selected-item-change="vm.isSelectionValid(vm.tenantsearchText)" placeholder="Switch Tenants"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1"><md-button md-no-ink="" class="md-raised" ng-disabled="vm.disabledTenant" ng-click="vm.submitTenant(vm.tenantsearchText)">Submit</md-button></div></div></div></md-card><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><div ng-show="vm.loading"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div><div ng-if="vm.had_some_items && !vm.loading"><div ng-hide="vm.loading"><h4 class="proof-of-play-label">Resource Selection</h4><form ng-submit="$event.preventDefault()"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.querySearch(vm.resources, vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isResourceValid(vm.searchText)" md-selected-item-change="vm.isResourceValid(vm.searchText)" placeholder="Select a resource"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found>No matching item for search "{{vm.searchText}}" was found.</md-not-found></md-autocomplete><br><md-button class="md-raised" ng-click="vm.addToSelectedResources(vm.searchText)" style="float: right">Add</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshResources()" style="float: right">Refresh</md-button><br><br><br><hr></form></div><div class="row"><div class="col-sm-3"><h4 class="proof-of-play-label">Start Date</h4><md-datepicker ng-model="vm.dateTimeSelection.start" ng-change="vm.isStartDateValid(vm.dateTimeSelection.start)" required="" md-placeholder="Enter date"></md-datepicker></div><div class="col-sm-3 col-sm-offset-4"><h4 class="proof-of-play-label">End Date</h4><md-datepicker ng-model="vm.dateTimeSelection.end" ng-change="vm.isEndDateValid(vm.dateTimeSelection.end)" required="" md-placeholder="Enter date"></md-datepicker></div></div><hr><md-input-container class="md-block"><h4 class="proof-of-play-label">Report Type</h4><md-radio-group ng-model="vm.radioButtonChoices.selection" ng-change="vm.isRadioValid(vm.radioButtonChoices.selection)"><md-radio-button value="1">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value="2">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class="md-raised" ng-click="vm.submit()" ng-disabled="vm.disabled" style="margin-top: 25px; float: right; margin-bottom: 50px">Submit</md-button></div><div ng-if="!vm.had_some_items && !vm.loading"><h3>This tenant has no resources logged. Make sure your devices have proof of play activated.</h3><md-button class="md-raised md-primary" ng-click="vm.refreshResources()" style="float: right">Refresh</md-button></div></div></md-card-content></md-card></div><div style="text-align: left" class="col-md-6"><md-card><md-card-content><div class="md-padding"><h3>Selected Resources</h3><hr><div ng-show="vm.selected_resources.length > 0"><md-list><li ng-repeat="item in vm.selected_resources" class="proof-of-play-selected-item"><md-button md-no-ink="" class="md-primary" id="proofplay-selected-items" ng-click="vm.removeFromSelectedResource(item)">X</md-button>{{ item }}</li></md-list></div><div ng-hide="vm.selected_resources.length > 0"><h5>You have no selected resources</h5></div></div></md-card-content></md-card></div></div></div></md-tab>'),e.put("app/tenant/tenant-add.html",'<div ng-controller="TenantAddCtrl" ng-init="tenantAddCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenant</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><div flex="75" flex-sm="50" flex-xs="30" layout="column"><md-card><md-card-content><form name="tenantForm" class="form-horizontal" ng-submit="tenantAddCtrl.onClickSaveButton()" novalidate=""><div class="form-group" ng-class="{ \'has-error\' : tenantForm.name.$invalid && !tenantForm.name.$pristine }"><div class="col-sm-4"><label>Name</label> <input type="text" class="form-control" autofocus="" name="name" placeholder="Enter a name" ng-change="tenantAddCtrl.autoGenerateTenantCode()" ng-model="tenantAddCtrl.currentTenant.name" required=""></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine }"><div class="col-sm-4"><label>Code</label> <input type="text" class="form-control" name="tenantCode" placeholder="Code in Google Device Management" ng-model="tenantAddCtrl.currentTenant.tenant_code" required="" ng-pattern="/^[a-z0-9_]*$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine" class="help-block">Alphanumeric and underscore are allowed.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.chromeDeviceDomain.$invalid && !tenantForm.chromeDeviceDomain.$pristine }"><div class="col-sm-4"><label>Domain</label><select id="chromeDeviceDomain" ng-model="tenantAddCtrl.selectedDomain" class="form-control" ng-options="i.name for i in tenantAddCtrl.distributorDomains track by i.key" required=""><option value="">Select domain</option></select></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine }"><div class="col-sm-4"><label>Admin email</label> <input type="email" required="" class="form-control" name="adminEmail" id="adminEmail" placeholder="Enter a valid admin email" ng-model="tenantAddCtrl.currentTenant.admin_email"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine" class="help-block">A valid admin email is required.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.contentManagerUrl.$invalid && !tenantForm.contentManagerUrl.$pristine }"><div class="col-sm-5"><label>Content manager URL</label> <input type="url" required="" class="form-control" name="contentManagerUrl" id="contentManagerUrl" placeholder="Enter content server URL" ng-model="tenantAddCtrl.currentTenant.content_manager_base_url" ng-pattern="/^https:\\/\\/\\S+$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.contentManagerUrl.$invalid && !tenantForm.contentManagerUrl.$pristine" class="help-block">Content manager URL must be a secure https URL.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.playerContentUrl.$invalid && !tenantForm.playerContentUrl.$pristine }"><div class="col-sm-5"><label>Player content URL</label> <input type="url" required="" class="form-control" name="playerContentUrl" id="playerContentUrl" placeholder="Enter content server URL" ng-model="tenantAddCtrl.currentTenant.content_server_url" ng-pattern="/^https:\\/\\/\\S+$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.playerContentUrl.$invalid && !tenantForm.playerContentUrl.$pristine" class="help-block">Player content URL must be a secure https URL.</p></div></div><div class="form-group"><div class="col-sm-5"><label>Default timezone</label><select id="timezone" ng-model="tenantAddCtrl.selectedTimezone" class="form-control" ng-options="item for item in tenantAddCtrl.timezones track by item"></select></div></div><div class="form-group"><div class="col-sm-5"><label>Notification emails</label> <input type="text" class="form-control" name="notificationEmails" id="notificationEmails" placeholder="Enter comma-delimited emails" ng-model="tenantAddCtrl.currentTenant.notification_emails"></div></div><div class="form-group"><div class="col-sm-9"><input type="checkbox" name="proofOfPlayLogging" id="proofOfPlayLogging" ng-model="tenantAddCtrl.currentTenant.proof_of_play_logging"> <label>Proof of play logging</label></div></div><div class="form-group"><div class="col-sm-9"><input type="checkbox" id="active" ng-model="tenantAddCtrl.currentTenant.active"> <label for="active">Active</label></div></div><md-card-actions layout="row" layout-align="center"><md-button type="submit" ng-disabled="tenantForm.$invalid" class="md-raised md-primary"><i class="fa fa-fw fa-save"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenant-details.html",'<div ng-controller="TenantDetailsCtrl" ng-init="tenantDetailsCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenants</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><md-tabs md-stretch-tabs="" md-selected="tabIndex"><md-tab label="General"></md-tab><md-tab label="Managed Devices"></md-tab><md-tab label="Unmanaged Devices"></md-tab><md-tab label="Locations"></md-tab></md-tabs><div flex="75" flex-sm="50" flex-xs="30" layout="column"><md-card><md-card-title><md-card-title-text><span class="md-headline">{{ tenantDetailsCtrl.currentTenant.name }}</span></md-card-title-text></md-card-title><md-card-content><form name="tenantForm" class="form-horizontal" ng-submit="tenantDetailsCtrl.onClickSaveButton()" novalidate=""><div class="form-group" ng-class="{ \'has-error\' : tenantForm.name.$invalid && !tenantForm.name.$pristine }"><div class="col-sm-4"><label>Name</label> <input type="text" class="form-control" autofocus="" name="name" placeholder="Enter a name" ng-change="!tenantDetailsCtrl.editMode && tenantDetailsCtrl.autoGenerateTenantCode()" ng-model="tenantDetailsCtrl.currentTenant.name" required=""></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine }"><div class="col-sm-4"><label>Code</label> <input type="text" ng-readonly="tenantDetailsCtrl.editMode == true" class="form-control" name="tenantCode" placeholder="Code matching Google Device Management" ng-model="tenantDetailsCtrl.currentTenant.tenant_code" required="" ng-pattern="/^[a-z0-9_]*$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine" class="help-block">Alphanumeric and underscore are allowed.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.chromeDeviceDomain.$invalid && !tenantForm.chromeDeviceDomain.$pristine }"><div class="col-sm-4"><label>Domain</label><select id="chromeDeviceDomain" ng-model="tenantDetailsCtrl.selectedDomain" class="form-control" ng-options="i.name for i in tenantDetailsCtrl.distributorDomains track by i.key" required=""><option value="">Select domain</option></select></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine }"><div class="col-sm-4"><label>Admin email</label> <input type="email" required="" ng-readonly="tenantDetailsCtrl.editMode == true" class="form-control" name="adminEmail" id="adminEmail" placeholder="Enter a valid admin email" ng-model="tenantDetailsCtrl.currentTenant.admin_email"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine" class="help-block">A valid admin email is required.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.contentManagerBaseUrl.$invalid && !tenantForm.contentManagerBaseUrl.$pristine }"><div class="col-sm-5"><label>Content manager URL</label> <input type="url" required="" class="form-control" name="contentManagerBaseUrl" id="contentManagerBaseUrl" placeholder="Enter content manager base URL" ng-model="tenantDetailsCtrl.currentTenant.content_manager_base_url" ng-pattern="/^https:\\/\\/\\S+$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.contentManagerBaseUrl.$invalid && !tenantForm.contentManagerBaseUrl.$pristine" class="help-block">Content manager URL must be a secure URL.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : tenantForm.contentServerUrl.$invalid && !tenantForm.contentServerUrl.$pristine }"><div class="col-sm-5"><label>Player content URL</label> <input type="url" required="" class="form-control" name="contentServerUrl" id="contentServerUrl" placeholder="Enter content server URL" ng-model="tenantDetailsCtrl.currentTenant.content_server_url" ng-pattern="/^https:\\/\\/\\S+$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="tenantForm.contentServerUrl.$invalid && !tenantForm.contentServerUrl.$pristine" class="help-block">Player content URL must be a secure URL.</p></div></div><div class="form-group"><div class="col-sm-5"><label>Default timezone</label><select id="timezone" ng-model="tenantDetailsCtrl.selectedTimezone" class="form-control" ng-options="item for item in tenantDetailsCtrl.timezones track by item"><option value="">Select default device timezone</option></select></div><div class="col-sm-2"><md-button class="md-fab md-primary" aria-label="Default timezone"><md-tooltip>Timezone is for operations and reporting. Devices in this tenant inherit this timezone. You may override this timezone for individual devices.</md-tooltip><md-icon><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"></path><path d="M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></svg></md-icon></md-button></div></div><div class="form-group"><div class="col-sm-5"><label>Notification emails</label> <input type="text" class="form-control" name="notificationEmails" id="notificationEmails" placeholder="Enter comma-delimited emails" ng-model="tenantDetailsCtrl.currentTenant.notification_emails"></div></div><div class="form-group" ng-hide="tenantDetailsCtrl.currentTenant.proof_of_play_logging == false || tenantDetailsCtrl.gameStopServer" ng-class="{ \'has-error\' : !tenantDetailsCtrl.gameStopServer && tenantForm.proofOfPlayUrl.$invalid && !tenantForm.proofOfPlayUrl.$pristine }"><div class="col-sm-5"><label>Proof of play URL</label> <input type="url" class="form-control" name="proofOfPlayUrl" id="proofOfPlayUrl" ng-required="tenantDetailsCtrl.currentTenant.proof_of_play_logging == true && !tenantDetailsCtrl.gameStopServer" placeholder="Enter proof-of-play URL" ng-model="tenantDetailsCtrl.currentTenant.proof_of_play_url" ng-pattern="/^https:\\/\\/\\S+$/"></div><div class="col-sm-4 margin-top-20 help-block" ng-show="tenantForm.proofOfPlayUrl.$invalid && !tenantForm.proofOfPlayUrl.$pristine">Proof of play URL must be a secure URL.</div></div><div class="form-group"><div class="col-sm-9"><input type="checkbox" ng-model="tenantDetailsCtrl.currentTenant.proof_of_play_logging"> <label>Proof of play logging</label></div></div><div class="form-group"><div class="col-sm-9"><input type="checkbox" id="active" ng-model="tenantDetailsCtrl.currentTenant.active"> <label for="active">Active</label></div></div><md-card-actions layout="row" layout-align="center"><md-button type="submit" ng-disabled="tenantForm.$invalid" class="md-raised md-primary"><i class="fa fa-fw fa-save"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenant-location.html",'<div ng-controller="TenantLocationCtrl" ng-init="tenantLocationCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-location-arrow ng-scope"></i> Location</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><div flex="75" flex-sm="50" flex-xs="30" layout="column"><md-card><md-card-content><form name="locationForm" class="form-horizontal" ng-submit="tenantLocationCtrl.onClickSaveButton()" novalidate=""><div class="form-group" ng-class="{ \'has-error\' : locationForm.customerLocationName.$invalid && !locationForm.customerLocationName.$pristine }"><div class="col-sm-4"><label>Customer Location Name</label> <input type="text" class="form-control" autofocus="" name="customerLocationName" placeholder="Enter a customer location name" ng-change="tenantLocationCtrl.autoGenerateCustomerLocationCode()" ng-model="tenantLocationCtrl.location.customerLocationName" required=""></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.customerLocationCode.$invalid && !locationForm.customerLocationCode.$pristine }"><div class="col-sm-4"><label>Customer Location Code</label> <input type="text" ng-readonly="tenantLocationCtrl.editMode == true" class="form-control" name="customerLocationCode" placeholder="Auto-generated" ng-model="tenantLocationCtrl.location.customerLocationCode" required="" ng-pattern="/^[a-z0-9_]*$/"></div><div class="col-sm-5 margin-top-15"><p ng-show="locationForm.tenantCode.$invalid && !locationForm.tenantCode.$pristine" class="help-block">Alphanumeric and underscore are allowed.</p></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.address.$invalid && !locationForm.address.$pristine }"><div class="col-sm-4"><label>Address</label> <input type="text" class="form-control" name="address" placeholder="Enter a street address" ng-model="tenantLocationCtrl.location.address"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.city.$invalid && !locationForm.city.$pristine }"><div class="col-sm-4"><label>City</label> <input type="text" class="form-control" name="city" placeholder="Enter a city" ng-model="tenantLocationCtrl.location.city"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.state.$invalid && !locationForm.state.$pristine }"><div class="col-sm-4"><label>State</label> <input type="text" class="form-control" name="state" placeholder="Enter a state" ng-model="tenantLocationCtrl.location.state"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.postalCode.$invalid && !locationForm.postalCode.$pristine }"><div class="col-sm-4"><label>Postal code</label> <input type="text" class="form-control" name="postalCode" placeholder="Enter a postal code" ng-model="tenantLocationCtrl.location.postalCode"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.latitude.$invalid && !locationForm.latitude.$pristine }"><div class="col-sm-4"><label>Latitude</label> <input type="text" class="form-control" name="latitude" placeholder="Enter a latitude" ng-model="tenantLocationCtrl.location.latitude"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.longitude.$invalid && !locationForm.longitude.$pristine }"><div class="col-sm-4"><label>Longitude</label> <input type="text" class="form-control" name="longitude" placeholder="Enter a longitude" ng-model="tenantLocationCtrl.location.longitude"></div></div><div class="form-group" ng-class="{ \'has-error\' : locationForm.dma.$invalid && !locationForm.dma.$pristine }"><div class="col-sm-4"><label>DMA</label> <input type="text" class="form-control" name="dma" placeholder="Enter a dma" ng-model="tenantLocationCtrl.location.dma"></div></div><div class="form-group"><div class="col-sm-9"><input type="checkbox" id="active" ng-model="tenantLocationCtrl.location.active"> <label for="active">Active</label></div></div><md-card-actions layout="row" layout-align="center"><md-button type="submit" ng-disabled="locationForm.$invalid" class="md-raised md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-save"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenant-locations.html",'<div ng-controller="TenantLocationsCtrl as vm" ng-init="vm.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenants</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><md-tabs md-stretch-tabs="" md-selected="tabIndex"><md-tab label="General"></md-tab><md-tab label="Managed Devices"></md-tab><md-tab label="Unmanaged Devices"></md-tab><md-tab label="Locations"></md-tab></md-tabs><div flex="90" flex-sm="90" flex-xs="90" layout="column"><md-card><md-card-title><md-card-title-text><span class="md-headline">{{ vm.currentTenant.name }}</span></md-card-title-text><md-button href="#/tenants/{{ vm.currentTenant.key }}/location" class="md-raised md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-plus"></i> Add</md-button></md-card-title><md-card-content><div class="row"><div class="col-lg-12"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!vm.prev_cursor" ng-click="vm.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.next_cursor" ng-click="vm.paginateCall(true)">Next</md-button></div></div><div class="col-lg-12"><table name="tenant-locations-table" class="table table-responsive table-striped"><thead><tr><th></th><th>Customer Location Name</th><th>Customer Location Code</th><th>City</th></tr></thead><tbody><tr ng-hide="vm.locations.length"><td class="text-center text-danger" colspan="4">{{ vm.currentTenant.name }} has no locations.</td></tr><tr ng-repeat="item in vm.locations | orderBy:\'customerLocationName\'" ng-click="vm.editItem(item)"><td><a ng-click="vm.editItem(item)" title="Location detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{item.customerLocationName}}</td><td>{{item.customerLocationCode}}</td><td>{{item.city}} {{item.state}}</td></tr></tbody></table></div></div></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenant-managed-devices.html",'<div ng-controller="TenantManagedDevicesCtrl as vm" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenants</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><md-tabs md-dynamic-height="" md-selected="tabIndex" md-border-bottom=""><md-tab label="General"></md-tab><md-tab label="Managed Devices"></md-tab><md-tab label="Unmanaged Devices"></md-tab><md-tab label="Locations"></md-tab></md-tabs><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-card><md-card-content><div class="col-md-12"><div class="col-sm-4"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true)">Next</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshDevices()">Refresh</md-button></div><div class="col-md-3 col-md-offset-1"><md-radio-group ng-model="vm.selectedButton" ng-change="vm.changeRadio()" class="radio-horizontal"><div class="col-md-4"><md-radio-button value="Serial Number" class="md-primary">Serial Number</md-radio-button></div><div class="col-md-2 col-md-offset-2"><md-radio-button value="MAC" class="md-primary radio-button">MAC</md-radio-button></div></md-radio-group></div><div class="col-md-3"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.searchDevices(vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isResourceValid(vm.searchText)" md-selected-item-change="vm.isResourceValid(vm.searchText)" placeholder="Make A Search"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1" style="margin-left: -20px !important; margin-top: -4px !important"><md-button class="md-raised md-primary" aria-label="OPEN" ng-disabled="vm.disabled" ng-click="vm.prepareForEditView(vm.searchText)"><div ng-if="!vm.loadingDisabled">OPEN</div><div ng-if="vm.loadingDisabled">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><table class="table table-responsive table-striped"><thead><tr><th></th><th><i class="fa fa-fw fa-wifi"></i> MAC</th><th><i class="fa fa-fw fa-plug"></i> MAC</th><th>Serial number</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide="vm.tenantDevices.length"><td colspan="6" class="text-center text-danger">No managed devices retrieved for {{ vm.currentTenant.name }}.</td></tr><tr ng-repeat="item in vm.tenantDevices | orderBy:\'-created\'" ng-click="vm.editItem(item)"><td><a ng-click="vm.editItem(item)" class="md-primary md-ink-ripple" title="Device detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{ item.macAddress }}</td><td>{{ item.ethernetMacAddress }}</td><td><a name="edit-device" class="md-primary md-ink-ripple" ng-click="vm.editItem(item)" title="Device detail">{{item.serialNumber}}</a></td><td>{{ item.created }}</td><td class="up-{{ item.up}}-background"></td></tr></tbody></table></md-card-content></md-card><md-card ng-if="vm.tenantDevices.length > 10"><md-card-content><div class="col-md-12"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true)">Next</md-button></div></div></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenant-unmanaged-devices.html",'<div ng-controller="TenantUnmanagedDevicesCtrl as vm" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenants</h2></div></md-toolbar><md-content class="md-padding"><div flex="80" flex-xs="100" layout="column"><div ncy-breadcrumb=""></div></div><md-tabs md-stretch-tabs="" md-selected="tabIndex"><md-tab label="General"></md-tab><md-tab label="Managed Devices"></md-tab><md-tab label="Unmanaged Devices"></md-tab><md-tab label="Locations"></md-tab></md-tabs><div flex="100" flex-sm="100" flex-xs="100" layout="column"><md-card><md-card-content><div class="col-md-12"><div class="col-sm-4"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true)">Next</md-button><md-button class="md-raised md-primary" ng-click="vm.refreshDevices()">Refresh</md-button></div><div class="col-md-3 col-md-offset-1"><md-radio-group ng-model="vm.selectedButton" ng-change="vm.changeRadio()" class="radio-horizontal"><div class="col-md-4"><md-radio-button value="Serial Number" class="md-primary" ng-disabled="true">Serial Number</md-radio-button></div><div class="col-md-2 col-md-offset-2"><md-radio-button value="MAC" class="md-primary radio-button">MAC</md-radio-button></div></md-radio-group></div><div class="col-md-3"><md-autocomplete md-no-cache="true" md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.searchDevices(vm.searchText)" md-item-text="item" md-min-length="0" md-search-text-change="vm.isResourceValid(vm.searchText)" md-selected-item-change="vm.isResourceValid(vm.searchText)" placeholder="Make A Search"><md-item-template><span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span></md-item-template><md-not-found><div ng-if="vm.searchText !== \'\' && vm.searchText.length > 2">No results for "{{vm.searchText}}" were found.</div><div ng-if="vm.searchText !== \'\' && vm.searchText.length <= 2">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class="col-md-1" style="margin-left: -20px !important; margin-top: -4px !important"><md-button class="md-raised md-primary" aria-label="OPEN" ng-disabled="vm.disabled" ng-click="vm.prepareForEditView(vm.searchText)"><div ng-if="!vm.loadingDisabled">OPEN</div><div ng-if="vm.loadingDisabled">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><table class="table table-responsive table-striped"><thead><tr><th></th><th><i class="fa fa-fw fa-wifi"></i> MAC</th><th><i class="fa fa-fw fa-plug"></i> MAC</th><th>Provisioned</th></tr></thead><tbody><tr ng-hide="vm.tenantDevices.length"><td colspan="4" class="text-center text-danger">No unmanaged devices retrieved for {{ vm.currentTenant.name }}.</td></tr><tr ng-repeat="item in vm.tenantDevices | orderBy:\'-created\'" ng-click="vm.editItem(item)"><td><a ng-click="vm.editItem(item)" title="Device detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{ item.macAddress }}</td><td>{{ item.ethernetMacAddress }}</td><td>{{ item.created }}</td><td class="up-{{ item.up}}-background"></td></tr></tbody></table></md-card-content></md-card><md-card ng-if="vm.tenantDevices.length > 10"><md-card-content><div class="col-md-12"><div class="col-sm-3"><md-button class="md-raised" ng-disabled="!vm.devicesPrev" ng-click="vm.paginateCall(false)">Prev</md-button><md-button class="md-raised" ng-disabled="!vm.devicesNext" ng-click="vm.paginateCall(true)">Next</md-button></div></div></md-card-content></md-card></div></md-content></div>'),e.put("app/tenant/tenants-listing.html",'<div ng-controller="TenantsCtrl" ng-init="tenantsCtrl.initialize()" layout="column" ng-cloak=""><md-toolbar class="md-hue-2"><div class="md-toolbar-tools"><h2 class="md-flex"><i class="fa fa-fw fa-group ng-scope"></i> Tenants</h2></div></md-toolbar><md-content><div flex="90" flex-sm="90" flex-xs="90" layout="column"><md-card><md-card-content><div class="row"><div class="col-lg-12"><md-card-actions layout="row"><div class="col-sm-3" style="float: left">{{offset}}<md-button class="md-raised" ng-disabled="tenantsCtrl.is_first_page || tenantsCtrl.loading" ng-click="tenantsCtrl.getTenants(100, tenantsCtrl.offset - 100)">Prev</md-button><md-button class="md-raised" ng-disabled="tenantsCtrl.is_last_page || tenantsCtrl.loading" ng-click="tenantsCtrl.getTenants(100, tenantsCtrl.offset + 100)">Next</md-button></div><div class="col-md-1 col-md-offset-7"><md-button href="#/tenants/add" class="md-raised md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-plus"></i> Add</md-button></div></md-card-actions><table name="tenant-table" class="table table-responsive table-striped"><thead><tr><th></th><th>Name</th><th>Code</th><th>Content Server URL</th><th>Admin email</th></tr></thead><tbody><tr ng-hide="tenantsCtrl.tenants.length"><td class="no-devices text-center text-danger" colspan="5">No tenants</td></tr><tr ng-repeat="item in tenantsCtrl.tenants | orderBy:\'name\'" ng-click="tenantsCtrl.editItem(item)"><td><a ng-click="tenantsCtrl.editItem(item)" title="Tenant detail"><ng-md-icon icon="mode_edit" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"></path><path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></ng-md-icon></a></td><td>{{item.name}}</td><td>{{item.tenant_code}}</td><td>{{item.content_server_url}}</td><td>{{item.admin_email}}</td></tr></tbody></table><md-card-actions layout="row" ng-if="tenantsCtrl.tenants.length > 25"><div class="col-sm-3" style="float: left">{{offset}}<md-button class="md-raised" ng-disabled="tenantsCtrl.is_first_page || tenantsCtrl.loading" ng-click="tenantsCtrl.getTenants(100, tenantsCtrl.offset - 100)">Prev</md-button><md-button class="md-raised" ng-disabled="tenantsCtrl.is_last_page || tenantsCtrl.loading" ng-click="tenantsCtrl.getTenants(100, tenantsCtrl.offset + 100)">Next</md-button></div><div class="col-md-1 col-md-offset-7"><md-button href="#/tenants/add" class="md-raised md-primary md-button md-ink-ripple"><i class="fa fa-fw fa-plus"></i> Add</md-button></div></md-card-actions></div></div></md-card-content></md-card></div></md-content></div>')
}]);
'use strict';var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};var _createClass2=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck2(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}(function(){var app=angular.module('skykitProvisioning',['ngAnimate','ngCookies',//  'ngTouch'
'ngSanitize','restangular','ui.router','hSweetAlert','ui.bootstrap','ncy-angular-breadcrumb','directive.g+signin','ngProgress','datetimepicker','ngMaterial','ngclipboard','toastr','angular-cache']);})();(function(){var app=angular.module('skykitProvisioning',['ngAnimate','ngCookies',//  'ngTouch'
'ngSanitize','restangular','ui.router','hSweetAlert','ui.bootstrap','ncy-angular-breadcrumb','directive.g+signin','ngProgress','datetimepicker','ngMaterial','ngclipboard','toastr','angular-cache']);})();"use strict";(function(){var app=angular.module('skykitProvisioning');app.controller("AdminCtrl",["AdminService", "SessionsService", "ToastsService", "$mdDialog", "DistributorsService", function(AdminService,SessionsService,ToastsService,$mdDialog,DistributorsService){var vm=this;vm.getAllDistributors=function(){vm.loadingAllDistributors=true;var getAllDistributorsPromise=AdminService.getAllDistributors();return getAllDistributorsPromise.then(function(data){vm.loadingAllDistributors=false;return vm.allDistributors=data;});};vm.addUserToDistributor=function(ev,userEmail,distributorAdmin,whichDistributor,form){if(!distributorAdmin){distributorAdmin=false;}var withOrWithout=distributorAdmin?"with":"without";// no option to select distributor is given when there is only one option
if(!whichDistributor){whichDistributor=vm.distributorsAsAdmin[0];}var confirm=$mdDialog.confirm({title:'Are you sure?',textContent:userEmail+" will be added to "+whichDistributor+"\n        "+withOrWithout+" administrator privileges",targetEvent:ev,ok:'Of course!',cancel:'Oops, nevermind.'});return $mdDialog.show(confirm).then(function(){var addUserToDistributorPromise=AdminService.addUserToDistributor(userEmail,whichDistributor,distributorAdmin);addUserToDistributorPromise.then(function(data){ToastsService.showSuccessToast(data.message);vm.user={};form.$setPristine();form.$setUntouched();return setTimeout(function(){return vm.getUsersOfDistributor();},2000);});return addUserToDistributorPromise.catch(function(data){return ToastsService.showErrorToast(data.data.message);});});};vm.makeDistributor=function(ev,distributorName,adminEmail,form){var confirm=$mdDialog.confirm({title:'Are you sure?',textContent:"If you proceed, "+distributorName+" will be created.",targetEvent:ev,ariaLabel:'Lucky day',ok:'Yeah!',cancel:'Forget it.'});return $mdDialog.show(confirm).then(function(){var makeDistributorPromise=AdminService.makeDistributor(distributorName,adminEmail);makeDistributorPromise.then(function(data){vm.distributor={};form.$setPristine();form.$setUntouched();ToastsService.showSuccessToast(data.message);return setTimeout(function(){return vm.allDistributors=vm.getAllDistributors();},2000);});return makeDistributorPromise.catch(function(data){return ToastsService.showErrorToast(data.data.message);});});};vm.getUsersOfDistributor=function(){vm.loadingUsersOfDistributor=true;var currentDistributorKey=SessionsService.getCurrentDistributorKey();var usersofDistributorPromise=AdminService.getUsersOfDistributor(currentDistributorKey);return usersofDistributorPromise.then(function(data){vm.loadingUsersOfDistributor=false;return vm.usersOfDistributor=data;});};vm.switchDistributor=function(distributor){DistributorsService.switchDistributor(distributor);return ToastsService.showSuccessToast("Distributor "+distributor.name+" selected!");};vm.initialize=function(){vm.getUsersOfDistributor();vm.getAllDistributors();vm.isAdmin=SessionsService.getIsAdmin();vm.distributorsAsAdmin=SessionsService.getDistributorsAsAdmin();vm.currentDistributorName=SessionsService.getCurrentDistributorName();if(vm.isAdmin){return vm.getAllDistributors();}};return vm;}]);})();(function(){var app=angular.module('skykitProvisioning');app.controller("AdminCtrl",["AdminService", "SessionsService", "ToastsService", "$mdDialog", "DistributorsService", function(AdminService,SessionsService,ToastsService,$mdDialog,DistributorsService){var vm=this;vm.getAllDistributors=function(){vm.loadingAllDistributors=true;var getAllDistributorsPromise=AdminService.getAllDistributors();return getAllDistributorsPromise.then(function(data){vm.loadingAllDistributors=false;return vm.allDistributors=data;});};vm.addUserToDistributor=function(ev,userEmail,distributorAdmin,whichDistributor,form){if(!distributorAdmin){distributorAdmin=false;}var withOrWithout=distributorAdmin?"with":"without";// no option to select distributor is given when there is only one option
if(!whichDistributor){whichDistributor=vm.distributorsAsAdmin[0];}var confirm=$mdDialog.confirm({title:'Are you sure?',textContent:userEmail+' will be added to '+whichDistributor+'\n        '+withOrWithout+' administrator privileges',targetEvent:ev,ok:'Of course!',cancel:'Oops, nevermind.'});return $mdDialog.show(confirm).then(function(){var addUserToDistributorPromise=AdminService.addUserToDistributor(userEmail,whichDistributor,distributorAdmin);addUserToDistributorPromise.then(function(data){ToastsService.showSuccessToast(data.message);vm.user={};form.$setPristine();form.$setUntouched();return setTimeout(function(){return vm.getUsersOfDistributor();},2000);});return addUserToDistributorPromise.catch(function(data){return ToastsService.showErrorToast(data.data.message);});});};vm.makeDistributor=function(ev,distributorName,adminEmail,form){var confirm=$mdDialog.confirm({title:'Are you sure?',textContent:'If you proceed, '+distributorName+' will be created.',targetEvent:ev,ariaLabel:'Lucky day',ok:'Yeah!',cancel:'Forget it.'});return $mdDialog.show(confirm).then(function(){var makeDistributorPromise=AdminService.makeDistributor(distributorName,adminEmail);makeDistributorPromise.then(function(data){vm.distributor={};form.$setPristine();form.$setUntouched();ToastsService.showSuccessToast(data.message);return setTimeout(function(){return vm.allDistributors=vm.getAllDistributors();},2000);});return makeDistributorPromise.catch(function(data){return ToastsService.showErrorToast(data.data.message);});});};vm.getUsersOfDistributor=function(){vm.loadingUsersOfDistributor=true;var currentDistributorKey=SessionsService.getCurrentDistributorKey();var usersofDistributorPromise=AdminService.getUsersOfDistributor(currentDistributorKey);return usersofDistributorPromise.then(function(data){vm.loadingUsersOfDistributor=false;return vm.usersOfDistributor=data;});};vm.switchDistributor=function(distributor){DistributorsService.switchDistributor(distributor);return ToastsService.showSuccessToast('Distributor '+distributor.name+' selected!');};vm.initialize=function(){vm.getUsersOfDistributor();vm.getAllDistributors();vm.isAdmin=SessionsService.getIsAdmin();vm.distributorsAsAdmin=SessionsService.getDistributorsAsAdmin();vm.currentDistributorName=SessionsService.getCurrentDistributorName();if(vm.isAdmin){return vm.getAllDistributors();}};return vm;}]);})();'use strict';(function(){var app=angular.module('skykitProvisioning');app.controller("AuthenticationCtrl",["$scope", "$log", "$state", "$timeout", "identity", "sweet", "SessionsService", "ProgressBarService", "ProofPlayService", "DevicesService", "TenantsService", function($scope,$log,$state,$timeout,identity,sweet,SessionsService,ProgressBarService,ProofPlayService,DevicesService,TenantsService){var vm=this;vm.onGooglePlusSignInSuccess=function(event,authResult){if(!vm.googlePlusSignInButtonClicked){ProgressBarService.start();}var promise=SessionsService.login(authResult);return promise.then(vm.loginSuccess,vm.loginFailure);};vm.onGooglePlusSignInFailure=function(event,authResult){if(vm.googlePlusSignInButtonClicked){ProgressBarService.complete();return sweet.show('Oops...','Unable to authenticate to Google+.','error');}};$scope.$on('event:google-plus-signin-success',vm.onGooglePlusSignInSuccess);$scope.$on('event:google-plus-signin-failure',vm.onGooglePlusSignInFailure);vm.initializeSignIn=function(){vm.clientId=identity.OAUTH_CLIENT_ID;vm.state=identity.STATE;return vm.googlePlusSignInButtonClicked=false;};vm.initializeSignOut=function(){SessionsService.removeUserInfo();return $timeout(vm.proceedToSignedOut,50);};vm.loginSuccess=function(response){ProgressBarService.complete();ProofPlayService.proofplayCache.removeAll();TenantsService.tenantCache.removeAll();DevicesService.deviceCache.removeAll();DevicesService.deviceByTenantCache.removeAll();return $state.go('distributor_selection');};vm.loginFailure=function(){ProgressBarService.complete();return sweet.show('Oops...','Unable to authenticate to Stormpath.','error');};vm.proceedToSignedOut=function(){return $state.go('signed_out');};vm.proceedToSignIn=function(){return $state.go('sign_in');};vm.onClickGooglePlusSignIn=function(){vm.googlePlusSignInButtonClicked=true;return ProgressBarService.start();};return vm;}]);})();(function(){var app=angular.module('skykitProvisioning');app.controller("AuthenticationCtrl",["$scope", "$log", "$state", "$timeout", "identity", "sweet", "SessionsService", "ProgressBarService", "ProofPlayService", "DevicesService", "TenantsService", function($scope,$log,$state,$timeout,identity,sweet,SessionsService,ProgressBarService,ProofPlayService,DevicesService,TenantsService){var vm=this;vm.onGooglePlusSignInSuccess=function(event,authResult){if(!vm.googlePlusSignInButtonClicked){ProgressBarService.start();}var promise=SessionsService.login(authResult);return promise.then(vm.loginSuccess,vm.loginFailure);};vm.onGooglePlusSignInFailure=function(event,authResult){if(vm.googlePlusSignInButtonClicked){ProgressBarService.complete();return sweet.show('Oops...','Unable to authenticate to Google+.','error');}};$scope.$on('event:google-plus-signin-success',vm.onGooglePlusSignInSuccess);$scope.$on('event:google-plus-signin-failure',vm.onGooglePlusSignInFailure);vm.initializeSignIn=function(){vm.clientId=identity.OAUTH_CLIENT_ID;vm.state=identity.STATE;return vm.googlePlusSignInButtonClicked=false;};vm.initializeSignOut=function(){SessionsService.removeUserInfo();return $timeout(vm.proceedToSignedOut,50);};vm.loginSuccess=function(response){ProgressBarService.complete();ProofPlayService.proofplayCache.removeAll();TenantsService.tenantCache.removeAll();DevicesService.deviceCache.removeAll();DevicesService.deviceByTenantCache.removeAll();return $state.go('distributor_selection');};vm.loginFailure=function(){ProgressBarService.complete();return sweet.show('Oops...','Unable to authenticate to Stormpath.','error');};vm.proceedToSignedOut=function(){return $state.go('signed_out');};vm.proceedToSignIn=function(){return $state.go('sign_in');};vm.onClickGooglePlusSignIn=function(){vm.googlePlusSignInButtonClicked=true;return ProgressBarService.start();};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('AppController',["$mdSidenav", "$state", "$window", "SessionsService", function($mdSidenav,$state,$window,SessionsService){var vm=this;vm.identity={};vm.currentDistributerInDistributerAdminList=function(){var currentDistributorName=SessionsService.getCurrentDistributorName();var distributorsAsAdmin=SessionsService.getDistributorsAsAdmin();return _.contains(distributorsAsAdmin,currentDistributorName);};vm.getIdentity=function(){return vm.identity={key:SessionsService.getUserKey(),email:SessionsService.getUserEmail(),admin:SessionsService.getIsAdmin(),distributor_admin:SessionsService.getDistributorsAsAdmin(),admin_of_current_distributor:vm.currentDistributerInDistributerAdminList(),distributorKey:SessionsService.getCurrentDistributorKey(),distributorName:SessionsService.getCurrentDistributorName()};};vm.isCurrentURLDistributorSelector=function(){var result=void 0;var test=$window.location.href.search(/distributor_selection/);return result=test>=0;};vm.initialize=function(){return vm.getIdentity();};vm.toggleSidenav=function(){return $mdSidenav('left').toggle();};vm.goTo=function(stateName,id){$state.go(stateName,{id:id});if($mdSidenav('left').isOpen()){return $mdSidenav('left').close();}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('AppController',["$mdSidenav", "$state", "$window", "SessionsService", function($mdSidenav,$state,$window,SessionsService){var vm=this;vm.identity={};vm.currentDistributerInDistributerAdminList=function(){var currentDistributorName=SessionsService.getCurrentDistributorName();var distributorsAsAdmin=SessionsService.getDistributorsAsAdmin();return _.contains(distributorsAsAdmin,currentDistributorName);};vm.getIdentity=function(){return vm.identity={key:SessionsService.getUserKey(),email:SessionsService.getUserEmail(),admin:SessionsService.getIsAdmin(),distributor_admin:SessionsService.getDistributorsAsAdmin(),admin_of_current_distributor:vm.currentDistributerInDistributerAdminList(),distributorKey:SessionsService.getCurrentDistributorKey(),distributorName:SessionsService.getCurrentDistributorName()};};vm.isCurrentURLDistributorSelector=function(){var result=void 0;var test=$window.location.href.search(/distributor_selection/);return result=test>=0;};vm.initialize=function(){return vm.getIdentity();};vm.toggleSidenav=function(){return $mdSidenav('left').toggle();};vm.goTo=function(stateName,id){$state.go(stateName,{id:id});if($mdSidenav('left').isOpen()){return $mdSidenav('left').close();}};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsCommandsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", "$timeout", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService,$timeout){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.commandEvents=[];vm.generateLocalFromUTC=function(UTCTime){var localTime=moment.utc(UTCTime).toDate();return localTime=moment(localTime).format('YYYY-MM-DD hh:mm:ss A');};vm.replaceCommandTime=function(issues){for(var i=0;i<issues.length;i++){var each=issues[i];if(each.postedTime){each.postedTime=vm.generateLocalFromUTC(each.postedTime);}if(each.confirmedTime){each.confirmedTime=vm.generateLocalFromUTC(each.confirmedTime);}}return;};// command history tab
vm.getEvents=function(deviceKey,prev,next){ProgressBarService.start();var commandEventsPromise=DevicesService.getCommandEventsByKey(deviceKey,prev,next);return commandEventsPromise.then(function(data){vm.replaceCommandTime(data.events);vm.event_next_cursor=data.next_cursor;vm.event_prev_cursor=data.prev_cursor;vm.commandEvents=data.events;return ProgressBarService.complete();});};vm.getEventsTimeOut=function(deviceKey,prev,next){return $timeout(function(){return vm.getEvents(deviceKey,prev,next);},1000);};vm.commandHistorySelected=function(){return vm.getEvents(vm.deviceKey);};vm.paginateEventCall=function(forward){if(forward){return vm.getEvents(vm.deviceKey,null,vm.event_next_cursor);}else{return vm.getEvents(vm.deviceKey,vm.event_prev_cursor,null);}};vm.initialize=function(){var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});return vm.getEvents(vm.deviceKey);};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};//####################
// Commands Tab
//####################
vm.onResetContent=function(){ProgressBarService.start();var promise=CommandsService.contentDelete(vm.deviceKey);return promise.then(vm.onResetContentSuccess,vm.onResetContentFailure);};vm.onResetContentSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your reset content command into the player's queue.");};vm.onResetContentFailure=function(error){ProgressBarService.complete();$log.error('Reset content command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your reset content command into the player's queue.",'error');};vm.onUpdateContent=function(){ProgressBarService.start();var promise=CommandsService.contentUpdate(vm.deviceKey);return promise.then(vm.onUpdateContentSuccess,vm.onUpdateContentFailure);};vm.onUpdateContentSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your update content command into the player's queue.");};vm.onUpdateContentFailure=function(error){ProgressBarService.complete();$log.error('Content update command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your update content command into the player's queue.",'error');};vm.onResetPlayer=function(){ProgressBarService.start();var promise=CommandsService.reset(vm.deviceKey);return promise.then(vm.onResetPlayerSuccess,vm.onResetPlayerFailure);};vm.onResetPlayerSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your reset player command into the player's queue.");};vm.onResetPlayerFailure=function(error){ProgressBarService.complete();$log.error('Reset player command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your reset player command into the player's queue.",'error');};vm.onPanelOn=function(){ProgressBarService.start();var promise=CommandsService.powerOn(vm.deviceKey);return promise.then(vm.onPanelOnSuccess,vm.onPanelOnFailure);};vm.onPanelOnSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your panel on command into the player's queue.");};vm.onPanelOnFailure=function(error){ProgressBarService.complete();$log.error('Panel on command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your panel on command into the player's queue.",'error');};vm.onPanelOff=function(){ProgressBarService.start();var promise=CommandsService.powerOff(vm.deviceKey);return promise.then(vm.onPanelOffSuccess,vm.onPanelOffFailure);};vm.onPanelOffSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your panel off command into the player's queue.");};vm.onPanelOffFailure=function(error){ProgressBarService.complete();$log.error('Panel off command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your panel off command into the player's queue.",'error');};vm.onUpdateDevice=function(){ProgressBarService.start();var promise=CommandsService.updateDevice(vm.deviceKey);return promise.then(vm.onUpdateDeviceSuccess,vm.onUpdateDeviceFailure);};vm.onUpdateDeviceSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your update device command into the player's queue.");};vm.onUpdateDeviceFailure=function(error){ProgressBarService.complete();$log.error('Update device command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your update device command into the player's queue.",'error');};vm.onVolumeChange=function(){ProgressBarService.start();var promise=CommandsService.volume(vm.deviceKey,vm.currentDevice.volume);return promise.then(vm.onVolumeChangeSuccess(vm.currentDevice.volume),vm.onVolumeChangeFailure);};vm.onVolumeChangeSuccess=function(level){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast('We posted your volume change command of '+level+' into the player\'s queue.');};vm.onVolumeChangeFailure=function(error){ProgressBarService.complete();$log.error('Volume change command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your volume change command into the player's queue.",'error');};vm.onCustomCommand=function(){ProgressBarService.start();var promise=CommandsService.custom(vm.deviceKey,vm.currentDevice.custom);return promise.then(vm.onCustomCommandSuccess(vm.currentDevice.custom),vm.onCustomCommandFailure);};vm.onCustomCommandSuccess=function(command){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast('We posted your custom command \''+command+'\' into the player\'s queue.');};vm.onCustomCommandFailure=function(error){ProgressBarService.complete();$log.error('Custom command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your custom command into the player's queue.",'error');};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsCommandsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", "$timeout", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService,$timeout){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.commandEvents=[];vm.generateLocalFromUTC=function(UTCTime){var localTime=moment.utc(UTCTime).toDate();return localTime=moment(localTime).format('YYYY-MM-DD hh:mm:ss A');};vm.replaceCommandTime=function(issues){for(var i=0;i<issues.length;i++){var each=issues[i];if(each.postedTime){each.postedTime=vm.generateLocalFromUTC(each.postedTime);}if(each.confirmedTime){each.confirmedTime=vm.generateLocalFromUTC(each.confirmedTime);}}return;};// command history tab
vm.getEvents=function(deviceKey,prev,next){ProgressBarService.start();var commandEventsPromise=DevicesService.getCommandEventsByKey(deviceKey,prev,next);return commandEventsPromise.then(function(data){vm.replaceCommandTime(data.events);vm.event_next_cursor=data.next_cursor;vm.event_prev_cursor=data.prev_cursor;vm.commandEvents=data.events;return ProgressBarService.complete();});};vm.getEventsTimeOut=function(deviceKey,prev,next){return $timeout(function(){return vm.getEvents(deviceKey,prev,next);},1000);};vm.commandHistorySelected=function(){return vm.getEvents(vm.deviceKey);};vm.paginateEventCall=function(forward){if(forward){return vm.getEvents(vm.deviceKey,null,vm.event_next_cursor);}else{return vm.getEvents(vm.deviceKey,vm.event_prev_cursor,null);}};vm.initialize=function(){var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});return vm.getEvents(vm.deviceKey);};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};//####################
// Commands Tab
//####################
vm.onResetContent=function(){ProgressBarService.start();var promise=CommandsService.contentDelete(vm.deviceKey);return promise.then(vm.onResetContentSuccess,vm.onResetContentFailure);};vm.onResetContentSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your reset content command into the player's queue.");};vm.onResetContentFailure=function(error){ProgressBarService.complete();$log.error('Reset content command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your reset content command into the player's queue.",'error');};vm.onUpdateContent=function(){ProgressBarService.start();var promise=CommandsService.contentUpdate(vm.deviceKey);return promise.then(vm.onUpdateContentSuccess,vm.onUpdateContentFailure);};vm.onUpdateContentSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your update content command into the player's queue.");};vm.onUpdateContentFailure=function(error){ProgressBarService.complete();$log.error('Content update command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your update content command into the player's queue.",'error');};vm.onResetPlayer=function(){ProgressBarService.start();var promise=CommandsService.reset(vm.deviceKey);return promise.then(vm.onResetPlayerSuccess,vm.onResetPlayerFailure);};vm.onResetPlayerSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your reset player command into the player's queue.");};vm.onResetPlayerFailure=function(error){ProgressBarService.complete();$log.error('Reset player command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your reset player command into the player's queue.",'error');};vm.onPanelOn=function(){ProgressBarService.start();var promise=CommandsService.powerOn(vm.deviceKey);return promise.then(vm.onPanelOnSuccess,vm.onPanelOnFailure);};vm.onPanelOnSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your panel on command into the player's queue.");};vm.onPanelOnFailure=function(error){ProgressBarService.complete();$log.error('Panel on command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your panel on command into the player's queue.",'error');};vm.onPanelOff=function(){ProgressBarService.start();var promise=CommandsService.powerOff(vm.deviceKey);return promise.then(vm.onPanelOffSuccess,vm.onPanelOffFailure);};vm.onPanelOffSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your panel off command into the player's queue.");};vm.onPanelOffFailure=function(error){ProgressBarService.complete();$log.error('Panel off command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your panel off command into the player's queue.",'error');};vm.onUpdateDevice=function(){ProgressBarService.start();var promise=CommandsService.updateDevice(vm.deviceKey);return promise.then(vm.onUpdateDeviceSuccess,vm.onUpdateDeviceFailure);};vm.onUpdateDeviceSuccess=function(){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast("We posted your update device command into the player's queue.");};vm.onUpdateDeviceFailure=function(error){ProgressBarService.complete();$log.error('Update device command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your update device command into the player's queue.",'error');};vm.onVolumeChange=function(){ProgressBarService.start();var promise=CommandsService.volume(vm.deviceKey,vm.currentDevice.volume);return promise.then(vm.onVolumeChangeSuccess(vm.currentDevice.volume),vm.onVolumeChangeFailure);};vm.onVolumeChangeSuccess=function(level){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast('We posted your volume change command of '+level+' into the player\'s queue.');};vm.onVolumeChangeFailure=function(error){ProgressBarService.complete();$log.error('Volume change command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your volume change command into the player's queue.",'error');};vm.onCustomCommand=function(){ProgressBarService.start();var promise=CommandsService.custom(vm.deviceKey,vm.currentDevice.custom);return promise.then(vm.onCustomCommandSuccess(vm.currentDevice.custom),vm.onCustomCommandFailure);};vm.onCustomCommandSuccess=function(command){ProgressBarService.complete();vm.getEventsTimeOut(vm.deviceKey);return ToastsService.showSuccessToast('We posted your custom command \''+command+'\' into the player\'s queue.');};vm.onCustomCommandFailure=function(error){ProgressBarService.complete();$log.error('Custom command error: '+error.status+' '+error.statusText);return sweet.show('Oops...',"We were unable to post your custom command into the player's queue.",'error');};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsEventsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.dayRange=30;vm.issues=[];vm.pickerOptions="{widgetPositioning: {vertical:'bottom'}, showTodayButton: true, sideBySide: true, icons:{ next:'glyphicon glyphicon-arrow-right', previous:'glyphicon glyphicon-arrow-left',  up:'glyphicon glyphicon-arrow-up', down:'glyphicon glyphicon-arrow-down'}}";var now=new Date();var today=new Date(now.getFullYear(),now.getMonth(),now.getDate());vm.endTime=now.toLocaleString().replace(/,/g,"");today.setDate(now.getDate()-vm.dayRange);vm.startTime=today.toLocaleString().replace(/,/g,"");vm.generateLocalFromUTC=function(UTCTime){var localTime=moment.utc(UTCTime).toDate();return localTime=moment(localTime).format('YYYY-MM-DD hh:mm:ss A');};vm.replaceIssueTime=function(issues){for(var i=0;i<issues.length;i++){var each=issues[i];if(each.created){each.created=vm.generateLocalFromUTC(each.created);}if(each.updated){each.updated=vm.generateLocalFromUTC(each.updated);}}return;};vm.getIssues=function(device,epochStart,epochEnd,prev,next){ProgressBarService.start();var issuesPromise=DevicesService.getIssuesByKey(device,epochStart,epochEnd,prev,next);return issuesPromise.then(function(data){vm.replaceIssueTime(data.issues);vm.issues=data.issues;vm.prev_cursor=data.prev;vm.next_cursor=data.next;return ProgressBarService.complete();});};vm.paginateCall=function(forward){if(forward){return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd,null,vm.next_cursor);}else{return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd,vm.prev_cursor,null);}};vm.initialize=function(){vm.epochStart=moment(new Date(vm.startTime)).unix();vm.epochEnd=moment(new Date(vm.endTime)).unix();var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd);};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};vm.onClickRefreshButton=function(){ProgressBarService.start();vm.epochStart=moment(new Date(vm.startTime)).unix();vm.epochEnd=moment(new Date(vm.endTime)).unix();vm.prev_cursor=null;vm.next_cursor=null;var issuesPromise=DevicesService.getIssuesByKey(vm.deviceKey,vm.epochStart,vm.epochEnd,vm.prev_cursor,vm.next_cursor);return issuesPromise.then(function(data){return vm.onRefreshIssuesSuccess(data);},function(error){return vm.onRefreshIssuesFailure(error);});};vm.onRefreshIssuesSuccess=function(data){vm.replaceIssueTime(data.issues);vm.issues=data.issues;vm.prev_cursor=data.prev;vm.next_cursor=data.next;return ProgressBarService.complete();};vm.onRefreshIssuesFailure=function(error){ProgressBarService.complete();ToastsService.showInfoToast('We were unable to refresh the device issues list at this time.');return $log.error('Failure to refresh device issues: '+error.status+' '+error.statusText);};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsEventsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.dayRange=30;vm.issues=[];vm.pickerOptions="{widgetPositioning: {vertical:'bottom'}, showTodayButton: true, sideBySide: true, icons:{ next:'glyphicon glyphicon-arrow-right', previous:'glyphicon glyphicon-arrow-left',  up:'glyphicon glyphicon-arrow-up', down:'glyphicon glyphicon-arrow-down'}}";var now=new Date();var today=new Date(now.getFullYear(),now.getMonth(),now.getDate());vm.endTime=now.toLocaleString().replace(/,/g,"");today.setDate(now.getDate()-vm.dayRange);vm.startTime=today.toLocaleString().replace(/,/g,"");vm.generateLocalFromUTC=function(UTCTime){var localTime=moment.utc(UTCTime).toDate();return localTime=moment(localTime).format('YYYY-MM-DD hh:mm:ss A');};vm.replaceIssueTime=function(issues){for(var i=0;i<issues.length;i++){var each=issues[i];if(each.created){each.created=vm.generateLocalFromUTC(each.created);}if(each.updated){each.updated=vm.generateLocalFromUTC(each.updated);}}return;};vm.getIssues=function(device,epochStart,epochEnd,prev,next){ProgressBarService.start();var issuesPromise=DevicesService.getIssuesByKey(device,epochStart,epochEnd,prev,next);return issuesPromise.then(function(data){vm.replaceIssueTime(data.issues);vm.issues=data.issues;vm.prev_cursor=data.prev;vm.next_cursor=data.next;return ProgressBarService.complete();});};vm.paginateCall=function(forward){if(forward){return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd,null,vm.next_cursor);}else{return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd,vm.prev_cursor,null);}};vm.initialize=function(){vm.epochStart=moment(new Date(vm.startTime)).unix();vm.epochEnd=moment(new Date(vm.endTime)).unix();var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});return vm.getIssues(vm.deviceKey,vm.epochStart,vm.epochEnd);};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};vm.onClickRefreshButton=function(){ProgressBarService.start();vm.epochStart=moment(new Date(vm.startTime)).unix();vm.epochEnd=moment(new Date(vm.endTime)).unix();vm.prev_cursor=null;vm.next_cursor=null;var issuesPromise=DevicesService.getIssuesByKey(vm.deviceKey,vm.epochStart,vm.epochEnd,vm.prev_cursor,vm.next_cursor);return issuesPromise.then(function(data){return vm.onRefreshIssuesSuccess(data);},function(error){return vm.onRefreshIssuesFailure(error);});};vm.onRefreshIssuesSuccess=function(data){vm.replaceIssueTime(data.issues);vm.issues=data.issues;vm.prev_cursor=data.prev;vm.next_cursor=data.next;return ProgressBarService.complete();};vm.onRefreshIssuesFailure=function(error){ProgressBarService.complete();ToastsService.showInfoToast('We were unable to refresh the device issues list at this time.');return $log.error('Failure to refresh device issues: '+error.status+' '+error.statusText);};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsPropertiesCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.initialize=function(){vm.panelModels=DevicesService.getPanelModels();vm.panelInputs=DevicesService.getPanelInputs();var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);return devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';vm.backUrlText='Back to tenant managed devices';}}var locationsPromise=LocationsService.getLocationsByTenantKey(vm.tenantKey);return locationsPromise.then(function(data){vm.locations=data;return vm.setSelectedLocationOptions();});};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};vm.setSelectedLocationOptions=function(){if(vm.currentDevice.panelModel===null){vm.currentDevice.panelModel=vm.panelModels[0];vm.currentDevice.panelInput=vm.panelInputs[0];}else{for(var i=0;i<vm.panelModels.length;i++){var panelModel=vm.panelModels[i];if(panelModel.id===vm.currentDevice.panelModel){vm.currentDevice.panelModel=panelModel;}}for(var j=0;j<vm.panelInputs.length;j++){var panelInput=vm.panelInputs[j];var isParent=panelInput.parentId===vm.currentDevice.panelModel.id;if(isParent&&panelInput.id.toLowerCase()===vm.currentDevice.panelInput){vm.currentDevice.panelInput=panelInput;}}}if(vm.currentDevice.locationKey!==null){for(var k=0;k<vm.locations.length;k++){var location=vm.locations[k];if(location.key===vm.currentDevice.locationKey){vm.currentDevice.location=location;}}return;}};vm.onSaveDevice=function(){ProgressBarService.start();if(vm.currentDevice.location!==undefined&&vm.currentDevice.location.key!==undefined){vm.currentDevice.locationKey=vm.currentDevice.location.key;}if(vm.currentDevice.panelModel.id!==undefined&&vm.currentDevice.panelModel.id!=='None'){vm.currentDevice.panelModelNumber=vm.currentDevice.panelModel.id;}if(vm.currentDevice.panelInput.id!==undefined&&vm.currentDevice.panelInput.id!=='None'){vm.currentDevice.panelSerialInput=vm.currentDevice.panelInput.id.toLowerCase();}vm.currentDevice.timezone=vm.selectedTimezone;var promise=DevicesService.save(vm.currentDevice);return promise.then(vm.onSuccessDeviceSave,vm.onFailureDeviceSave);};vm.onSuccessDeviceSave=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your update.');};vm.onFailureDeviceSave=function(error){ProgressBarService.complete();if(error.status===409){$log.info('Failure saving device. Customer display code already exists for tenant: '+error.status+' '+error.statusText);return sweet.show('Oops...','This customer display code already exists for this tenant. Please choose another.','error');}else{$log.error('Failure saving device: '+error.status+' '+error.statusText);return ToastsService.showErrorToast('Oops. We were unable to save your updates to this device at this time.');}};vm.confirmDeviceDelete=function(event,key){var confirm=$mdDialog.confirm({title:'Are you sure to delete this device?',textContent:'Please remember, you MUST remove this device from Content Manager before deleting it from Provisioning.',targetEvent:event,ok:'Delete',cancel:'Cancel'});var showPromise=$mdDialog.show(confirm);var success=function success(){return vm.onConfirmDelete(key);};var failure=function failure(){return vm.onConfirmCancel();};return showPromise.then(success,failure);};vm.onConfirmDelete=function(key){var success=function success(){ToastsService.showSuccessToast('We processed your delete request.');return $state.go('devices');};var failure=function failure(error){var friendlyMessage='We were unable to complete your delete request at this time.';ToastsService.showErrorToast(friendlyMessage);return $log.error('Delete device failure for device_key '+key+': '+error.status+' '+error.statusText);};var deletePromise=DevicesService.delete(key);return deletePromise.then(success,failure);};vm.onConfirmCancel=function(){return ToastsService.showInfoToast('We canceled your delete request.');};vm.onProofOfPlayLoggingCheck=function(){if(vm.currentDevice.proofOfPlayLogging){var noLocation=vm.currentDevice.locationKey===null;var noDisplayCode=vm.currentDevice.customerDisplayCode===null;if(noLocation){sweet.show('Oops...',"You must have a Location to enable Proof of play.",'error');return vm.currentDevice.proofOfPlayLogging=false;}else if(noDisplayCode){sweet.show('Oops...',"You must have a Display code to enable Proof of play.",'error');return vm.currentDevice.proofOfPlayLogging=false;}else{return vm.onSaveDevice();}}else{return vm.onSaveDevice();}};vm.autoGenerateCustomerDisplayCode=function(){var newDisplayCode='';if(vm.currentDevice.customerDisplayName){newDisplayCode=vm.currentDevice.customerDisplayName.toLowerCase();newDisplayCode=newDisplayCode.replace(/\s+/g,'_');newDisplayCode=newDisplayCode.replace(/\W+/g,'');}return vm.currentDevice.customerDisplayCode=newDisplayCode;};vm.logglyForUser=function(){var userDomain=SessionsService.getUserEmail().split("@")[1];return userDomain==="demo.agosto.com"||userDomain==="agosto.com";};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsPropertiesCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.initialize=function(){vm.panelModels=DevicesService.getPanelModels();vm.panelInputs=DevicesService.getPanelInputs();var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);return devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';vm.backUrlText='Back to tenant managed devices';}}var locationsPromise=LocationsService.getLocationsByTenantKey(vm.tenantKey);return locationsPromise.then(function(data){vm.locations=data;return vm.setSelectedLocationOptions();});};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};vm.setSelectedLocationOptions=function(){if(vm.currentDevice.panelModel===null){vm.currentDevice.panelModel=vm.panelModels[0];vm.currentDevice.panelInput=vm.panelInputs[0];}else{for(var i=0;i<vm.panelModels.length;i++){var panelModel=vm.panelModels[i];if(panelModel.id===vm.currentDevice.panelModel){vm.currentDevice.panelModel=panelModel;}}for(var j=0;j<vm.panelInputs.length;j++){var panelInput=vm.panelInputs[j];var isParent=panelInput.parentId===vm.currentDevice.panelModel.id;if(isParent&&panelInput.id.toLowerCase()===vm.currentDevice.panelInput){vm.currentDevice.panelInput=panelInput;}}}if(vm.currentDevice.locationKey!==null){for(var k=0;k<vm.locations.length;k++){var location=vm.locations[k];if(location.key===vm.currentDevice.locationKey){vm.currentDevice.location=location;}}return;}};vm.onSaveDevice=function(){ProgressBarService.start();if(vm.currentDevice.location!==undefined&&vm.currentDevice.location.key!==undefined){vm.currentDevice.locationKey=vm.currentDevice.location.key;}if(vm.currentDevice.panelModel.id!==undefined&&vm.currentDevice.panelModel.id!=='None'){vm.currentDevice.panelModelNumber=vm.currentDevice.panelModel.id;}if(vm.currentDevice.panelInput.id!==undefined&&vm.currentDevice.panelInput.id!=='None'){vm.currentDevice.panelSerialInput=vm.currentDevice.panelInput.id.toLowerCase();}vm.currentDevice.timezone=vm.selectedTimezone;var promise=DevicesService.save(vm.currentDevice);return promise.then(vm.onSuccessDeviceSave,vm.onFailureDeviceSave);};vm.onSuccessDeviceSave=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your update.');};vm.onFailureDeviceSave=function(error){ProgressBarService.complete();if(error.status===409){$log.info('Failure saving device. Customer display code already exists for tenant: '+error.status+' '+error.statusText);return sweet.show('Oops...','This customer display code already exists for this tenant. Please choose another.','error');}else{$log.error('Failure saving device: '+error.status+' '+error.statusText);return ToastsService.showErrorToast('Oops. We were unable to save your updates to this device at this time.');}};vm.confirmDeviceDelete=function(event,key){var confirm=$mdDialog.confirm({title:'Are you sure to delete this device?',textContent:'Please remember, you MUST remove this device from Content Manager before deleting it from Provisioning.',targetEvent:event,ok:'Delete',cancel:'Cancel'});var showPromise=$mdDialog.show(confirm);var success=function success(){return vm.onConfirmDelete(key);};var failure=function failure(){return vm.onConfirmCancel();};return showPromise.then(success,failure);};vm.onConfirmDelete=function(key){var success=function success(){ToastsService.showSuccessToast('We processed your delete request.');return $state.go('devices');};var failure=function failure(error){var friendlyMessage='We were unable to complete your delete request at this time.';ToastsService.showErrorToast(friendlyMessage);return $log.error('Delete device failure for device_key '+key+': '+error.status+' '+error.statusText);};var deletePromise=DevicesService.delete(key);return deletePromise.then(success,failure);};vm.onConfirmCancel=function(){return ToastsService.showInfoToast('We canceled your delete request.');};vm.onProofOfPlayLoggingCheck=function(){if(vm.currentDevice.proofOfPlayLogging){var noLocation=vm.currentDevice.locationKey===null;var noDisplayCode=vm.currentDevice.customerDisplayCode===null;if(noLocation){sweet.show('Oops...',"You must have a Location to enable Proof of play.",'error');return vm.currentDevice.proofOfPlayLogging=false;}else if(noDisplayCode){sweet.show('Oops...',"You must have a Display code to enable Proof of play.",'error');return vm.currentDevice.proofOfPlayLogging=false;}else{return vm.onSaveDevice();}}else{return vm.onSaveDevice();}};vm.autoGenerateCustomerDisplayCode=function(){var newDisplayCode='';if(vm.currentDevice.customerDisplayName){newDisplayCode=vm.currentDevice.customerDisplayName.toLowerCase();newDisplayCode=newDisplayCode.replace(/\s+/g,'_');newDisplayCode=newDisplayCode.replace(/\W+/g,'');}return vm.currentDevice.customerDisplayCode=newDisplayCode;};vm.logglyForUser=function(){var userDomain=SessionsService.getUserEmail().split("@")[1];return userDomain==="demo.agosto.com"||userDomain==="agosto.com";};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.copyDeviceKey=function(){return ToastsService.showSuccessToast('Device key has been copied to your clipboard');};vm.initialize=function(){var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);return devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DeviceDetailsCtrl',["$log", "$stateParams", "$state", "SessionsService", "DevicesService", "LocationsService", "CommandsService", "TimezonesService", "sweet", "ProgressBarService", "$mdDialog", "ToastsService", function($log,$stateParams,$state,SessionsService,DevicesService,LocationsService,CommandsService,TimezonesService,sweet,ProgressBarService,$mdDialog,ToastsService){var vm=this;vm.tenantKey=$stateParams.tenantKey;vm.deviceKey=$stateParams.deviceKey;vm.fromDevices=$stateParams.fromDevices==="true";vm.currentDevice={};vm.copyDeviceKey=function(){return ToastsService.showSuccessToast('Device key has been copied to your clipboard');};vm.initialize=function(){var devicePromise=DevicesService.getDeviceByKey(vm.deviceKey);return devicePromise.then(function(response){return vm.onGetDeviceSuccess(response);},function(response){return vm.onGetDeviceFailure(response);});};vm.onGetDeviceSuccess=function(response){vm.currentDevice=response;if(response.timezone!==vm.selectedTimezone){vm.selectedTimezone=response.timezone;}if(vm.tenantKey===undefined){vm.tenantKey=vm.currentDevice.tenantKey;}if($stateParams.fromDevices==="true"){vm.backUrl='/#/devices';return vm.backUrlText='Back to devices';}else{if(vm.currentDevice.isUnmanagedDevice===true){vm.backUrl='/#/tenants/'+vm.tenantKey+'/unmanaged';return vm.backUrlText='Back to tenant unmanaged devices';}else{vm.backUrl='/#/tenants/'+vm.tenantKey+'/managed';return vm.backUrlText='Back to tenant managed devices';}}};vm.onGetDeviceFailure=function(response){ToastsService.showErrorToast('Oops. We were unable to fetch the details for this device at this time.');var errorMessage='No detail for device_key #'+vm.deviceKey+'. Error: '+response.status+' '+response.statusText;$log.error(errorMessage);return $state.go('devices');};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DevicesListingCtrl',["$stateParams", "$log", "DevicesService", "$state", "SessionsService", "ProgressBarService", "sweet", function($stateParams,$log,DevicesService,$state,SessionsService,ProgressBarService,sweet){var vm=this;vm.distributorKey=undefined;//####################################
// Managed
//####################################
vm.devices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="Serial Number";vm.serialDevices={};vm.disabled=true;vm.macDevices={};//####################################
// Unmanaged
//####################################
vm.unmanagedSelectedButton="MAC";vm.unmanagedSerialDevices={};vm.unmanagedDisabled=true;vm.unmanagedDevicesPrev=null;vm.unmanagedDevicesNext=null;vm.unmanagedDevices=[];vm.unmanagedMacDevices={};vm.refreshManagedDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;DevicesService.deviceCache.removeAll();return vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,vm.devicesNext);};vm.refreshUnmanagedDevices=function(){vm.unmanagedDevicesPrev=null;vm.unmanagedDevicesNext=null;DevicesService.deviceCache.removeAll();return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,vm.unmanagedDevicesNext);};vm.changeRadio=function(unmanaged){if(unmanaged){vm.unmanagedSearchText='';vm.unmanagedDisabled=true;vm.unmanagedSerialDevices={};return vm.unmanagedMacDevices={};}else{vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};}};vm.convertArrayToDictionary=function(theArray,mac){var devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){devices[item.mac]=item;}else{devices[item.serial]=item;}}return devices;};vm.prepareForEditView=function(unmanaged,searchText){if(unmanaged){var mac=vm.unmanagedSelectedButton==="MAC";if(mac){return vm.editItem(vm.unmanagedMacDevices[searchText]);}else{return vm.editItem(vm.unmanagedSerialDevices[searchText]);}}else{var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}}};vm.controlOpenButton=function(unmanaged,isMatch){if(!unmanaged){vm.disabled=!isMatch;return vm.disabledButtonLoading=false;}else{vm.unmanagedDisabled=!isMatch;return vm.unmanagedDisabledButtonLoading=false;}};vm.isResourceValid=function(unmanaged,resource){if(resource){if(resource.length>2){if(unmanaged){var mac=vm.unmanagedSelectedButton==="MAC";vm.unmanagedDisabledButtonLoading=true;}else{var mac=vm.selectedButton==="MAC";vm.disabledButtonLoading=true;}if(mac){return DevicesService.matchDevicesByFullMac(vm.distributorKey,resource,unmanaged).then(function(res){return vm.controlOpenButton(unmanaged,res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerial(vm.distributorKey,resource,unmanaged).then(function(res){return vm.controlOpenButton(unmanaged,res["is_match"]);});}}else{return vm.controlOpenButton(unmanaged,false);}}else{return vm.controlOpenButton(unmanaged,false);}};vm.searchDevices=function(unmanaged,partial){if(partial){if(partial.length>2){if(unmanaged){var button=vm.unmanagedSelectedButton;}else{var button=vm.selectedButton;}if(button==="Serial Number"){return DevicesService.searchDevicesByPartialSerial(vm.distributorKey,partial,unmanaged).then(function(res){var result=res["serial_number_matches"];if(unmanaged){vm.unmanagedSerialDevices=vm.convertArrayToDictionary(result,false);}else{vm.serialDevices=vm.convertArrayToDictionary(result,false);}var serialsOfMatchedDevices=[];for(var i=0;i<result.length;i++){var each=result[i];serialsOfMatchedDevices.push(each.serial);}return serialsOfMatchedDevices;});}else{return DevicesService.searchDevicesByPartialMac(vm.distributorKey,partial,unmanaged).then(function(res){var result=res["mac_matches"];if(unmanaged){vm.unmanagedMacDevices=vm.convertArrayToDictionary(result,true);}else{vm.macDevices=vm.convertArrayToDictionary(result,true);}var macMatchesMacAddresses=[];for(var i=0;i<result.length;i++){var each=result[i];macMatchesMacAddresses.push(each.mac);}return macMatchesMacAddresses;});}}else{return[];}}else{return[];}};vm.getManagedDevices=function(key,prev,next){ProgressBarService.start();var devicesPromise=DevicesService.getDevicesByDistributor(key,prev,next);return devicesPromise.then(function(response){vm.devices=response.devices;vm.devicesNext=response.next_cursor;vm.devicesPrev=response.prev_cursor;return vm.getFetchSuccess();},function(response){return vm.getFetchFailure(response);});};vm.getUnmanagedDevices=function(key,prev,next){ProgressBarService.start();var unmanagedDevicesPromise=DevicesService.getUnmanagedDevicesByDistributor(key,prev,next);return unmanagedDevicesPromise.then(function(response){vm.unmanagedDevices=response.devices;vm.unmanagedDevicesPrev=response.prev_cursor;vm.unmanagedDevicesNext=response.next_cursor;return vm.getFetchSuccess();},function(response){return vm.getFetchFailure(response);});};vm.initialize=function(){vm.distributorKey=SessionsService.getCurrentDistributorKey();vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,vm.devicesNext);return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,vm.unmanagedDevicesNext);};vm.getFetchSuccess=function(){return ProgressBarService.complete();};vm.getFetchFailure=function(response){ProgressBarService.complete();var errorMessage='Unable to fetch devices. Error: '+response.status+' '+response.statusText+'.';return sweet.show('Oops...',errorMessage,'error');};vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:item.tenantKey,fromDevices:true});};vm.paginateCall=function(forward,managed){if(forward){if(managed){vm.getManagedDevices(vm.distributorKey,null,vm.devicesNext);}if(!managed){vm.getUnmanagedDevices(vm.distributorKey,null,vm.unmanagedDevicesNext);}}if(!forward){if(managed){vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,null);}if(!managed){return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,null);}}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DevicesListingCtrl',["$stateParams", "$log", "DevicesService", "$state", "SessionsService", "ProgressBarService", "sweet", function($stateParams,$log,DevicesService,$state,SessionsService,ProgressBarService,sweet){var vm=this;vm.distributorKey=undefined;//####################################
// Managed
//####################################
vm.devices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="Serial Number";vm.serialDevices={};vm.disabled=true;vm.macDevices={};//####################################
// Unmanaged
//####################################
vm.unmanagedSelectedButton="MAC";vm.unmanagedSerialDevices={};vm.unmanagedDisabled=true;vm.unmanagedDevicesPrev=null;vm.unmanagedDevicesNext=null;vm.unmanagedDevices=[];vm.unmanagedMacDevices={};vm.refreshManagedDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;DevicesService.deviceCache.removeAll();return vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,vm.devicesNext);};vm.refreshUnmanagedDevices=function(){vm.unmanagedDevicesPrev=null;vm.unmanagedDevicesNext=null;DevicesService.deviceCache.removeAll();return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,vm.unmanagedDevicesNext);};vm.changeRadio=function(unmanaged){if(unmanaged){vm.unmanagedSearchText='';vm.unmanagedDisabled=true;vm.unmanagedSerialDevices={};return vm.unmanagedMacDevices={};}else{vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};}};vm.convertArrayToDictionary=function(theArray,mac){var devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){devices[item.mac]=item;}else{devices[item.serial]=item;}}return devices;};vm.prepareForEditView=function(unmanaged,searchText){if(unmanaged){var mac=vm.unmanagedSelectedButton==="MAC";if(mac){return vm.editItem(vm.unmanagedMacDevices[searchText]);}else{return vm.editItem(vm.unmanagedSerialDevices[searchText]);}}else{var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}}};vm.controlOpenButton=function(unmanaged,isMatch){if(!unmanaged){vm.disabled=!isMatch;return vm.disabledButtonLoading=false;}else{vm.unmanagedDisabled=!isMatch;return vm.unmanagedDisabledButtonLoading=false;}};vm.isResourceValid=function(unmanaged,resource){if(resource){if(resource.length>2){if(unmanaged){var mac=vm.unmanagedSelectedButton==="MAC";vm.unmanagedDisabledButtonLoading=true;}else{var mac=vm.selectedButton==="MAC";vm.disabledButtonLoading=true;}if(mac){return DevicesService.matchDevicesByFullMac(vm.distributorKey,resource,unmanaged).then(function(res){return vm.controlOpenButton(unmanaged,res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerial(vm.distributorKey,resource,unmanaged).then(function(res){return vm.controlOpenButton(unmanaged,res["is_match"]);});}}else{return vm.controlOpenButton(unmanaged,false);}}else{return vm.controlOpenButton(unmanaged,false);}};vm.searchDevices=function(unmanaged,partial){if(partial){if(partial.length>2){if(unmanaged){var button=vm.unmanagedSelectedButton;}else{var button=vm.selectedButton;}if(button==="Serial Number"){return DevicesService.searchDevicesByPartialSerial(vm.distributorKey,partial,unmanaged).then(function(res){var result=res["serial_number_matches"];if(unmanaged){vm.unmanagedSerialDevices=vm.convertArrayToDictionary(result,false);}else{vm.serialDevices=vm.convertArrayToDictionary(result,false);}var serialsOfMatchedDevices=[];for(var i=0;i<result.length;i++){var each=result[i];serialsOfMatchedDevices.push(each.serial);}return serialsOfMatchedDevices;});}else{return DevicesService.searchDevicesByPartialMac(vm.distributorKey,partial,unmanaged).then(function(res){var result=res["mac_matches"];if(unmanaged){vm.unmanagedMacDevices=vm.convertArrayToDictionary(result,true);}else{vm.macDevices=vm.convertArrayToDictionary(result,true);}var macMatchesMacAddresses=[];for(var i=0;i<result.length;i++){var each=result[i];macMatchesMacAddresses.push(each.mac);}return macMatchesMacAddresses;});}}else{return[];}}else{return[];}};vm.getManagedDevices=function(key,prev,next){ProgressBarService.start();var devicesPromise=DevicesService.getDevicesByDistributor(key,prev,next);return devicesPromise.then(function(response){vm.devices=response.devices;vm.devicesNext=response.next_cursor;vm.devicesPrev=response.prev_cursor;return vm.getFetchSuccess();},function(response){return vm.getFetchFailure(response);});};vm.getUnmanagedDevices=function(key,prev,next){ProgressBarService.start();var unmanagedDevicesPromise=DevicesService.getUnmanagedDevicesByDistributor(key,prev,next);return unmanagedDevicesPromise.then(function(response){vm.unmanagedDevices=response.devices;vm.unmanagedDevicesPrev=response.prev_cursor;vm.unmanagedDevicesNext=response.next_cursor;return vm.getFetchSuccess();},function(response){return vm.getFetchFailure(response);});};vm.initialize=function(){vm.distributorKey=SessionsService.getCurrentDistributorKey();vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,vm.devicesNext);return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,vm.unmanagedDevicesNext);};vm.getFetchSuccess=function(){return ProgressBarService.complete();};vm.getFetchFailure=function(response){ProgressBarService.complete();var errorMessage='Unable to fetch devices. Error: '+response.status+' '+response.statusText+'.';return sweet.show('Oops...',errorMessage,'error');};vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:item.tenantKey,fromDevices:true});};vm.paginateCall=function(forward,managed){if(forward){if(managed){vm.getManagedDevices(vm.distributorKey,null,vm.devicesNext);}if(!managed){vm.getUnmanagedDevices(vm.distributorKey,null,vm.unmanagedDevicesNext);}}if(!forward){if(managed){vm.getManagedDevices(vm.distributorKey,vm.devicesPrev,null);}if(!managed){return vm.getUnmanagedDevices(vm.distributorKey,vm.unmanagedDevicesPrev,null);}}};return vm;}]);})();"use strict";(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DistributorSelectorCtrl",["$log", "$state", "DistributorsService", "SessionsService", function($log,$state,DistributorsService,SessionsService){var vm=this;vm.distributors=[];vm.currentDistributor=undefined;vm.loading=true;vm.initialize=function(){vm.loading=true;var distributorsPromise=DistributorsService.fetchAllByUser(SessionsService.getUserKey());return distributorsPromise.then(function(data){vm.distributors=data;if(vm.distributors.length===1){return vm.selectDistributor(vm.distributors[0]);}else{return vm.loading=false;}});};vm.selectDistributor=function(distributor){return DistributorsService.switchDistributor(distributor);};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DistributorSelectorCtrl",["$log", "$state", "DistributorsService", "SessionsService", function($log,$state,DistributorsService,SessionsService){var vm=this;vm.distributors=[];vm.currentDistributor=undefined;vm.loading=true;vm.initialize=function(){vm.loading=true;var distributorsPromise=DistributorsService.fetchAllByUser(SessionsService.getUserKey());return distributorsPromise.then(function(data){vm.distributors=data;if(vm.distributors.length===1){return vm.selectDistributor(vm.distributors[0]);}else{return vm.loading=false;}});};vm.selectDistributor=function(distributor){return DistributorsService.switchDistributor(distributor);};return vm;}]);})();"use strict";(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DistributorsCtrl",["$state", function($state){var vm=this;vm.distributors=[];return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DistributorsCtrl",["$state", function($state){var vm=this;vm.distributors=[];return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DomainDetailsCtrl',["$log", "$stateParams", "DistributorsService", "DomainsService", "$state", "sweet", "ProgressBarService", "ToastsService", "SessionsService", function($log,$stateParams,DistributorsService,DomainsService,$state,sweet,ProgressBarService,ToastsService,SessionsService){var vm=this;vm.currentDomain={key:undefined,name:undefined,impersonation_admin_email_address:undefined,distributor_key:undefined,active:true};vm.currentDomains=[];vm.editMode=!!$stateParams.domainKey;if(vm.editMode){var domainPromise=DomainsService.getDomainByKey($stateParams.domainKey);domainPromise.then(function(data){return vm.currentDomain=data;});}else{vm.currentDomain.distributor_key=SessionsService.getCurrentDistributorKey();}vm.onSaveDomain=function(){ProgressBarService.start();var promise=DomainsService.save(vm.currentDomain);return promise.then(vm.onSuccessSaveDomain,vm.onFailureSaveDomain);};vm.onSuccessSaveDomain=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your update.');};vm.onFailureSaveDomain=function(error){ProgressBarService.complete();if(error.status===409){$log.info('Failure saving domain. Domain already exists: '+error.status+' '+error.statusText);return sweet.show('Oops...','This domain name already exist. Please enter a unique domain name.','error');}else{$log.error('Failure saving domain: '+error.status+' '+error.statusText);return ToastsService.showErrorToast('Oops. We were unable to save your updates at this time.');}};vm.editItem=function(item){return $state.go('editDomain',{domainKey:item.key});};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('DomainDetailsCtrl',["$log", "$stateParams", "DistributorsService", "DomainsService", "$state", "sweet", "ProgressBarService", "ToastsService", "SessionsService", function($log,$stateParams,DistributorsService,DomainsService,$state,sweet,ProgressBarService,ToastsService,SessionsService){var vm=this;vm.currentDomain={key:undefined,name:undefined,impersonation_admin_email_address:undefined,distributor_key:undefined,active:true};vm.currentDomains=[];vm.editMode=!!$stateParams.domainKey;if(vm.editMode){var domainPromise=DomainsService.getDomainByKey($stateParams.domainKey);domainPromise.then(function(data){return vm.currentDomain=data;});}else{vm.currentDomain.distributor_key=SessionsService.getCurrentDistributorKey();}vm.onSaveDomain=function(){ProgressBarService.start();var promise=DomainsService.save(vm.currentDomain);return promise.then(vm.onSuccessSaveDomain,vm.onFailureSaveDomain);};vm.onSuccessSaveDomain=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your update.');};vm.onFailureSaveDomain=function(error){ProgressBarService.complete();if(error.status===409){$log.info('Failure saving domain. Domain already exists: '+error.status+' '+error.statusText);return sweet.show('Oops...','This domain name already exist. Please enter a unique domain name.','error');}else{$log.error('Failure saving domain: '+error.status+' '+error.statusText);return ToastsService.showErrorToast('Oops. We were unable to save your updates at this time.');}};vm.editItem=function(item){return $state.go('editDomain',{domainKey:item.key});};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DomainsCtrl",["$state", "$log", "DomainsService", "sweet", function($state,$log,DomainsService,sweet){var vm=this;vm.domains=[];vm.initialize=function(){var promise=DomainsService.fetchAllDomains();return promise.then(function(data){return vm.domains=data;});};vm.editItem=function(item){return $state.go('editDomain',{domainKey:item.key});};vm.deleteItem=function(item){var callback=function callback(){var promise=DomainsService.delete(item);return promise.then(function(){return vm.initialize();});};return sweet.show({title:"Are you sure?",text:"This will permanently remove the domain from the distributor and disconnect from tenants.",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the domain!",closeOnConfirm:true},callback);};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("DomainsCtrl",["$state", "$log", "DomainsService", "sweet", function($state,$log,DomainsService,sweet){var vm=this;vm.domains=[];vm.initialize=function(){var promise=DomainsService.fetchAllDomains();return promise.then(function(data){return vm.domains=data;});};vm.editItem=function(item){return $state.go('editDomain',{domainKey:item.key});};vm.deleteItem=function(item){var callback=function callback(){var promise=DomainsService.delete(item);return promise.then(function(){return vm.initialize();});};return sweet.show({title:"Are you sure?",text:"This will permanently remove the domain from the distributor and disconnect from tenants.",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the domain!",closeOnConfirm:true},callback);};return vm;}]);})();'use strict';(function(){var app=angular.module('skykitProvisioning');app.config(["toastrConfig", function(toastrConfig){return angular.extend(toastrConfig,{progressBar:true,closeButton:true,tapToDismiss:true,newestOnTop:true,positionClass:'toast-bottom-left',timeOut:5000});}]);app.config(["$breadcrumbProvider", function($breadcrumbProvider){return $breadcrumbProvider.setOptions({prefixStateName:'home',template:'bootstrap3'});}]);})();(function(){var app=angular.module('skykitProvisioning');app.config(["toastrConfig", function(toastrConfig){return angular.extend(toastrConfig,{progressBar:true,closeButton:true,tapToDismiss:true,newestOnTop:true,positionClass:'toast-bottom-left',timeOut:5000});}]);app.config(["$breadcrumbProvider", function($breadcrumbProvider){return $breadcrumbProvider.setOptions({prefixStateName:'home',template:'bootstrap3'});}]);})();"use strict";(function(){var app=angular.module('skykitProvisioning');app.config(["$stateProvider", "$urlRouterProvider", "RestangularProvider", function($stateProvider,$urlRouterProvider,RestangularProvider){$stateProvider.state("sign_in",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],notAuthenticated:["AuthorizationService", function notAuthenticated(AuthorizationService){return AuthorizationService.notAuthenticated();}]},url:"/sign_in",templateUrl:"app/authentication/sign_in.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("signed_out",{url:"/signed_out",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],notAuthenticated:["AuthorizationService", function notAuthenticated(AuthorizationService){return AuthorizationService.notAuthenticated();}]},templateUrl:"app/authentication/signed_out.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("sign_out",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/sign_out",templateUrl:"app/authentication/sign_out.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("distributor_selection",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/distributor_selection",templateUrl:"app/distributor/distributor_selector.html",controller:"DistributorSelectorCtrl",controllerAs:'vm'});$stateProvider.state("home",{url:"/",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},controller:"WelcomeCtrl",controllerAs:'welcomeCtrl',ncyBreadcrumb:{label:'Skykit Provisioning'}});$stateProvider.state("welcome",{url:"/welcome",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},controller:"WelcomeCtrl",controllerAs:'welcomeCtrl',ncyBreadcrumb:{label:'Skykit Provisioning'}});$stateProvider.state("domains",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains",templateUrl:"app/domain/domains-listing.html",controller:"DomainsCtrl",controllerAs:'domainsCtrl',ncyBreadcrumb:{label:'Domains'}});$stateProvider.state("addDomain",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains/add",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:'domainDetailsCtrl',ncyBreadcrumb:{label:'Add domain',parent:'domains'}});$stateProvider.state("editDomain",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains/:domainKey",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:'domainDetailsCtrl',ncyBreadcrumb:{label:'{{ domainDetailsCtrl.currentDomain.name }}',parent:'domains'}});$stateProvider.state("tenants",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants",templateUrl:"app/tenant/tenants-listing.html",controller:"TenantsCtrl",controllerAs:'tenantsCtrl',ncyBreadcrumb:{label:'Tenants'}});$stateProvider.state("addTenant",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/add",templateUrl:"app/tenant/tenant-add.html",controller:"TenantAddCtrl",controllerAs:'tenantAddCtrl',ncyBreadcrumb:{label:'Add tenant',parent:'tenants'}});$stateProvider.state("tenantDetails",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/details",templateUrl:"app/tenant/tenant-details.html",controller:"TenantDetailsCtrl",controllerAs:'tenantDetailsCtrl',ncyBreadcrumb:{label:'{{ tenantDetailsCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantManagedDevices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/managed",templateUrl:"app/tenant/tenant-managed-devices.html",controller:"TenantManagedDevicesCtrl",controllerAs:'tenantManagedDevicesCtrl',ncyBreadcrumb:{label:'{{ tenantManagedDevicesCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantUnmanagedDevices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/unmanaged",templateUrl:"app/tenant/tenant-unmanaged-devices.html",controller:"TenantUnmanagedDevicesCtrl",controllerAs:'tenantUnmanagedDevicesCtrl',ncyBreadcrumb:{label:'{{ tenantUnmanagedDevicesCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantLocations",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/locations",templateUrl:"app/tenant/tenant-locations.html",controller:"TenantLocationsCtrl",controllerAs:'tenantLocationsCtrl',ncyBreadcrumb:{label:'{{ tenantLocationsCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("editLocation",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/locations/:locationKey",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:'tenantLocationCtrl',ncyBreadcrumb:{label:'{{ tenantLocationCtrl.tenantName }}  / {{ tenantLocationCtrl.locationName }}',parent:'tenants'}});$stateProvider.state("addLocation",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/location",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:'tenantLocationCtrl',ncyBreadcrumb:{label:'{{ tenantLocationCtrl.tenantName }}  / Location',parent:'tenants'}});$stateProvider.state("devices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/devices",templateUrl:"app/device/devices-listing.html",controller:"DevicesListingCtrl",controllerAs:'devicesListingCtrl',ncyBreadcrumb:{label:'Devices'}});$stateProvider.state("editDevice",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/devices/:deviceKey?tenantKey?fromDevices",templateUrl:"app/device/device-detail.html",ncyBreadcrumb:{label:'{{ deviceDetailsCtrl.currentDevice.key }}',parent:'devices'},controller:'DeviceDetailsCtrl',function:function _function($scope,$stateParams){$scope.tenantKey=$stateParams.tenantKey;return;},controllerAs:'deviceDetailsCtrl'});$stateProvider.state("proof",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/proof",templateUrl:"app/proof/main.html",controller:"ProofOfPlayCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Proof of Play'}});$stateProvider.state("proofDetail",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/proof/:tenant",templateUrl:"app/proof/detail.html",controller:"ProofOfPlayCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Proof of Play'}});$stateProvider.state("admin",{resolve:{isAdmin:["AuthorizationService", function isAdmin(AuthorizationService){return AuthorizationService.isAdminOrDistributorAdmin();}]},url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Admin'}});$urlRouterProvider.otherwise('/sign_in');RestangularProvider.setBaseUrl('/api/v1');RestangularProvider.addResponseInterceptor(function(data,operation,resourceType,url,response,deferred){var result=data;// Uncomment this for pagination support when using PagingListHandlerMixin on the Python side.
//    if resourceType == 'devices' and operation = 'getList' and url == '/api/v1/devices'
//      result = data.objects
return result;});return RestangularProvider.setRestangularFields({id:'key'});}]);})();(function(){var app=angular.module('skykitProvisioning');app.config(["$stateProvider", "$urlRouterProvider", "RestangularProvider", function($stateProvider,$urlRouterProvider,RestangularProvider){$stateProvider.state("sign_in",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],notAuthenticated:["AuthorizationService", function notAuthenticated(AuthorizationService){return AuthorizationService.notAuthenticated();}]},url:"/sign_in",templateUrl:"app/authentication/sign_in.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("signed_out",{url:"/signed_out",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],notAuthenticated:["AuthorizationService", function notAuthenticated(AuthorizationService){return AuthorizationService.notAuthenticated();}]},templateUrl:"app/authentication/signed_out.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("sign_out",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/sign_out",templateUrl:"app/authentication/sign_out.html",controller:"AuthenticationCtrl",controllerAs:'authenticationCtrl'});$stateProvider.state("distributor_selection",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/distributor_selection",templateUrl:"app/distributor/distributor_selector.html",controller:"DistributorSelectorCtrl",controllerAs:'vm'});$stateProvider.state("home",{url:"/",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},controller:"WelcomeCtrl",controllerAs:'welcomeCtrl',ncyBreadcrumb:{label:'Skykit Provisioning'}});$stateProvider.state("welcome",{url:"/welcome",templateUrl:"app/welcome/welcome.html",resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},controller:"WelcomeCtrl",controllerAs:'welcomeCtrl',ncyBreadcrumb:{label:'Skykit Provisioning'}});$stateProvider.state("domains",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains",templateUrl:"app/domain/domains-listing.html",controller:"DomainsCtrl",controllerAs:'domainsCtrl',ncyBreadcrumb:{label:'Domains'}});$stateProvider.state("addDomain",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains/add",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:'domainDetailsCtrl',ncyBreadcrumb:{label:'Add domain',parent:'domains'}});$stateProvider.state("editDomain",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/domains/:domainKey",templateUrl:"app/domain/domain-detail.html",controller:"DomainDetailsCtrl",controllerAs:'domainDetailsCtrl',ncyBreadcrumb:{label:'{{ domainDetailsCtrl.currentDomain.name }}',parent:'domains'}});$stateProvider.state("tenants",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants",templateUrl:"app/tenant/tenants-listing.html",controller:"TenantsCtrl",controllerAs:'tenantsCtrl',ncyBreadcrumb:{label:'Tenants'}});$stateProvider.state("addTenant",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/add",templateUrl:"app/tenant/tenant-add.html",controller:"TenantAddCtrl",controllerAs:'tenantAddCtrl',ncyBreadcrumb:{label:'Add tenant',parent:'tenants'}});$stateProvider.state("tenantDetails",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/details",templateUrl:"app/tenant/tenant-details.html",controller:"TenantDetailsCtrl",controllerAs:'tenantDetailsCtrl',ncyBreadcrumb:{label:'{{ tenantDetailsCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantManagedDevices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/managed",templateUrl:"app/tenant/tenant-managed-devices.html",controller:"TenantManagedDevicesCtrl",controllerAs:'tenantManagedDevicesCtrl',ncyBreadcrumb:{label:'{{ tenantManagedDevicesCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantUnmanagedDevices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/unmanaged",templateUrl:"app/tenant/tenant-unmanaged-devices.html",controller:"TenantUnmanagedDevicesCtrl",controllerAs:'tenantUnmanagedDevicesCtrl',ncyBreadcrumb:{label:'{{ tenantUnmanagedDevicesCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("tenantLocations",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/locations",templateUrl:"app/tenant/tenant-locations.html",controller:"TenantLocationsCtrl",controllerAs:'tenantLocationsCtrl',ncyBreadcrumb:{label:'{{ tenantLocationsCtrl.currentTenant.name }}',parent:'tenants'}});$stateProvider.state("editLocation",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/locations/:locationKey",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:'tenantLocationCtrl',ncyBreadcrumb:{label:'{{ tenantLocationCtrl.tenantName }}  / {{ tenantLocationCtrl.locationName }}',parent:'tenants'}});$stateProvider.state("addLocation",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/tenants/:tenantKey/location",templateUrl:"app/tenant/tenant-location.html",controller:"TenantLocationCtrl",controllerAs:'tenantLocationCtrl',ncyBreadcrumb:{label:'{{ tenantLocationCtrl.tenantName }}  / Location',parent:'tenants'}});$stateProvider.state("devices",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/devices",templateUrl:"app/device/devices-listing.html",controller:"DevicesListingCtrl",controllerAs:'devicesListingCtrl',ncyBreadcrumb:{label:'Devices'}});$stateProvider.state("editDevice",{resolve:{identity:["IdentityService", function identity(IdentityService){return IdentityService.getIdentity();}],authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/devices/:deviceKey?tenantKey?fromDevices",templateUrl:"app/device/device-detail.html",ncyBreadcrumb:{label:'{{ deviceDetailsCtrl.currentDevice.key }}',parent:'devices'},controller:'DeviceDetailsCtrl',function:function _function($scope,$stateParams){$scope.tenantKey=$stateParams.tenantKey;return;},controllerAs:'deviceDetailsCtrl'});$stateProvider.state("proof",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/proof",templateUrl:"app/proof/main.html",controller:"ProofOfPlayCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Proof of Play'}});$stateProvider.state("proofDetail",{resolve:{authenticated:["AuthorizationService", function authenticated(AuthorizationService){return AuthorizationService.authenticated();}]},url:"/proof/:tenant",templateUrl:"app/proof/detail.html",controller:"ProofOfPlayCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Proof of Play'}});$stateProvider.state("admin",{resolve:{isAdmin:["AuthorizationService", function isAdmin(AuthorizationService){return AuthorizationService.isAdminOrDistributorAdmin();}]},url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",controllerAs:'vm',ncyBreadcrumb:{label:'Admin'}});$urlRouterProvider.otherwise('/sign_in');RestangularProvider.setBaseUrl('/api/v1');RestangularProvider.addResponseInterceptor(function(data,operation,resourceType,url,response,deferred){var result=data;// Uncomment this for pagination support when using PagingListHandlerMixin on the Python side.
//    if resourceType == 'devices' and operation = 'getList' and url == '/api/v1/devices'
//      result = data.objects
return result;});return RestangularProvider.setRestangularFields({id:'key'});}]);})();'use strict';(function(){var app=angular.module('skykitProvisioning');app.run(["StorageService", "Restangular", "$location", "$injector", "$rootScope", "$timeout", function(StorageService,Restangular,$location,$injector,$rootScope,$timeout){app.constant("moment",moment);var stateChangeWatch=function stateChangeWatch(){var state=$injector.get('$state');return $rootScope.$on('$stateChangeError',function(event,toState,toParams,fromState,fromParams,error){if(error[0]==="authError"){return state.go(error[1]);}});};$timeout(stateChangeWatch,500);return Restangular.addRequestInterceptor(function(elem,operation,what,url){var authToken='6C346588BD4C6D722A1165B43C51C';if($location.host().indexOf('provisioning-gamestop')>-1){authToken='5XZHBF3mOwqJlYAlG1NeeWX0Cb72g';}Restangular.setDefaultHeaders({'Content-Type':'application/json','Accept':'application/json','Authorization':authToken,'X-Provisioning-User':StorageService.get('userKey'),'X-Provisioning-Distributor':StorageService.get('currentDistributorKey')});if(operation==='remove'){return undefined;}return elem;});}]);app.factory('RequestInterceptor',["StorageService", "$location", function(StorageService,$location){var interceptor={request:function request(config){var gs='5XZHBF3mOwqJlYAlG1NeeWX0Cb72g';var prod='6C346588BD4C6D722A1165B43C51C';config.headers={'Content-Type':'application/json','Accept':'application/json','Authorization':$location.host().indexOf('provisioning-gamestop')>-1?gs:prod,'X-Provisioning-User':StorageService.get('userKey'),'X-Provisioning-User-Identifier':StorageService.get('userEmail'),'X-Provisioning-Distributor':StorageService.get('currentDistributorKey')};return config;}};return interceptor;}]);app.config(["$httpProvider", function($httpProvider){return $httpProvider.interceptors.push('RequestInterceptor');}]);})();(function(){var app=angular.module('skykitProvisioning');app.run(["StorageService", "Restangular", "$location", "$injector", "$rootScope", "$timeout", function(StorageService,Restangular,$location,$injector,$rootScope,$timeout){app.constant("moment",moment);var stateChangeWatch=function stateChangeWatch(){var state=$injector.get('$state');return $rootScope.$on('$stateChangeError',function(event,toState,toParams,fromState,fromParams,error){if(error[0]==="authError"){return state.go(error[1]);}});};$timeout(stateChangeWatch,500);return Restangular.addRequestInterceptor(function(elem,operation,what,url){var authToken='6C346588BD4C6D722A1165B43C51C';if($location.host().indexOf('provisioning-gamestop')>-1){authToken='5XZHBF3mOwqJlYAlG1NeeWX0Cb72g';}Restangular.setDefaultHeaders({'Content-Type':'application/json','Accept':'application/json','Authorization':authToken,'X-Provisioning-User':StorageService.get('userKey'),'X-Provisioning-Distributor':StorageService.get('currentDistributorKey')});if(operation==='remove'){return undefined;}return elem;});}]);app.factory('RequestInterceptor',["StorageService", "$location", function(StorageService,$location){var interceptor={request:function request(config){var gs='5XZHBF3mOwqJlYAlG1NeeWX0Cb72g';var prod='6C346588BD4C6D722A1165B43C51C';config.headers={'Content-Type':'application/json','Accept':'application/json','Authorization':$location.host().indexOf('provisioning-gamestop')>-1?gs:prod,'X-Provisioning-User':StorageService.get('userKey'),'X-Provisioning-User-Identifier':StorageService.get('userEmail'),'X-Provisioning-Distributor':StorageService.get('currentDistributorKey')};return config;}};return interceptor;}]);app.config(["$httpProvider", function($httpProvider){return $httpProvider.interceptors.push('RequestInterceptor');}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiDisplayCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Date',group2:'Summarized',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,displays:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_displays=[];vm.initialize=function(){return ProofPlayService.getAllDisplays(vm.tenant).then(function(data){vm.loading=false;vm.displays=data.data.devices;if(vm.displays.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshDisplays=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_displays=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedDisplays=function(searchText){if(vm.isDisplayValid(searchText)){vm.selected_displays.push(searchText);var index=vm.displays.indexOf(searchText);vm.displays.splice(index,1);vm.searchText='';}vm.areDisplaysValid();return vm.isDisabled();};vm.querySearch=function(displays,searchText){return ProofPlayService.querySearch(displays,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isDisplayValid=function(searchText){if(__in__(searchText,vm.displays)){if(!__in__(searchText,vm.selected_displays)){return true;}else{return false;}}else{return false;}};vm.areDisplaysValid=function(){vm.formValidity.displays=vm.selected_displays.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedDisplay=function(item){var index=vm.selected_displays.indexOf(item);vm.selected_displays.splice(index,1);vm.displays.push(item);vm.areDisplaysValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.displays&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),displays:vm.selected_displays,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleDevicesByDate(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.displays,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleDevicesSummarized(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.displays,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiDisplayCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Date',group2:'Summarized',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,displays:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_displays=[];vm.initialize=function(){return ProofPlayService.getAllDisplays(vm.tenant).then(function(data){vm.loading=false;vm.displays=data.data.devices;if(vm.displays.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshDisplays=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_displays=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedDisplays=function(searchText){if(vm.isDisplayValid(searchText)){vm.selected_displays.push(searchText);var index=vm.displays.indexOf(searchText);vm.displays.splice(index,1);vm.searchText='';}vm.areDisplaysValid();return vm.isDisabled();};vm.querySearch=function(displays,searchText){return ProofPlayService.querySearch(displays,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isDisplayValid=function(searchText){if(__in__(searchText,vm.displays)){if(!__in__(searchText,vm.selected_displays)){return true;}else{return false;}}else{return false;}};vm.areDisplaysValid=function(){vm.formValidity.displays=vm.selected_displays.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedDisplay=function(item){var index=vm.selected_displays.indexOf(item);vm.selected_displays.splice(index,1);vm.displays.push(item);vm.areDisplaysValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.displays&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),displays:vm.selected_displays,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleDevicesByDate(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.displays,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleDevicesSummarized(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.displays,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiLocationCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Device',group2:'Summarized',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,locations:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_locations=[];vm.initialize=function(){return ProofPlayService.getAllLocations(vm.tenant).then(function(data){vm.loading=false;vm.locations=data.data.locations;if(vm.locations.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshLocations=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_locations=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedLocations=function(searchText){if(vm.isLocationValid(searchText)){vm.selected_locations.push(searchText);var index=vm.locations.indexOf(searchText);vm.locations.splice(index,1);vm.searchText='';}vm.areLocationsValid();return vm.isDisabled();};vm.querySearch=function(locations,searchText){return ProofPlayService.querySearch(locations,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isLocationValid=function(searchText){if(__in__(searchText,vm.locations)){if(!__in__(searchText,vm.selected_locations)){return true;}else{return false;}}else{return false;}};vm.areLocationsValid=function(){vm.formValidity.locations=vm.selected_locations.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedLocation=function(item){var index=vm.selected_locations.indexOf(item);vm.selected_locations.splice(index,1);vm.locations.push(item);vm.areLocationsValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.locations&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),locations:vm.selected_locations,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleLocationsByDevice(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.locations,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleLocationsSummarized(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.locations,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiLocationCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Device',group2:'Summarized',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,locations:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_locations=[];vm.initialize=function(){return ProofPlayService.getAllLocations(vm.tenant).then(function(data){vm.loading=false;vm.locations=data.data.locations;if(vm.locations.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshLocations=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_locations=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedLocations=function(searchText){if(vm.isLocationValid(searchText)){vm.selected_locations.push(searchText);var index=vm.locations.indexOf(searchText);vm.locations.splice(index,1);vm.searchText='';}vm.areLocationsValid();return vm.isDisabled();};vm.querySearch=function(locations,searchText){return ProofPlayService.querySearch(locations,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isLocationValid=function(searchText){if(__in__(searchText,vm.locations)){if(!__in__(searchText,vm.selected_locations)){return true;}else{return false;}}else{return false;}};vm.areLocationsValid=function(){vm.formValidity.locations=vm.selected_locations.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedLocation=function(item){var index=vm.selected_locations.indexOf(item);vm.selected_locations.splice(index,1);vm.locations.push(item);vm.areLocationsValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.locations&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),locations:vm.selected_locations,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleLocationsByDevice(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.locations,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleLocationsSummarized(vm.final.start_date_unix,vm.final.end_date_unix,vm.final.locations,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiResourceCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Device',group2:'By Date',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,resources:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_resources=[];vm.initialize=function(){return ProofPlayService.getAllResources(vm.tenant).then(function(data){vm.loading=false;vm.full_resource_map=data.data.resources;vm.resources=[];for(var i=0;i<data.data.resources.length;i++){var resource=data.data.resources[i];vm.resources.push(resource.resource_name);}if(vm.resources.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshResources=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_resources=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedResources=function(searchText){if(vm.isResourceValid(searchText)){vm.selected_resources.push(searchText);var index=vm.resources.indexOf(searchText);vm.resources.splice(index,1);vm.searchText='';}vm.areResourcesValid();return vm.isDisabled();};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isResourceValid=function(searchText){if(__in__(searchText,vm.resources)){if(!__in__(searchText,vm.selected_resources)){return true;}else{return false;}}else{return false;}};vm.areResourcesValid=function(){vm.formValidity.resources=vm.selected_resources.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedResource=function(item){var index=vm.selected_resources.indexOf(item);vm.selected_resources.splice(index,1);vm.resources.push(item);vm.areResourcesValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.resources&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),resources:vm.selected_resources,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){var resources_as_ids=[];for(var i=0;i<vm.final.resources.length;i++){var item=vm.final.resources[i];for(var j=0;j<vm.full_resource_map.length;j++){var each=vm.full_resource_map[j];if(each["resource_name"]===item){resources_as_ids.push(each["resource_identifier"]);}}}if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleResourcesByDevice(vm.final.start_date_unix,vm.final.end_date_unix,resources_as_ids,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleResourcesByDate(vm.final.start_date_unix,vm.final.end_date_unix,resources_as_ids,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayMultiResourceCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.radioButtonChoices={group1:'By Device',group2:'By Date',selection:null};vm.dateTimeSelection={start:null,end:null};vm.formValidity={start_date:false,end_date:false,resources:false};vm.tenant=$stateParams.tenant;vm.no_cache=true;vm.loading=true;vm.disabled=true;vm.disabledTenant=true;vm.selected_resources=[];vm.initialize=function(){return ProofPlayService.getAllResources(vm.tenant).then(function(data){vm.loading=false;vm.full_resource_map=data.data.resources;vm.resources=[];for(var i=0;i<data.data.resources.length;i++){var resource=data.data.resources[i];vm.resources.push(resource.resource_name);}if(vm.resources.length>0){return vm.had_some_items=true;}else{return vm.had_some_items=false;}});};vm.refreshResources=function(){vm.searchText='';vm.selectedItem='';vm.loading=true;vm.disabled=true;vm.selected_resources=[];ProofPlayService.proofplayCache.removeAll();return vm.initialize();};vm.addToSelectedResources=function(searchText){if(vm.isResourceValid(searchText)){vm.selected_resources.push(searchText);var index=vm.resources.indexOf(searchText);vm.resources.splice(index,1);vm.searchText='';}vm.areResourcesValid();return vm.isDisabled();};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isRadioValid=function(selection){vm.formValidity.type=selection;return vm.isDisabled();};vm.isResourceValid=function(searchText){if(__in__(searchText,vm.resources)){if(!__in__(searchText,vm.selected_resources)){return true;}else{return false;}}else{return false;}};vm.areResourcesValid=function(){vm.formValidity.resources=vm.selected_resources.length>0;return vm.isDisabled();};vm.isStartDateValid=function(start_date){vm.formValidity.start_date=start_date instanceof Date;return vm.isDisabled();};vm.isEndDateValid=function(end_date){vm.formValidity.end_date=end_date instanceof Date;return vm.isDisabled();};vm.removeFromSelectedResource=function(item){var index=vm.selected_resources.indexOf(item);vm.selected_resources.splice(index,1);vm.resources.push(item);vm.areResourcesValid();return vm.isDisabled();};vm.isDisabled=function(){if(vm.formValidity.start_date&&vm.formValidity.end_date&&vm.formValidity.resources&&vm.formValidity.type){vm.disabled=false;return vm.final={start_date_unix:moment(vm.dateTimeSelection.start).unix(),end_date_unix:moment(vm.dateTimeSelection.end).unix(),resources:vm.selected_resources,type:vm.radioButtonChoices.selection};}else{return vm.disabled=true;}};vm.submit=function(){var resources_as_ids=[];for(var i=0;i<vm.final.resources.length;i++){var item=vm.final.resources[i];for(var j=0;j<vm.full_resource_map.length;j++){var each=vm.full_resource_map[j];if(each["resource_name"]===item){resources_as_ids.push(each["resource_identifier"]);}}}if(vm.final.type==="1"){return ProofPlayService.downloadCSVForMultipleResourcesByDevice(vm.final.start_date_unix,vm.final.end_date_unix,resources_as_ids,vm.tenant);}else{return ProofPlayService.downloadCSVForMultipleResourcesByDate(vm.final.start_date_unix,vm.final.end_date_unix,resources_as_ids,vm.tenant);}};vm.tenants=null;vm.currentTenant=vm.tenant;vm.initialize_tenant_select=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabledTenant=false;}else{return vm.disabledTenant=true;}};vm.submitTenant=function(tenant){if(tenant!==vm.currentTenant){$state.go('proofDetail',{tenant:tenant});return ToastsService.showSuccessToast('Proof of Play reporting set to '+tenant);}else{return ToastsService.showErrorToast('Proof of Play reporting is already set to '+tenant);}};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();"use strict";(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.resource={title:"Resource Report"};vm.location={title:"Location Report"};vm.display={title:"Display Report"};vm.chosen_tenant=null;vm.tenants=null;vm.disabled=true;vm.initialize=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabled=false;}else{return vm.disabled=true;}};vm.submitTenant=function(tenant){if(tenant){vm.chosen_tenant=tenant;return $state.go('proofDetail',{tenant:vm.chosen_tenant});}};vm.refreshTenants=function(){vm.tenants=null;var url=ProofPlayService.makeHTTPURL("/retrieve_my_tenants",'');ProofPlayService.proofplayCache.remove(url);return vm.initialize();};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("ProofOfPlayCtrl",["ProofPlayService", "$stateParams", "$state", "ToastsService", function(ProofPlayService,$stateParams,$state,ToastsService){var vm=this;vm.resource={title:"Resource Report"};vm.location={title:"Location Report"};vm.display={title:"Display Report"};vm.chosen_tenant=null;vm.tenants=null;vm.disabled=true;vm.initialize=function(){return ProofPlayService.getAllTenants().then(function(data){return vm.tenants=data.data.tenants;});};vm.querySearch=function(resources,searchText){return ProofPlayService.querySearch(resources,searchText);};vm.isSelectionValid=function(search){if(__in__(search,vm.tenants)){return vm.disabled=false;}else{return vm.disabled=true;}};vm.submitTenant=function(tenant){if(tenant){vm.chosen_tenant=tenant;return $state.go('proofDetail',{tenant:vm.chosen_tenant});}};vm.refreshTenants=function(){vm.tenants=null;var url=ProofPlayService.makeHTTPURL("/retrieve_my_tenants",'');ProofPlayService.proofplayCache.remove(url);return vm.initialize();};return vm;}]);function __in__(needle,haystack){return haystack.indexOf(needle)>=0;}})();'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('AdminService',["Restangular", function(Restangular){return new(function(){function AdminService(){_classCallCheck(this,AdminService);this.USER_SERVICE="users";this.DISTRIBUTOR_SERVICE="distributors";}_createClass(AdminService,[{key:'makeDistributor',value:function makeDistributor(distributor,admin_email){var payload={distributor:distributor,admin_email:admin_email};var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'/api/v1/distributors').customPOST(payload);return promise;}},{key:'addUserToDistributor',value:function addUserToDistributor(userEmail,distributor,distributorAdmin){var payload={user_email:userEmail,distributor:distributor,distributor_admin:distributorAdmin};var promise=Restangular.oneUrl(this.USER_SERVICE,"/api/v1/users").customPOST(payload);return promise;}},{key:'getUsersOfDistributor',value:function getUsersOfDistributor(distributorKey){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'/api/v1/analytics/distributors/'+distributorKey+'/users').get();return promise;}},{key:'getAllDistributors',value:function getAllDistributors(){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").get();return promise;}}]);return AdminService;}())();}]);angular.module('skykitProvisioning').factory('AdminService',["Restangular", function(Restangular){return new(function(){function AdminService(){_classCallCheck2(this,AdminService);this.USER_SERVICE="users";this.DISTRIBUTOR_SERVICE="distributors";}_createClass2(AdminService,[{key:'makeDistributor',value:function makeDistributor(distributor,admin_email){var payload={distributor:distributor,admin_email:admin_email};var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'/api/v1/distributors').customPOST(payload);return promise;}},{key:'addUserToDistributor',value:function addUserToDistributor(userEmail,distributor,distributorAdmin){var payload={user_email:userEmail,distributor:distributor,distributor_admin:distributorAdmin};var promise=Restangular.oneUrl(this.USER_SERVICE,"/api/v1/users").customPOST(payload);return promise;}},{key:'getUsersOfDistributor',value:function getUsersOfDistributor(distributorKey){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'/api/v1/analytics/distributors/'+distributorKey+'/users').get();return promise;}},{key:'getAllDistributors',value:function getAllDistributors(){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,"/api/v1/distributors").get();return promise;}}]);return AdminService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('AuthorizationService',["SessionsService", "$q", function(SessionsService,$q){return new(function(){function AuthorizationService(){_classCallCheck(this,AuthorizationService);}_createClass(AuthorizationService,[{key:'authenticated',value:function authenticated(){var deferred=$q.defer();var userKey=SessionsService.getUserKey();if(userKey){deferred.resolve(true);}else{deferred.reject(["authError",'sign_in']);}return deferred.promise;}},{key:'notAuthenticated',value:function notAuthenticated(){var deferred=$q.defer();var userKey=SessionsService.getUserKey();if(!userKey){deferred.resolve(true);}else{deferred.reject(["authError",'home']);}return deferred.promise;}},{key:'isAdminOrDistributorAdmin',value:function isAdminOrDistributorAdmin(){var deferred=$q.defer();var admin=SessionsService.getIsAdmin();var distributorAdmin=SessionsService.getDistributorsAsAdmin();var hasAtLeastOneDistributorAdmin=false;if(distributorAdmin&&distributorAdmin.length>0){hasAtLeastOneDistributorAdmin=true;}var userKey=SessionsService.getUserKey();if(!userKey){deferred.reject('sign_in');}else if(!admin&&!hasAtLeastOneDistributorAdmin){deferred.reject(["authError",'home']);}else{deferred.resolve(true);}return deferred.promise;}}]);return AuthorizationService;}())();}]);angular.module('skykitProvisioning').factory('AuthorizationService',["SessionsService", "$q", function(SessionsService,$q){return new(function(){function AuthorizationService(){_classCallCheck2(this,AuthorizationService);}_createClass2(AuthorizationService,[{key:'authenticated',value:function authenticated(){var deferred=$q.defer();var userKey=SessionsService.getUserKey();if(userKey){deferred.resolve(true);}else{deferred.reject(["authError",'sign_in']);}return deferred.promise;}},{key:'notAuthenticated',value:function notAuthenticated(){var deferred=$q.defer();var userKey=SessionsService.getUserKey();if(!userKey){deferred.resolve(true);}else{deferred.reject(["authError",'home']);}return deferred.promise;}},{key:'isAdminOrDistributorAdmin',value:function isAdminOrDistributorAdmin(){var deferred=$q.defer();var admin=SessionsService.getIsAdmin();var distributorAdmin=SessionsService.getDistributorsAsAdmin();var hasAtLeastOneDistributorAdmin=false;if(distributorAdmin&&distributorAdmin.length>0){hasAtLeastOneDistributorAdmin=true;}var userKey=SessionsService.getUserKey();if(!userKey){deferred.reject('sign_in');}else if(!admin&&!hasAtLeastOneDistributorAdmin){deferred.reject(["authError",'home']);}else{deferred.resolve(true);}return deferred.promise;}}]);return AuthorizationService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('CommandsService',["Restangular", function(Restangular){return new(function(){function CommandsService(){_classCallCheck(this,CommandsService);this.SERVICE_NAME='devices';}_createClass(CommandsService,[{key:'reset',value:function reset(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/reset').post();return promise;}},{key:'contentDelete',value:function contentDelete(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/content-delete').post();return promise;}},{key:'contentUpdate',value:function contentUpdate(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/content-update').post();return promise;}},{key:'updateDevice',value:function updateDevice(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/refresh-device-representation').post();return promise;}},{key:'powerOn',value:function powerOn(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/power-on').post();return promise;}},{key:'powerOff',value:function powerOff(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/power-off').post();return promise;}},{key:'volume',value:function volume(key,_volume){var payload={volume:_volume};var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key).customPOST(payload,'commands/volume');return promise;}},{key:'custom',value:function custom(key,command){var payload={command:command};var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key).customPOST(payload,'commands/custom');return promise;}}]);return CommandsService;}())();}]);angular.module('skykitProvisioning').factory('CommandsService',["Restangular", function(Restangular){return new(function(){function CommandsService(){_classCallCheck2(this,CommandsService);this.SERVICE_NAME='devices';}_createClass2(CommandsService,[{key:'reset',value:function reset(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/reset').post();return promise;}},{key:'contentDelete',value:function contentDelete(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/content-delete').post();return promise;}},{key:'contentUpdate',value:function contentUpdate(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/content-update').post();return promise;}},{key:'updateDevice',value:function updateDevice(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/refresh-device-representation').post();return promise;}},{key:'powerOn',value:function powerOn(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/power-on').post();return promise;}},{key:'powerOff',value:function powerOff(key){var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key+'/commands/power-off').post();return promise;}},{key:'volume',value:function volume(key,_volume2){var payload={volume:_volume2};var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key).customPOST(payload,'commands/volume');return promise;}},{key:'custom',value:function custom(key,command){var payload={command:command};var promise=Restangular.oneUrl(this.SERVICE_NAME,'api/v1/devices/'+key).customPOST(payload,'commands/custom');return promise;}}]);return CommandsService;}())();}]);'use strict';var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof2(obj);};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('DevicesService',["$log", "Restangular", "$q", "CacheFactory", "$http", function($log,Restangular,$q,CacheFactory,$http){var url;var url;return new(function(){function DevicesService(){var _this=this;_classCallCheck(this,DevicesService);this.SERVICE_NAME='devices';this.uriBase='v1/devices';if(!CacheFactory.get('deviceCache')){this.deviceCache=CacheFactory('deviceCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this.deviceCache.put(key,data);return;});return;}});}if(!CacheFactory.get('deviceByTenantCache')){this.deviceByTenantCache=CacheFactory('deviceByTenantCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this.deviceByTenantCache.put(key,data);return;});return;}});}}_createClass(DevicesService,[{key:'getDeviceByMacAddress',value:function getDeviceByMacAddress(macAddress){var url='api/v1/devices?mac_address='+macAddress;return Restangular.oneUrl('api/v1/devices',url).get();}},{key:'getDeviceByKey',value:function getDeviceByKey(deviceKey){var url='api/v1/devices/'+deviceKey;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}},{key:'getIssuesByKey',value:function getIssuesByKey(deviceKey,startEpoch,endEpoch,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var url='/api/v1/devices/'+prev+'/'+next+'/'+deviceKey+'/issues?start='+startEpoch+'&end='+endEpoch;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}},{key:'getCommandEventsByKey',value:function getCommandEventsByKey(deviceKey,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var url='/api/v1/player-command-events/'+prev+'/'+next+'/'+deviceKey;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}//#######################################################################
// TENANT VIEW
//#######################################################################
},{key:'getDevicesByTenant',value:function getDevicesByTenant(tenantKey,prev,next){var _this2=this;if(tenantKey!==undefined){var _ret=function(){var deferred=$q.defer();var url=_this2.makeDevicesByTenantURL(tenantKey,prev,next,false);if(!_this2.deviceByTenantCache.get(url)){var promise=Restangular.oneUrl(_this2.SERVICE_NAME,url).get();promise.then(function(data){_this2.deviceByTenantCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this2.deviceByTenantCache.get(url));}return{v:deferred.promise};}();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}}},{key:'getUnmanagedDevicesByTenant',value:function getUnmanagedDevicesByTenant(tenantKey,prev,next){var _this3=this;if(tenantKey!==undefined){var _ret2=function(){var deferred=$q.defer();var url=_this3.makeDevicesByTenantURL(tenantKey,prev,next,true);if(!_this3.deviceByTenantCache.get(url)){var promise=Restangular.oneUrl(_this3.SERVICE_NAME,url).get();promise.then(function(data){_this3.deviceByTenantCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this3.deviceByTenantCache.get(url));}return{v:deferred.promise};}();if((typeof _ret2==='undefined'?'undefined':_typeof(_ret2))==="object")return _ret2.v;}}},{key:'searchDevicesByPartialSerialByTenant',value:function searchDevicesByPartialSerialByTenant(tenantKey,partial_serial,unmanaged){if(tenantKey!==undefined){var _url='api/v1/tenants/search/serial/'+tenantKey+'/'+partial_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url).get();return promise;}}},{key:'searchDevicesByPartialMacByTenant',value:function searchDevicesByPartialMacByTenant(tenantKey,partial_mac,unmanaged){if(tenantKey!==undefined){var _url2='api/v1/tenants/search/mac/'+tenantKey+'/'+partial_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url2).get();return promise;}}},{key:'matchDevicesByFullSerialByTenant',value:function matchDevicesByFullSerialByTenant(tenantKey,full_serial,unmanaged){if(tenantKey!==undefined){var _url3='api/v1/tenants/match/serial/'+tenantKey+'/'+full_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url3).get();return promise;}}},{key:'matchDevicesByFullMacByTenant',value:function matchDevicesByFullMacByTenant(tenantKey,full_mac,unmanaged){if(tenantKey!==undefined){var _url4='api/v1/tenants/match/mac/'+tenantKey+'/'+full_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url4).get();return promise;}}//#######################################################################
// DEVICES VIEW
//#######################################################################
},{key:'searchDevicesByPartialSerial',value:function searchDevicesByPartialSerial(distributorKey,partial_serial,unmanaged){if(distributorKey!==undefined){var _url5='api/v1/distributors/search/serial/'+distributorKey+'/'+partial_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url5).get();return promise;}}},{key:'searchDevicesByPartialMac',value:function searchDevicesByPartialMac(distributorKey,partial_mac,unmanaged){if(distributorKey!==undefined){var _url6='api/v1/distributors/search/mac/'+distributorKey+'/'+partial_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url6).get();return promise;}}},{key:'matchDevicesByFullSerial',value:function matchDevicesByFullSerial(distributorKey,full_serial,unmanaged){if(distributorKey!==undefined){var _url7='api/v1/distributors/match/serial/'+distributorKey+'/'+full_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url7).get();return promise;}}},{key:'matchDevicesByFullMac',value:function matchDevicesByFullMac(distributorKey,full_mac,unmanaged){if(distributorKey!==undefined){var _url8='api/v1/distributors/match/mac/'+distributorKey+'/'+full_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url8).get();return promise;}}},{key:'getDevicesByDistributor',value:function getDevicesByDistributor(distributorKey,prev,next){var _this4=this;if(distributorKey!==undefined){var _ret3=function(){var deferred=$q.defer();var url=_this4.makeDevicesByDistributorURL(distributorKey,prev,next,false);if(!_this4.deviceCache.get(url)){var promise=Restangular.oneUrl(_this4.SERVICE_NAME,url).get();promise.then(function(data){_this4.deviceCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this4.deviceCache.get(url));}return{v:deferred.promise};}();if((typeof _ret3==='undefined'?'undefined':_typeof(_ret3))==="object")return _ret3.v;}}},{key:'getUnmanagedDevicesByDistributor',value:function getUnmanagedDevicesByDistributor(distributorKey,prev,next){var _this5=this;if(distributorKey!==undefined){var _ret4=function(){var deferred=$q.defer();var url=_this5.makeDevicesByDistributorURL(distributorKey,prev,next,true);if(!_this5.deviceCache.get(url)){var promise=Restangular.oneUrl(_this5.SERVICE_NAME,url).get();promise.then(function(data){_this5.deviceCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this5.deviceCache.get(url));}return{v:deferred.promise};}();if((typeof _ret4==='undefined'?'undefined':_typeof(_ret4))==="object")return _ret4.v;}}},{key:'getDevices',value:function getDevices(){var promise=Restangular.all(this.SERVICE_NAME).getList();return promise;}},{key:'save',value:function save(device){if(device.key!==undefined){var promise=device.put();}else{var promise=Restangular.service('devices').post(device);}return promise;}},{key:'delete',value:function _delete(deviceKey){var promise=Restangular.one(this.SERVICE_NAME,deviceKey).remove();return promise;}},{key:'getPanelModels',value:function getPanelModels(){return[{'id':'None','displayName':'None'},{'id':'Sony-FXD40LX2F','displayName':'Sony FXD40LX2F'},{'id':'NEC-LCD4215','displayName':'NEC LCD4215'},{'id':'Phillips-BDL5560EL','displayName':'Phillips BDL5560EL'},{'id':'Panasonic-TH55LF6U','displayName':'Panasonic TH55LF6U'},{'id':'Sharp-PNE521','displayName':'Sharp PNE521'}];}},{key:'getPanelInputs',value:function getPanelInputs(){return[{'id':'None','parentId':'None'},{'id':'HDMI1','parentId':'Sony-FXD40LX2F'},{'id':'HDMI2','parentId':'Sony-FXD40LX2F'},{'id':'HDMI1','parentId':'Phillips-BDL5560EL'},{'id':'HDMI2','parentId':'Phillips-BDL5560EL'},{'id':'DVI','parentId':'Phillips-BDL5560EL'},{'id':'HDMI1','parentId':'Panasonic-TH55LF6U'},{'id':'HDMI2','parentId':'Panasonic-TH55LF6U'},{'id':'DVI','parentId':'Panasonic-TH55LF6U'},{'id':'HDMI1','parentId':'Sharp-PNE521'},{'id':'HDMI2','parentId':'Sharp-PNE521'},{'id':'DVI','parentId':'Sharp-PNE521'},{'id':'VGA','parentId':'NEC-LCD4215'},{'id':'DVI1','parentId':'NEC-LCD4215'}];}},{key:'makeDevicesByDistributorURL',value:function makeDevicesByDistributorURL(distributorKey,prev,next,unmanaged){return url='/api/v1/distributors/'+prev+'/'+next+'/'+distributorKey+'/devices?unmanaged='+unmanaged;}},{key:'makeDevicesByTenantURL',value:function makeDevicesByTenantURL(tenantKey,prev,next,unmanaged){return url='/api/v1/tenants/'+prev+'/'+next+'/'+tenantKey+'/devices?unmanaged='+unmanaged;}}]);return DevicesService;}())();}]);angular.module('skykitProvisioning').factory('DevicesService',["$log", "Restangular", "$q", "CacheFactory", "$http", function($log,Restangular,$q,CacheFactory,$http){var url;var url;return new(function(){function DevicesService(){var _this6=this;_classCallCheck2(this,DevicesService);this.SERVICE_NAME='devices';this.uriBase='v1/devices';if(!CacheFactory.get('deviceCache')){this.deviceCache=CacheFactory('deviceCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this6.deviceCache.put(key,data);return;});return;}});}if(!CacheFactory.get('deviceByTenantCache')){this.deviceByTenantCache=CacheFactory('deviceByTenantCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this6.deviceByTenantCache.put(key,data);return;});return;}});}}_createClass2(DevicesService,[{key:'getDeviceByMacAddress',value:function getDeviceByMacAddress(macAddress){var url='api/v1/devices?mac_address='+macAddress;return Restangular.oneUrl('api/v1/devices',url).get();}},{key:'getDeviceByKey',value:function getDeviceByKey(deviceKey){var url='api/v1/devices/'+deviceKey;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}},{key:'getIssuesByKey',value:function getIssuesByKey(deviceKey,startEpoch,endEpoch,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var url='/api/v1/devices/'+prev+'/'+next+'/'+deviceKey+'/issues?start='+startEpoch+'&end='+endEpoch;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}},{key:'getCommandEventsByKey',value:function getCommandEventsByKey(deviceKey,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var url='/api/v1/player-command-events/'+prev+'/'+next+'/'+deviceKey;var promise=Restangular.oneUrl(this.SERVICE_NAME,url).get();return promise;}//#######################################################################
// TENANT VIEW
//#######################################################################
},{key:'getDevicesByTenant',value:function getDevicesByTenant(tenantKey,prev,next){var _this7=this;if(tenantKey!==undefined){var _ret5=function(){var deferred=$q.defer();var url=_this7.makeDevicesByTenantURL(tenantKey,prev,next,false);if(!_this7.deviceByTenantCache.get(url)){var promise=Restangular.oneUrl(_this7.SERVICE_NAME,url).get();promise.then(function(data){_this7.deviceByTenantCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this7.deviceByTenantCache.get(url));}return{v:deferred.promise};}();if((typeof _ret5==='undefined'?'undefined':_typeof2(_ret5))==="object")return _ret5.v;}}},{key:'getUnmanagedDevicesByTenant',value:function getUnmanagedDevicesByTenant(tenantKey,prev,next){var _this8=this;if(tenantKey!==undefined){var _ret6=function(){var deferred=$q.defer();var url=_this8.makeDevicesByTenantURL(tenantKey,prev,next,true);if(!_this8.deviceByTenantCache.get(url)){var promise=Restangular.oneUrl(_this8.SERVICE_NAME,url).get();promise.then(function(data){_this8.deviceByTenantCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this8.deviceByTenantCache.get(url));}return{v:deferred.promise};}();if((typeof _ret6==='undefined'?'undefined':_typeof2(_ret6))==="object")return _ret6.v;}}},{key:'searchDevicesByPartialSerialByTenant',value:function searchDevicesByPartialSerialByTenant(tenantKey,partial_serial,unmanaged){if(tenantKey!==undefined){var _url9='api/v1/tenants/search/serial/'+tenantKey+'/'+partial_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url9).get();return promise;}}},{key:'searchDevicesByPartialMacByTenant',value:function searchDevicesByPartialMacByTenant(tenantKey,partial_mac,unmanaged){if(tenantKey!==undefined){var _url10='api/v1/tenants/search/mac/'+tenantKey+'/'+partial_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url10).get();return promise;}}},{key:'matchDevicesByFullSerialByTenant',value:function matchDevicesByFullSerialByTenant(tenantKey,full_serial,unmanaged){if(tenantKey!==undefined){var _url11='api/v1/tenants/match/serial/'+tenantKey+'/'+full_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url11).get();return promise;}}},{key:'matchDevicesByFullMacByTenant',value:function matchDevicesByFullMacByTenant(tenantKey,full_mac,unmanaged){if(tenantKey!==undefined){var _url12='api/v1/tenants/match/mac/'+tenantKey+'/'+full_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url12).get();return promise;}}//#######################################################################
// DEVICES VIEW
//#######################################################################
},{key:'searchDevicesByPartialSerial',value:function searchDevicesByPartialSerial(distributorKey,partial_serial,unmanaged){if(distributorKey!==undefined){var _url13='api/v1/distributors/search/serial/'+distributorKey+'/'+partial_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url13).get();return promise;}}},{key:'searchDevicesByPartialMac',value:function searchDevicesByPartialMac(distributorKey,partial_mac,unmanaged){if(distributorKey!==undefined){var _url14='api/v1/distributors/search/mac/'+distributorKey+'/'+partial_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url14).get();return promise;}}},{key:'matchDevicesByFullSerial',value:function matchDevicesByFullSerial(distributorKey,full_serial,unmanaged){if(distributorKey!==undefined){var _url15='api/v1/distributors/match/serial/'+distributorKey+'/'+full_serial+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url15).get();return promise;}}},{key:'matchDevicesByFullMac',value:function matchDevicesByFullMac(distributorKey,full_mac,unmanaged){if(distributorKey!==undefined){var _url16='api/v1/distributors/match/mac/'+distributorKey+'/'+full_mac+'/'+unmanaged+'/devices';var promise=Restangular.oneUrl(this.SERVICE_NAME,_url16).get();return promise;}}},{key:'getDevicesByDistributor',value:function getDevicesByDistributor(distributorKey,prev,next){var _this9=this;if(distributorKey!==undefined){var _ret7=function(){var deferred=$q.defer();var url=_this9.makeDevicesByDistributorURL(distributorKey,prev,next,false);if(!_this9.deviceCache.get(url)){var promise=Restangular.oneUrl(_this9.SERVICE_NAME,url).get();promise.then(function(data){_this9.deviceCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this9.deviceCache.get(url));}return{v:deferred.promise};}();if((typeof _ret7==='undefined'?'undefined':_typeof2(_ret7))==="object")return _ret7.v;}}},{key:'getUnmanagedDevicesByDistributor',value:function getUnmanagedDevicesByDistributor(distributorKey,prev,next){var _this10=this;if(distributorKey!==undefined){var _ret8=function(){var deferred=$q.defer();var url=_this10.makeDevicesByDistributorURL(distributorKey,prev,next,true);if(!_this10.deviceCache.get(url)){var promise=Restangular.oneUrl(_this10.SERVICE_NAME,url).get();promise.then(function(data){_this10.deviceCache.put(url,data);return deferred.resolve(data);});}else{deferred.resolve(_this10.deviceCache.get(url));}return{v:deferred.promise};}();if((typeof _ret8==='undefined'?'undefined':_typeof2(_ret8))==="object")return _ret8.v;}}},{key:'getDevices',value:function getDevices(){var promise=Restangular.all(this.SERVICE_NAME).getList();return promise;}},{key:'save',value:function save(device){if(device.key!==undefined){var promise=device.put();}else{var promise=Restangular.service('devices').post(device);}return promise;}},{key:'delete',value:function _delete(deviceKey){var promise=Restangular.one(this.SERVICE_NAME,deviceKey).remove();return promise;}},{key:'getPanelModels',value:function getPanelModels(){return[{'id':'None','displayName':'None'},{'id':'Sony-FXD40LX2F','displayName':'Sony FXD40LX2F'},{'id':'NEC-LCD4215','displayName':'NEC LCD4215'},{'id':'Phillips-BDL5560EL','displayName':'Phillips BDL5560EL'},{'id':'Panasonic-TH55LF6U','displayName':'Panasonic TH55LF6U'},{'id':'Sharp-PNE521','displayName':'Sharp PNE521'}];}},{key:'getPanelInputs',value:function getPanelInputs(){return[{'id':'None','parentId':'None'},{'id':'HDMI1','parentId':'Sony-FXD40LX2F'},{'id':'HDMI2','parentId':'Sony-FXD40LX2F'},{'id':'HDMI1','parentId':'Phillips-BDL5560EL'},{'id':'HDMI2','parentId':'Phillips-BDL5560EL'},{'id':'DVI','parentId':'Phillips-BDL5560EL'},{'id':'HDMI1','parentId':'Panasonic-TH55LF6U'},{'id':'HDMI2','parentId':'Panasonic-TH55LF6U'},{'id':'DVI','parentId':'Panasonic-TH55LF6U'},{'id':'HDMI1','parentId':'Sharp-PNE521'},{'id':'HDMI2','parentId':'Sharp-PNE521'},{'id':'DVI','parentId':'Sharp-PNE521'},{'id':'VGA','parentId':'NEC-LCD4215'},{'id':'DVI1','parentId':'NEC-LCD4215'}];}},{key:'makeDevicesByDistributorURL',value:function makeDevicesByDistributorURL(distributorKey,prev,next,unmanaged){return url='/api/v1/distributors/'+prev+'/'+next+'/'+distributorKey+'/devices?unmanaged='+unmanaged;}},{key:'makeDevicesByTenantURL',value:function makeDevicesByTenantURL(tenantKey,prev,next,unmanaged){return url='/api/v1/tenants/'+prev+'/'+next+'/'+tenantKey+'/devices?unmanaged='+unmanaged;}}]);return DevicesService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('DistributorsService',["Restangular", "$state", "SessionsService", "ProofPlayService", "TenantsService", "DevicesService", function(Restangular,$state,SessionsService,ProofPlayService,TenantsService,DevicesService){return new(function(){function DistributorsService(){_classCallCheck(this,DistributorsService);this.DISTRIBUTOR_SERVICE='distributors';}_createClass(DistributorsService,[{key:'save',value:function save(tenant){if(tenant.key!==undefined){var promise=tenant.put();}else{var promise=Restangular.service(this.DISTRIBUTOR_SERVICE).post(tenant);}return promise;}},{key:'fetchAll',value:function fetchAll(){var promise=Restangular.all(this.DISTRIBUTOR_SERVICE).getList();return promise;}},{key:'fetchAllByUser',value:function fetchAllByUser(userKey){if(userKey){var promise=Restangular.one('users',userKey).doGET(this.DISTRIBUTOR_SERVICE);return promise;}}},{key:'getByKey',value:function getByKey(key){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'api/v1/distributors/'+key).get();return promise;}},{key:'delete',value:function _delete(entity){if(entity.key){var promise=Restangular.one(this.DISTRIBUTOR_SERVICE,entity.key).remove();return promise;}}},{key:'getByName',value:function getByName(name){var promise=Restangular.all(this.DISTRIBUTOR_SERVICE).getList({distributorName:name});return promise;}},{key:'getDomainsByKey',value:function getDomainsByKey(key){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'api/v1/distributors/'+key+'/domains').get();return promise;}},{key:'switchDistributor',value:function switchDistributor(distributor){ProofPlayService.proofplayCache.removeAll();TenantsService.tenantCache.removeAll();DevicesService.deviceCache.removeAll();DevicesService.deviceByTenantCache.removeAll();SessionsService.setCurrentDistributorName(distributor.name);SessionsService.setCurrentDistributorKey(distributor.key);return $state.go('welcome');}}]);return DistributorsService;}())();}]);angular.module('skykitProvisioning').factory('DistributorsService',["Restangular", "$state", "SessionsService", "ProofPlayService", "TenantsService", "DevicesService", function(Restangular,$state,SessionsService,ProofPlayService,TenantsService,DevicesService){return new(function(){function DistributorsService(){_classCallCheck2(this,DistributorsService);this.DISTRIBUTOR_SERVICE='distributors';}_createClass2(DistributorsService,[{key:'save',value:function save(tenant){if(tenant.key!==undefined){var promise=tenant.put();}else{var promise=Restangular.service(this.DISTRIBUTOR_SERVICE).post(tenant);}return promise;}},{key:'fetchAll',value:function fetchAll(){var promise=Restangular.all(this.DISTRIBUTOR_SERVICE).getList();return promise;}},{key:'fetchAllByUser',value:function fetchAllByUser(userKey){if(userKey){var promise=Restangular.one('users',userKey).doGET(this.DISTRIBUTOR_SERVICE);return promise;}}},{key:'getByKey',value:function getByKey(key){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'api/v1/distributors/'+key).get();return promise;}},{key:'delete',value:function _delete(entity){if(entity.key){var promise=Restangular.one(this.DISTRIBUTOR_SERVICE,entity.key).remove();return promise;}}},{key:'getByName',value:function getByName(name){var promise=Restangular.all(this.DISTRIBUTOR_SERVICE).getList({distributorName:name});return promise;}},{key:'getDomainsByKey',value:function getDomainsByKey(key){var promise=Restangular.oneUrl(this.DISTRIBUTOR_SERVICE,'api/v1/distributors/'+key+'/domains').get();return promise;}},{key:'switchDistributor',value:function switchDistributor(distributor){ProofPlayService.proofplayCache.removeAll();TenantsService.tenantCache.removeAll();DevicesService.deviceCache.removeAll();DevicesService.deviceByTenantCache.removeAll();SessionsService.setCurrentDistributorName(distributor.name);SessionsService.setCurrentDistributorKey(distributor.key);return $state.go('welcome');}}]);return DistributorsService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('DomainsService',["Restangular", function(Restangular){return new(function(){function DomainsService(){_classCallCheck(this,DomainsService);}_createClass(DomainsService,[{key:'save',value:function save(domain){if(domain.key!==undefined){var promise=domain.put();}else{var promise=Restangular.service('domains').post(domain);}return promise;}},{key:'fetchAllDomains',value:function fetchAllDomains(){var promise=Restangular.all('domains').getList();return promise;}},{key:'getDomainByKey',value:function getDomainByKey(domainKey){var promise=Restangular.oneUrl('domains','api/v1/domains/'+domainKey).get();return promise;}},{key:'delete',value:function _delete(domain){if(domain.key!==undefined){var promise=Restangular.one("domains",domain.key).remove();return promise;}}}]);return DomainsService;}())();}]);angular.module('skykitProvisioning').factory('DomainsService',["Restangular", function(Restangular){return new(function(){function DomainsService(){_classCallCheck2(this,DomainsService);}_createClass2(DomainsService,[{key:'save',value:function save(domain){if(domain.key!==undefined){var promise=domain.put();}else{var promise=Restangular.service('domains').post(domain);}return promise;}},{key:'fetchAllDomains',value:function fetchAllDomains(){var promise=Restangular.all('domains').getList();return promise;}},{key:'getDomainByKey',value:function getDomainByKey(domainKey){var promise=Restangular.oneUrl('domains','api/v1/domains/'+domainKey).get();return promise;}},{key:'delete',value:function _delete(domain){if(domain.key!==undefined){var promise=Restangular.one("domains",domain.key).remove();return promise;}}}]);return DomainsService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('IdentityService',["$log", "Restangular", function($log,Restangular){return new(function(){function IdentityService(){_classCallCheck(this,IdentityService);}_createClass(IdentityService,[{key:'getIdentity',value:function getIdentity(){return Restangular.oneUrl('identity').get();}}]);return IdentityService;}())();}]);angular.module('skykitProvisioning').factory('IdentityService',["$log", "Restangular", function($log,Restangular){return new(function(){function IdentityService(){_classCallCheck2(this,IdentityService);}_createClass2(IdentityService,[{key:'getIdentity',value:function getIdentity(){return Restangular.oneUrl('identity').get();}}]);return IdentityService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('LocationsService',["Restangular", function(Restangular){var LocationsService=function(){function LocationsService(){_classCallCheck(this,LocationsService);}_createClass(LocationsService,[{key:'save',value:function save(location){if(location.key!==undefined){var promise=location.put();}else{var promise=Restangular.service('locations').post(location);}return promise;}},{key:'getLocationsByTenantKey',value:function getLocationsByTenantKey(tenantKey){var promise=Restangular.oneUrl('tenants','api/v1/tenants/'+tenantKey+'/locations').get();return promise;}},{key:'getLocationsByTenantKeyPaginated',value:function getLocationsByTenantKeyPaginated(tenantKey,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var promise=Restangular.oneUrl('tenants','api/v1/tenants/'+tenantKey+'/'+prev+'/'+next+'/locations').get();return promise;}},{key:'getLocationByKey',value:function getLocationByKey(locationKey){var promise=Restangular.oneUrl('locations','api/v1/locations/'+locationKey).get();return promise;}}]);return LocationsService;}();return new LocationsService();}]);angular.module('skykitProvisioning').factory('LocationsService',["Restangular", function(Restangular){var LocationsService=function(){function LocationsService(){_classCallCheck2(this,LocationsService);}_createClass2(LocationsService,[{key:'save',value:function save(location){if(location.key!==undefined){var promise=location.put();}else{var promise=Restangular.service('locations').post(location);}return promise;}},{key:'getLocationsByTenantKey',value:function getLocationsByTenantKey(tenantKey){var promise=Restangular.oneUrl('tenants','api/v1/tenants/'+tenantKey+'/locations').get();return promise;}},{key:'getLocationsByTenantKeyPaginated',value:function getLocationsByTenantKeyPaginated(tenantKey,prev,next){prev=prev===undefined||null?null:prev;next=next===undefined||null?null:next;var promise=Restangular.oneUrl('tenants','api/v1/tenants/'+tenantKey+'/'+prev+'/'+next+'/locations').get();return promise;}},{key:'getLocationByKey',value:function getLocationByKey(locationKey){var promise=Restangular.oneUrl('locations','api/v1/locations/'+locationKey).get();return promise;}}]);return LocationsService;}();return new LocationsService();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('ProgressBarService',["ngProgressFactory", function(ngProgressFactory){return new(function(){function ProgressBarService(){_classCallCheck(this,ProgressBarService);this.progressBar=ngProgressFactory.createInstance();}_createClass(ProgressBarService,[{key:'start',value:function start(){this.progressBar.setColor('#00FCFF');this.progressBar.setHeight('4px');return this.progressBar.start();}},{key:'complete',value:function complete(){return this.progressBar.complete();}}]);return ProgressBarService;}())();}]);angular.module('skykitProvisioning').factory('ProgressBarService',["ngProgressFactory", function(ngProgressFactory){return new(function(){function ProgressBarService(){_classCallCheck2(this,ProgressBarService);this.progressBar=ngProgressFactory.createInstance();}_createClass2(ProgressBarService,[{key:'start',value:function start(){this.progressBar.setColor('#00FCFF');this.progressBar.setHeight('4px');return this.progressBar.start();}},{key:'complete',value:function complete(){return this.progressBar.complete();}}]);return ProgressBarService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('ProofPlayService',["$http", "$q", "$window", "SessionsService", "$stateParams", "$state", "ToastsService", "CacheFactory", function($http,$q,$window,SessionsService,$stateParams,$state,ToastsService,CacheFactory){var url=void 0;return new(function(){function ProofPlayService(){var _this=this;_classCallCheck(this,ProofPlayService);this.makeHTTPRequest=this.makeHTTPRequest.bind(this);this.uriBase='proofplay/api/v1';if(!CacheFactory.get('proofplayCache')){this.proofplayCache=CacheFactory('proofplayCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key){$http.get(key).success(function(data){_this.proofplayCache.put(key,data);return;});return;}});}}_createClass(ProofPlayService,[{key:'makeHTTPURL',value:function makeHTTPURL(where_to_go,tenant){return url=this.uriBase+where_to_go+tenant;}},{key:'makeHTTPRequest',value:function makeHTTPRequest(where_to_go,tenant){var _this2=this;var deferred=$q.defer();var url=this.makeHTTPURL(where_to_go,tenant);if(!this.proofplayCache.get(url)){var res=$http.get(url);res.then(function(data){_this2.proofplayCache.put(url,data);return deferred.resolve(data);});res.catch(function(err){return deferred.reject(err);});}else{deferred.resolve(this.proofplayCache.get(url));}return deferred.promise;}},{key:'getAllResources',value:function getAllResources(tenant){// the catch is only done here because 3 proof of play views are initilized at the same time
// so this catch will be done 3 times with 3 error messages if we add it to getAllDisplays and getAllLocations
var r=this.makeHTTPRequest("/retrieve_all_resources/",tenant);r.catch(function(err,data){var status=err.status;if(status===403){ToastsService.showErrorToast("You are not allowed to view this tenant!");$state.go('proof',{});}if(status===404){ToastsService.showErrorToast("You must select a tenant first!");return $state.go('proof',{});}});return r.then(function(data){return data;});}},{key:'getAllDisplays',value:function getAllDisplays(tenant){return this.makeHTTPRequest("/retrieve_all_displays/",tenant);}},{key:'getAllLocations',value:function getAllLocations(tenant){return this.makeHTTPRequest("/retrieve_all_locations/",tenant);}},{key:'getAllTenants',value:function getAllTenants(){return this.makeHTTPRequest("/retrieve_my_tenants",'');}},{key:'downloadCSVForMultipleResourcesByDate',value:function downloadCSVForMultipleResourcesByDate(start_date,end_date,resources,tenant){var allResources='';for(var i=0;i<resources.length;i++){var each=resources[i];allResources=allResources+"|"+each;}$window.open(this.uriBase+'/multi_resource_by_date/'+start_date+'/'+end_date+'/'+allResources+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleResourcesByDevice',value:function downloadCSVForMultipleResourcesByDevice(start_date,end_date,resources,tenant){var allResources='';for(var i=0;i<resources.length;i++){var each=resources[i];allResources=allResources+"|"+each;}$window.open(this.uriBase+'/multi_resource_by_device/'+start_date+'/'+end_date+'/'+allResources+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleDevicesSummarized',value:function downloadCSVForMultipleDevicesSummarized(start_date,end_date,devices,tenant){var allDevices='';for(var i=0;i<devices.length;i++){var each=devices[i];allDevices=allDevices+"|"+each;}$window.open(this.uriBase+'/multi_device_summarized/'+start_date+'/'+end_date+'/'+allDevices+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleDevicesByDate',value:function downloadCSVForMultipleDevicesByDate(start_date,end_date,devices,tenant){var allDevices='';for(var i=0;i<devices.length;i++){var each=devices[i];allDevices=allDevices+"|"+each;}$window.open(this.uriBase+'/multi_device_by_date/'+start_date+'/'+end_date+'/'+allDevices+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleLocationsByDevice',value:function downloadCSVForMultipleLocationsByDevice(start_date,end_date,locations,tenant){var allLocations='';for(var i=0;i<locations.length;i++){var each=locations[i];allLocations=allLocations+"|"+each;}$window.open(this.uriBase+'/multi_location_by_device/'+start_date+'/'+end_date+'/'+allLocations+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleLocationsSummarized',value:function downloadCSVForMultipleLocationsSummarized(start_date,end_date,locations,tenant){var allLocations='';for(var i=0;i<locations.length;i++){var each=locations[i];allLocations=allLocations+"|"+each;}$window.open(this.uriBase+'/multi_location_summarized/'+start_date+'/'+end_date+'/'+allLocations+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'createFilterFor',value:function createFilterFor(query){query=angular.lowercase(query);return function(resource){resource=angular.lowercase(resource);return resource.indexOf(query)===0;};}},{key:'querySearch',value:function querySearch(resources,searchText){if(searchText){return resources.filter(this.createFilterFor(searchText));}else{return resources;}}}]);return ProofPlayService;}())();}]);angular.module('skykitProvisioning').factory('ProofPlayService',["$http", "$q", "$window", "SessionsService", "$stateParams", "$state", "ToastsService", "CacheFactory", function($http,$q,$window,SessionsService,$stateParams,$state,ToastsService,CacheFactory){var url=void 0;return new(function(){function ProofPlayService(){var _this11=this;_classCallCheck2(this,ProofPlayService);this.makeHTTPRequest=this.makeHTTPRequest.bind(this);this.uriBase='proofplay/api/v1';if(!CacheFactory.get('proofplayCache')){this.proofplayCache=CacheFactory('proofplayCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key){$http.get(key).success(function(data){_this11.proofplayCache.put(key,data);return;});return;}});}}_createClass2(ProofPlayService,[{key:'makeHTTPURL',value:function makeHTTPURL(where_to_go,tenant){return url=this.uriBase+where_to_go+tenant;}},{key:'makeHTTPRequest',value:function makeHTTPRequest(where_to_go,tenant){var _this12=this;var deferred=$q.defer();var url=this.makeHTTPURL(where_to_go,tenant);if(!this.proofplayCache.get(url)){var res=$http.get(url);res.then(function(data){_this12.proofplayCache.put(url,data);return deferred.resolve(data);});res.catch(function(err){return deferred.reject(err);});}else{deferred.resolve(this.proofplayCache.get(url));}return deferred.promise;}},{key:'getAllResources',value:function getAllResources(tenant){// the catch is only done here because 3 proof of play views are initilized at the same time
// so this catch will be done 3 times with 3 error messages if we add it to getAllDisplays and getAllLocations
var r=this.makeHTTPRequest("/retrieve_all_resources/",tenant);r.catch(function(err,data){var status=err.status;if(status===403){ToastsService.showErrorToast("You are not allowed to view this tenant!");$state.go('proof',{});}if(status===404){ToastsService.showErrorToast("You must select a tenant first!");return $state.go('proof',{});}});return r.then(function(data){return data;});}},{key:'getAllDisplays',value:function getAllDisplays(tenant){return this.makeHTTPRequest("/retrieve_all_displays/",tenant);}},{key:'getAllLocations',value:function getAllLocations(tenant){return this.makeHTTPRequest("/retrieve_all_locations/",tenant);}},{key:'getAllTenants',value:function getAllTenants(){return this.makeHTTPRequest("/retrieve_my_tenants",'');}},{key:'downloadCSVForMultipleResourcesByDate',value:function downloadCSVForMultipleResourcesByDate(start_date,end_date,resources,tenant){var allResources='';for(var i=0;i<resources.length;i++){var each=resources[i];allResources=allResources+"|"+each;}$window.open(this.uriBase+'/multi_resource_by_date/'+start_date+'/'+end_date+'/'+allResources+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleResourcesByDevice',value:function downloadCSVForMultipleResourcesByDevice(start_date,end_date,resources,tenant){var allResources='';for(var i=0;i<resources.length;i++){var each=resources[i];allResources=allResources+"|"+each;}$window.open(this.uriBase+'/multi_resource_by_device/'+start_date+'/'+end_date+'/'+allResources+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleDevicesSummarized',value:function downloadCSVForMultipleDevicesSummarized(start_date,end_date,devices,tenant){var allDevices='';for(var i=0;i<devices.length;i++){var each=devices[i];allDevices=allDevices+"|"+each;}$window.open(this.uriBase+'/multi_device_summarized/'+start_date+'/'+end_date+'/'+allDevices+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleDevicesByDate',value:function downloadCSVForMultipleDevicesByDate(start_date,end_date,devices,tenant){var allDevices='';for(var i=0;i<devices.length;i++){var each=devices[i];allDevices=allDevices+"|"+each;}$window.open(this.uriBase+'/multi_device_by_date/'+start_date+'/'+end_date+'/'+allDevices+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleLocationsByDevice',value:function downloadCSVForMultipleLocationsByDevice(start_date,end_date,locations,tenant){var allLocations='';for(var i=0;i<locations.length;i++){var each=locations[i];allLocations=allLocations+"|"+each;}$window.open(this.uriBase+'/multi_location_by_device/'+start_date+'/'+end_date+'/'+allLocations+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'downloadCSVForMultipleLocationsSummarized',value:function downloadCSVForMultipleLocationsSummarized(start_date,end_date,locations,tenant){var allLocations='';for(var i=0;i<locations.length;i++){var each=locations[i];allLocations=allLocations+"|"+each;}$window.open(this.uriBase+'/multi_location_summarized/'+start_date+'/'+end_date+'/'+allLocations+'/'+tenant+"/"+SessionsService.getCurrentDistributorKey(),'_blank');return true;}},{key:'createFilterFor',value:function createFilterFor(query){query=angular.lowercase(query);return function(resource){resource=angular.lowercase(resource);return resource.indexOf(query)===0;};}},{key:'querySearch',value:function querySearch(resources,searchText){if(searchText){return resources.filter(this.createFilterFor(searchText));}else{return resources;}}}]);return ProofPlayService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('SessionsService',["$http", "$log", "StorageService", "IdentityService", "Restangular", "$q", function($http,$log,StorageService,IdentityService,Restangular,$q){return new(function(){function SessionsService(){_classCallCheck(this,SessionsService);this.setIdentity=this.setIdentity.bind(this);this.uriBase='v1/sessions';}_createClass(SessionsService,[{key:'setDistributors',value:function setDistributors(distributors){return StorageService.set('distributors',distributors);}},{key:'setDistributorsAsAdmin',value:function setDistributorsAsAdmin(distributorsAsAdmin){return StorageService.set('distributorsAsAdmin',distributorsAsAdmin);}},{key:'setIsAdmin',value:function setIsAdmin(isAdmin){return StorageService.set('isAdmin',isAdmin);}},{key:'setUserKey',value:function setUserKey(value){return StorageService.set('userKey',value);}},{key:'setUserEmail',value:function setUserEmail(value){return StorageService.set('userEmail',value);}},{key:'setCurrentDistributorKey',value:function setCurrentDistributorKey(value){return StorageService.set('currentDistributorKey',value);}},{key:'setCurrentDistributorName',value:function setCurrentDistributorName(value){return StorageService.set('currentDistributorName',value);}},{key:'getUserKey',value:function getUserKey(){return StorageService.get('userKey');}},{key:'getUserEmail',value:function getUserEmail(){return StorageService.get('userEmail');}},{key:'getDistributors',value:function getDistributors(){return StorageService.get('distributors');}},{key:'getCurrentDistributorName',value:function getCurrentDistributorName(){return StorageService.get('currentDistributorName');}},{key:'getCurrentDistributorKey',value:function getCurrentDistributorKey(){return StorageService.get('currentDistributorKey');}},{key:'getDistributorsAsAdmin',value:function getDistributorsAsAdmin(){return StorageService.get('distributorsAsAdmin');}},{key:'getIsAdmin',value:function getIsAdmin(){return StorageService.get('isAdmin');}},{key:'login',value:function login(credentials){var _this=this;var authenticationPayload={access_token:_.clone(credentials.access_token),authuser:_.clone(credentials.authuser),client_id:_.clone(credentials.client_id),code:_.clone(credentials.code),id_token:_.clone(credentials.id_token),scope:_.clone(credentials.scope),session_state:_.clone(credentials.session_state),state:_.clone(credentials.state),status:_.clone(credentials.status)};if(credentials.email&&credentials.password){authenticationPayload=credentials;}var promise=$http.post('/login',authenticationPayload);return promise.success(function(data){_this.setUserKey(data.user.key);return _this.setIdentity().then(function(){return data;});});}},{key:'setIdentity',value:function setIdentity(){var _this2=this;var deferred=$q.defer();var identityPromise=IdentityService.getIdentity();identityPromise.then(function(data){_this2.setDistributors(data['distributors']);_this2.setDistributorsAsAdmin(data['distributors_as_admin']);_this2.setIsAdmin(data['is_admin']);_this2.setUserEmail(data['email']);_this2.setIsAdmin(data["is_admin"]);return deferred.resolve();});return deferred.promise;}},{key:'removeUserInfo',value:function removeUserInfo(){return StorageService.removeAll();}}]);return SessionsService;}())();}]);angular.module('skykitProvisioning').factory('SessionsService',["$http", "$log", "StorageService", "IdentityService", "Restangular", "$q", function($http,$log,StorageService,IdentityService,Restangular,$q){return new(function(){function SessionsService(){_classCallCheck2(this,SessionsService);this.setIdentity=this.setIdentity.bind(this);this.uriBase='v1/sessions';}_createClass2(SessionsService,[{key:'setDistributors',value:function setDistributors(distributors){return StorageService.set('distributors',distributors);}},{key:'setDistributorsAsAdmin',value:function setDistributorsAsAdmin(distributorsAsAdmin){return StorageService.set('distributorsAsAdmin',distributorsAsAdmin);}},{key:'setIsAdmin',value:function setIsAdmin(isAdmin){return StorageService.set('isAdmin',isAdmin);}},{key:'setUserKey',value:function setUserKey(value){return StorageService.set('userKey',value);}},{key:'setUserEmail',value:function setUserEmail(value){return StorageService.set('userEmail',value);}},{key:'setCurrentDistributorKey',value:function setCurrentDistributorKey(value){return StorageService.set('currentDistributorKey',value);}},{key:'setCurrentDistributorName',value:function setCurrentDistributorName(value){return StorageService.set('currentDistributorName',value);}},{key:'getUserKey',value:function getUserKey(){return StorageService.get('userKey');}},{key:'getUserEmail',value:function getUserEmail(){return StorageService.get('userEmail');}},{key:'getDistributors',value:function getDistributors(){return StorageService.get('distributors');}},{key:'getCurrentDistributorName',value:function getCurrentDistributorName(){return StorageService.get('currentDistributorName');}},{key:'getCurrentDistributorKey',value:function getCurrentDistributorKey(){return StorageService.get('currentDistributorKey');}},{key:'getDistributorsAsAdmin',value:function getDistributorsAsAdmin(){return StorageService.get('distributorsAsAdmin');}},{key:'getIsAdmin',value:function getIsAdmin(){return StorageService.get('isAdmin');}},{key:'login',value:function login(credentials){var _this13=this;var authenticationPayload={access_token:_.clone(credentials.access_token),authuser:_.clone(credentials.authuser),client_id:_.clone(credentials.client_id),code:_.clone(credentials.code),id_token:_.clone(credentials.id_token),scope:_.clone(credentials.scope),session_state:_.clone(credentials.session_state),state:_.clone(credentials.state),status:_.clone(credentials.status)};if(credentials.email&&credentials.password){authenticationPayload=credentials;}var promise=$http.post('/login',authenticationPayload);return promise.success(function(data){_this13.setUserKey(data.user.key);return _this13.setIdentity().then(function(){return data;});});}},{key:'setIdentity',value:function setIdentity(){var _this14=this;var deferred=$q.defer();var identityPromise=IdentityService.getIdentity();identityPromise.then(function(data){_this14.setDistributors(data['distributors']);_this14.setDistributorsAsAdmin(data['distributors_as_admin']);_this14.setIsAdmin(data['is_admin']);_this14.setUserEmail(data['email']);_this14.setIsAdmin(data["is_admin"]);return deferred.resolve();});return deferred.promise;}},{key:'removeUserInfo',value:function removeUserInfo(){return StorageService.removeAll();}}]);return SessionsService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('StorageService',function(){return new(function(){function StorageService(){_classCallCheck(this,StorageService);}_createClass(StorageService,[{key:'set',value:function set(key,value){return Lockr.set(key,value);}},{key:'get',value:function get(key){return Lockr.get(key);}},{key:'rm',value:function rm(key){return Lockr.rm(key);}},{key:'removeAll',value:function removeAll(){return Lockr.flush();}}]);return StorageService;}())();});angular.module('skykitProvisioning').factory('StorageService',function(){return new(function(){function StorageService(){_classCallCheck2(this,StorageService);}_createClass2(StorageService,[{key:'set',value:function set(key,value){return Lockr.set(key,value);}},{key:'get',value:function get(key){return Lockr.get(key);}},{key:'rm',value:function rm(key){return Lockr.rm(key);}},{key:'removeAll',value:function removeAll(){return Lockr.flush();}}]);return StorageService;}())();});'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('TenantsService',["Restangular", "CacheFactory", "SessionsService", function(Restangular,CacheFactory,SessionsService){return new(function(){function TenantsService(){var _this=this;_classCallCheck(this,TenantsService);if(!CacheFactory.get('tenantCache')){this.tenantCache=CacheFactory('tenantCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this.tenantCache.put(key,data);return;});return;}});}}_createClass(TenantsService,[{key:'save',value:function save(tenant){if(tenant.key!==undefined){var promise=tenant.put();}else{var promise=Restangular.service('tenants').post(tenant);}return promise;}},{key:'fetchAllTenants',value:function fetchAllTenants(){var promise=Restangular.all('tenants').getList();return promise;}},{key:'fetchAllTenantsPaginated',value:function fetchAllTenantsPaginated(page_size,offset){var url='api/v1/tenants/paginated/'+page_size+'/'+offset;var promise=Restangular.oneUrl('tenants',url).get();return promise;}},{key:'getTenantByKey',value:function getTenantByKey(tenantKey){var url='api/v1/tenants/'+tenantKey;var promise=Restangular.oneUrl('tenants',url).get();return promise;}},{key:'delete',value:function _delete(tenant){if(tenant.key!==undefined){var promise=Restangular.one("tenants",tenant.key).remove();return promise;}}}]);return TenantsService;}())();}]);angular.module('skykitProvisioning').factory('TenantsService',["Restangular", "CacheFactory", "SessionsService", function(Restangular,CacheFactory,SessionsService){return new(function(){function TenantsService(){var _this15=this;_classCallCheck2(this,TenantsService);if(!CacheFactory.get('tenantCache')){this.tenantCache=CacheFactory('tenantCache',{maxAge:60*60*1000,deleteOnExpire:'aggressive',storageMode:'localStorage',onExpire:function onExpire(key,value){$http.get(key).success(function(data){_this15.tenantCache.put(key,data);return;});return;}});}}_createClass2(TenantsService,[{key:'save',value:function save(tenant){if(tenant.key!==undefined){var promise=tenant.put();}else{var promise=Restangular.service('tenants').post(tenant);}return promise;}},{key:'fetchAllTenants',value:function fetchAllTenants(){var promise=Restangular.all('tenants').getList();return promise;}},{key:'fetchAllTenantsPaginated',value:function fetchAllTenantsPaginated(page_size,offset){var url='api/v1/tenants/paginated/'+page_size+'/'+offset;var promise=Restangular.oneUrl('tenants',url).get();return promise;}},{key:'getTenantByKey',value:function getTenantByKey(tenantKey){var url='api/v1/tenants/'+tenantKey;var promise=Restangular.oneUrl('tenants',url).get();return promise;}},{key:'delete',value:function _delete(tenant){if(tenant.key!==undefined){var promise=Restangular.one("tenants",tenant.key).remove();return promise;}}}]);return TenantsService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('TimezonesService',["$http", "$log", "Restangular", function($http,$log,Restangular){var TimezonesService=function(){function TimezonesService(){_classCallCheck(this,TimezonesService);}_createClass(TimezonesService,[{key:'getUsTimezones',value:function getUsTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/us').get();return promise;}},{key:'getAllTimezones',value:function getAllTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/all').get();return promise;}},{key:'getCustomTimezones',value:function getCustomTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/custom').get();return promise;}}]);return TimezonesService;}();return new TimezonesService();}]);angular.module('skykitProvisioning').factory('TimezonesService',["$http", "$log", "Restangular", function($http,$log,Restangular){var TimezonesService=function(){function TimezonesService(){_classCallCheck2(this,TimezonesService);}_createClass2(TimezonesService,[{key:'getUsTimezones',value:function getUsTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/us').get();return promise;}},{key:'getAllTimezones',value:function getAllTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/all').get();return promise;}},{key:'getCustomTimezones',value:function getCustomTimezones(){var promise=Restangular.oneUrl('timezones','api/v1/timezones/custom').get();return promise;}}]);return TimezonesService;}();return new TimezonesService();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('ToastsService',["toastr", function(toastr){return new(function(){function ToastsService(){_classCallCheck(this,ToastsService);}_createClass(ToastsService,[{key:'showSuccessToast',value:function showSuccessToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Success!':arguments[1];return toastr.success(message,title);}},{key:'showErrorToast',value:function showErrorToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Error!':arguments[1];return toastr.error(message,title);}},{key:'showInfoToast',value:function showInfoToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Information':arguments[1];return toastr.info(message,title);}}]);return ToastsService;}())();}]);angular.module('skykitProvisioning').factory('ToastsService',["toastr", function(toastr){return new(function(){function ToastsService(){_classCallCheck2(this,ToastsService);}_createClass2(ToastsService,[{key:'showSuccessToast',value:function showSuccessToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Success!':arguments[1];return toastr.success(message,title);}},{key:'showErrorToast',value:function showErrorToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Error!':arguments[1];return toastr.error(message,title);}},{key:'showInfoToast',value:function showInfoToast(message){var title=arguments.length<=1||arguments[1]===undefined?'Information':arguments[1];return toastr.info(message,title);}}]);return ToastsService;}())();}]);'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}angular.module('skykitProvisioning').factory('VersionsService',["Restangular", function(Restangular){return new(function(){function VersionsService(){_classCallCheck(this,VersionsService);}_createClass(VersionsService,[{key:'getVersions',value:function getVersions(){var promise=Restangular.oneUrl('versions').get();return promise;}}]);return VersionsService;}())();}]);angular.module('skykitProvisioning').factory('VersionsService',["Restangular", function(Restangular){return new(function(){function VersionsService(){_classCallCheck2(this,VersionsService);}_createClass2(VersionsService,[{key:'getVersions',value:function getVersions(){var promise=Restangular.oneUrl('versions').get();return promise;}}]);return VersionsService;}())();}]);'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantAddCtrl',["$log", "$location", "TenantsService", "DistributorsService", "TimezonesService", "$state", "sweet", "ProgressBarService", "SessionsService", function($log,$location,TenantsService,DistributorsService,TimezonesService,$state,sweet,ProgressBarService,SessionsService){var vm=this;vm.gameStopServer=$location.host().indexOf('provisioning-gamestop')>-1;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,proof_of_play_url:undefined,active:true};vm.selectedDomain=undefined;vm.distributorDomains=[];vm.timezones=[];vm.selectedTimezone='America/Chicago';vm.initialize=function(){var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});vm.currentDistributorKey=SessionsService.getCurrentDistributorKey();var distributorPromise=DistributorsService.getByKey(vm.currentDistributorKey);distributorPromise.then(function(data){vm.currentTenant.content_manager_base_url=data.content_manager_url;return vm.currentTenant.content_server_url=data.player_content_url;});var distributorDomainPromise=DistributorsService.getDomainsByKey(vm.currentDistributorKey);return distributorDomainPromise.then(function(domains){return vm.distributorDomains=domains;});};vm.onClickSaveButton=function(){ProgressBarService.start();vm.currentTenant.default_timezone=vm.selectedTimezone;vm.currentTenant.domain_key=vm.selectedDomain.key;var promise=TenantsService.save(vm.currentTenant);return promise.then(vm.onSuccessTenantSave,vm.onFailureTenantSave);};vm.onSuccessTenantSave=function(){ProgressBarService.complete();return $state.go('tenants');};vm.onFailureTenantSave=function(errorObject){ProgressBarService.complete();if(errorObject.status===409){return sweet.show('Oops...','Tenant code unavailable. Please modify tenant name to generate a unique tenant code.','error');}else{$log.error(errorObject);return sweet.show('Oops...','Unable to save the tenant.','error');}};vm.autoGenerateTenantCode=function(){if(!vm.currentTenant.key){var newTenantCode='';if(vm.currentTenant.name){newTenantCode=vm.currentTenant.name.toLowerCase();newTenantCode=newTenantCode.replace(/\s+/g,'_');newTenantCode=newTenantCode.replace(/\W+/g,'');}return vm.currentTenant.tenant_code=newTenantCode;}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantAddCtrl',["$log", "$location", "TenantsService", "DistributorsService", "TimezonesService", "$state", "sweet", "ProgressBarService", "SessionsService", function($log,$location,TenantsService,DistributorsService,TimezonesService,$state,sweet,ProgressBarService,SessionsService){var vm=this;vm.gameStopServer=$location.host().indexOf('provisioning-gamestop')>-1;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,proof_of_play_url:undefined,active:true};vm.selectedDomain=undefined;vm.distributorDomains=[];vm.timezones=[];vm.selectedTimezone='America/Chicago';vm.initialize=function(){var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});vm.currentDistributorKey=SessionsService.getCurrentDistributorKey();var distributorPromise=DistributorsService.getByKey(vm.currentDistributorKey);distributorPromise.then(function(data){vm.currentTenant.content_manager_base_url=data.content_manager_url;return vm.currentTenant.content_server_url=data.player_content_url;});var distributorDomainPromise=DistributorsService.getDomainsByKey(vm.currentDistributorKey);return distributorDomainPromise.then(function(domains){return vm.distributorDomains=domains;});};vm.onClickSaveButton=function(){ProgressBarService.start();vm.currentTenant.default_timezone=vm.selectedTimezone;vm.currentTenant.domain_key=vm.selectedDomain.key;var promise=TenantsService.save(vm.currentTenant);return promise.then(vm.onSuccessTenantSave,vm.onFailureTenantSave);};vm.onSuccessTenantSave=function(){ProgressBarService.complete();return $state.go('tenants');};vm.onFailureTenantSave=function(errorObject){ProgressBarService.complete();if(errorObject.status===409){return sweet.show('Oops...','Tenant code unavailable. Please modify tenant name to generate a unique tenant code.','error');}else{$log.error(errorObject);return sweet.show('Oops...','Unable to save the tenant.','error');}};vm.autoGenerateTenantCode=function(){if(!vm.currentTenant.key){var newTenantCode='';if(vm.currentTenant.name){newTenantCode=vm.currentTenant.name.toLowerCase();newTenantCode=newTenantCode.replace(/\s+/g,'_');newTenantCode=newTenantCode.replace(/\W+/g,'');}return vm.currentTenant.tenant_code=newTenantCode;}};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantDetailsCtrl',["$stateParams", "TenantsService", "DomainsService", "TimezonesService", "DistributorsService", "$state", "sweet", "ProgressBarService", "ToastsService", "SessionsService", "$scope", "$location", function($stateParams,TenantsService,DomainsService,TimezonesService,DistributorsService,$state,sweet,ProgressBarService,ToastsService,SessionsService,$scope,$location){var vm=this;vm.gameStopServer=$location.host().indexOf('provisioning-gamestop')>-1;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,proof_of_play_url:undefined,active:true};vm.selectedDomain=undefined;vm.distributorDomains=[];vm.timezones=[];vm.selectedTimezone='America/Chicago';vm.editMode=!!$stateParams.tenantKey;if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey($stateParams.tenantKey);tenantPromise.then(function(tenant){vm.currentTenant=tenant;return vm.onSuccessResolvingTenant(tenant);});}vm.initialize=function(){var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});vm.currentDistributorKey=SessionsService.getCurrentDistributorKey();var distributorDomainPromise=DistributorsService.getDomainsByKey(vm.currentDistributorKey);return distributorDomainPromise.then(function(domains){return vm.distributorDomains=domains;});};vm.onSuccessResolvingTenant=function(tenant){vm.selectedTimezone=tenant.default_timezone;var domainPromise=DomainsService.getDomainByKey(tenant.domain_key);return domainPromise.then(function(data){return vm.selectedDomain=data;});};vm.onClickSaveButton=function(){ProgressBarService.start();vm.currentTenant.default_timezone=vm.selectedTimezone;vm.currentTenant.domain_key=vm.selectedDomain.key;var promise=TenantsService.save(vm.currentTenant);return promise.then(vm.onSuccessTenantSave,vm.onFailureTenantSave);};vm.onSuccessTenantSave=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your tenant information.');};vm.onFailureTenantSave=function(errorObject){ProgressBarService.complete();if(errorObject.status===409){return sweet.show('Oops...','Tenant code unavailable. Please modify tenant name to generate a unique tenant code.','error');}else{return sweet.show('Oops...','Unable to save the tenant.','error');}};vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:$stateParams.tenantKey});};vm.autoGenerateTenantCode=function(){if(!vm.currentTenant.key){var newTenantCode='';if(vm.currentTenant.name){newTenantCode=vm.currentTenant.name.toLowerCase();newTenantCode=newTenantCode.replace(/\s+/g,'_');newTenantCode=newTenantCode.replace(/\W+/g,'');}return vm.currentTenant.tenant_code=newTenantCode;}};$scope.tabIndex=0;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:$stateParams.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:$stateParams.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:$stateParams.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:$stateParams.tenantKey});}}});return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantDetailsCtrl',["$stateParams", "TenantsService", "DomainsService", "TimezonesService", "DistributorsService", "$state", "sweet", "ProgressBarService", "ToastsService", "SessionsService", "$scope", "$location", function($stateParams,TenantsService,DomainsService,TimezonesService,DistributorsService,$state,sweet,ProgressBarService,ToastsService,SessionsService,$scope,$location){var vm=this;vm.gameStopServer=$location.host().indexOf('provisioning-gamestop')>-1;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,proof_of_play_url:undefined,active:true};vm.selectedDomain=undefined;vm.distributorDomains=[];vm.timezones=[];vm.selectedTimezone='America/Chicago';vm.editMode=!!$stateParams.tenantKey;if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey($stateParams.tenantKey);tenantPromise.then(function(tenant){vm.currentTenant=tenant;return vm.onSuccessResolvingTenant(tenant);});}vm.initialize=function(){var timezonePromise=TimezonesService.getCustomTimezones();timezonePromise.then(function(data){return vm.timezones=data;});vm.currentDistributorKey=SessionsService.getCurrentDistributorKey();var distributorDomainPromise=DistributorsService.getDomainsByKey(vm.currentDistributorKey);return distributorDomainPromise.then(function(domains){return vm.distributorDomains=domains;});};vm.onSuccessResolvingTenant=function(tenant){vm.selectedTimezone=tenant.default_timezone;var domainPromise=DomainsService.getDomainByKey(tenant.domain_key);return domainPromise.then(function(data){return vm.selectedDomain=data;});};vm.onClickSaveButton=function(){ProgressBarService.start();vm.currentTenant.default_timezone=vm.selectedTimezone;vm.currentTenant.domain_key=vm.selectedDomain.key;var promise=TenantsService.save(vm.currentTenant);return promise.then(vm.onSuccessTenantSave,vm.onFailureTenantSave);};vm.onSuccessTenantSave=function(){ProgressBarService.complete();return ToastsService.showSuccessToast('We saved your tenant information.');};vm.onFailureTenantSave=function(errorObject){ProgressBarService.complete();if(errorObject.status===409){return sweet.show('Oops...','Tenant code unavailable. Please modify tenant name to generate a unique tenant code.','error');}else{return sweet.show('Oops...','Unable to save the tenant.','error');}};vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:$stateParams.tenantKey});};vm.autoGenerateTenantCode=function(){if(!vm.currentTenant.key){var newTenantCode='';if(vm.currentTenant.name){newTenantCode=vm.currentTenant.name.toLowerCase();newTenantCode=newTenantCode.replace(/\s+/g,'_');newTenantCode=newTenantCode.replace(/\W+/g,'');}return vm.currentTenant.tenant_code=newTenantCode;}};$scope.tabIndex=0;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:$stateParams.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:$stateParams.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:$stateParams.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:$stateParams.tenantKey});}}});return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantLocationCtrl',["$stateParams", "TenantsService", "LocationsService", "$state", "sweet", "ProgressBarService", "ToastsService", function($stateParams,TenantsService,LocationsService,$state,sweet,ProgressBarService,ToastsService){var vm=this;vm.location={key:undefined};vm.tenantKey=$stateParams.tenantKey;vm.editMode=!!$stateParams.locationKey;if(vm.editMode){var locationPromise=LocationsService.getLocationByKey($stateParams.locationKey);locationPromise.then(function(data){vm.location=data;vm.tenantKey=data.tenantKey;vm.locationName=data.customerLocationName;return vm.fetchTenantName(vm.tenantKey);});}vm.initialize=function(){if(!vm.editMode){vm.fetchTenantName(vm.tenantKey);return vm.location={tenantKey:vm.tenantKey,active:true};}};vm.onClickSaveButton=function(){ProgressBarService.start();var promise=LocationsService.save(vm.location);if(vm.editMode){return promise.then(vm.onSuccessUpdatingLocation(vm.tenantKey),vm.onFailureSavingLocation);}else{return promise.then(vm.onSuccessSavingLocation,vm.onFailureSavingLocation);}};vm.onSuccessSavingLocation=function(){ProgressBarService.complete();ToastsService.showSuccessToast('We saved your location.');return setTimeout(function(){$state.go('tenantLocations',{tenantKey:$stateParams.tenantKey});return;},1000);};vm.onSuccessUpdatingLocation=function(tenant_key){ProgressBarService.complete();ToastsService.showSuccessToast('We updated your location.');return setTimeout(function(){$state.go('tenantLocations',{tenantKey:tenant_key});return;},1000);};vm.onFailureSavingLocation=function(response){ProgressBarService.complete();if(response.status===409){ToastsService.showErrorToast('Location code conflict. Unable to save your location.');return sweet.show('Oops...','Please change your customer location name. Location name must generate a unique location code.','error');}else{return ToastsService.showErrorToast('Unable to save your location.');}};vm.fetchTenantName=function(tenantKey){var tenantPromise=TenantsService.getTenantByKey(tenantKey);return tenantPromise.then(function(tenant){return vm.tenantName=tenant.name;});};vm.autoGenerateCustomerLocationCode=function(){if(!vm.location.key){var newCustomerLocationCode='';if(vm.location.customerLocationName){newCustomerLocationCode=vm.location.customerLocationName.toLowerCase();newCustomerLocationCode=newCustomerLocationCode.replace(/\s+/g,'_');newCustomerLocationCode=newCustomerLocationCode.replace(/\W+/g,'');}return vm.location.customerLocationCode=newCustomerLocationCode;}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantLocationCtrl',["$stateParams", "TenantsService", "LocationsService", "$state", "sweet", "ProgressBarService", "ToastsService", function($stateParams,TenantsService,LocationsService,$state,sweet,ProgressBarService,ToastsService){var vm=this;vm.location={key:undefined};vm.tenantKey=$stateParams.tenantKey;vm.editMode=!!$stateParams.locationKey;if(vm.editMode){var locationPromise=LocationsService.getLocationByKey($stateParams.locationKey);locationPromise.then(function(data){vm.location=data;vm.tenantKey=data.tenantKey;vm.locationName=data.customerLocationName;return vm.fetchTenantName(vm.tenantKey);});}vm.initialize=function(){if(!vm.editMode){vm.fetchTenantName(vm.tenantKey);return vm.location={tenantKey:vm.tenantKey,active:true};}};vm.onClickSaveButton=function(){ProgressBarService.start();var promise=LocationsService.save(vm.location);if(vm.editMode){return promise.then(vm.onSuccessUpdatingLocation(vm.tenantKey),vm.onFailureSavingLocation);}else{return promise.then(vm.onSuccessSavingLocation,vm.onFailureSavingLocation);}};vm.onSuccessSavingLocation=function(){ProgressBarService.complete();ToastsService.showSuccessToast('We saved your location.');return setTimeout(function(){$state.go('tenantLocations',{tenantKey:$stateParams.tenantKey});return;},1000);};vm.onSuccessUpdatingLocation=function(tenant_key){ProgressBarService.complete();ToastsService.showSuccessToast('We updated your location.');return setTimeout(function(){$state.go('tenantLocations',{tenantKey:tenant_key});return;},1000);};vm.onFailureSavingLocation=function(response){ProgressBarService.complete();if(response.status===409){ToastsService.showErrorToast('Location code conflict. Unable to save your location.');return sweet.show('Oops...','Please change your customer location name. Location name must generate a unique location code.','error');}else{return ToastsService.showErrorToast('Unable to save your location.');}};vm.fetchTenantName=function(tenantKey){var tenantPromise=TenantsService.getTenantByKey(tenantKey);return tenantPromise.then(function(tenant){return vm.tenantName=tenant.name;});};vm.autoGenerateCustomerLocationCode=function(){if(!vm.location.key){var newCustomerLocationCode='';if(vm.location.customerLocationName){newCustomerLocationCode=vm.location.customerLocationName.toLowerCase();newCustomerLocationCode=newCustomerLocationCode.replace(/\s+/g,'_');newCustomerLocationCode=newCustomerLocationCode.replace(/\W+/g,'');}return vm.location.customerLocationCode=newCustomerLocationCode;}};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantLocationsCtrl',["$scope", "$stateParams", "TenantsService", "LocationsService", "$state", "ProgressBarService", function($scope,$stateParams,TenantsService,LocationsService,$state,ProgressBarService){var vm=this;var tenantKey=$stateParams.tenantKey;vm.currentTenant=undefined;$scope.tabIndex=3;$scope.$watch('tabIndex',function(selectedIndex){if(selectedIndex!==undefined){switch(selectedIndex){case 0:return $state.go('tenantDetails',{tenantKey:tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:tenantKey});}}});vm.getLocations=function(tenantKey,prev,next){ProgressBarService.start();var locationsPromise=LocationsService.getLocationsByTenantKeyPaginated(tenantKey,prev,next);return locationsPromise.then(function(data){vm.locations=data.locations;vm.next_cursor=data.next_cursor;vm.prev_cursor=data.prev_cursor;return ProgressBarService.complete();});};vm.paginateCall=function(forward){if(forward){return vm.getLocations(tenantKey,null,vm.next_cursor);}else{return vm.getLocations(tenantKey,vm.prev_cursor,null);}};vm.initialize=function(){vm.locations=[];var tenantPromise=TenantsService.getTenantByKey(tenantKey);tenantPromise.then(function(data){return vm.currentTenant=data;});return vm.getLocations(tenantKey);};vm.editItem=function(item){return $state.go('editLocation',{locationKey:item.key});};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantLocationsCtrl',["$scope", "$stateParams", "TenantsService", "LocationsService", "$state", "ProgressBarService", function($scope,$stateParams,TenantsService,LocationsService,$state,ProgressBarService){var vm=this;var tenantKey=$stateParams.tenantKey;vm.currentTenant=undefined;$scope.tabIndex=3;$scope.$watch('tabIndex',function(selectedIndex){if(selectedIndex!==undefined){switch(selectedIndex){case 0:return $state.go('tenantDetails',{tenantKey:tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:tenantKey});}}});vm.getLocations=function(tenantKey,prev,next){ProgressBarService.start();var locationsPromise=LocationsService.getLocationsByTenantKeyPaginated(tenantKey,prev,next);return locationsPromise.then(function(data){vm.locations=data.locations;vm.next_cursor=data.next_cursor;vm.prev_cursor=data.prev_cursor;return ProgressBarService.complete();});};vm.paginateCall=function(forward){if(forward){return vm.getLocations(tenantKey,null,vm.next_cursor);}else{return vm.getLocations(tenantKey,vm.prev_cursor,null);}};vm.initialize=function(){vm.locations=[];var tenantPromise=TenantsService.getTenantByKey(tenantKey);tenantPromise.then(function(data){return vm.currentTenant=data;});return vm.getLocations(tenantKey);};vm.editItem=function(item){return $state.go('editLocation',{locationKey:item.key});};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantManagedDevicesCtrl',["$scope", "$stateParams", "TenantsService", "DevicesService", "ProgressBarService", "$state", function($scope,$stateParams,TenantsService,DevicesService,ProgressBarService,$state){var vm=this;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,active:true};vm.tenantDevices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="Serial Number";vm.serialDevices={};vm.disabled=true;vm.macDevices={};vm.editMode=!!$stateParams.tenantKey;vm.tenantKey=$stateParams.tenantKey;vm.getManagedDevices=function(tenantKey,prev_cursor,next_cursor){ProgressBarService.start();var devicesPromise=DevicesService.getDevicesByTenant(tenantKey,prev_cursor,next_cursor);return devicesPromise.then(function(data){vm.devicesPrev=data["prev_cursor"];vm.devicesNext=data["next_cursor"];vm.tenantDevices=data["devices"];return ProgressBarService.complete();});};vm.refreshDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;vm.tenantDevices=null;DevicesService.deviceByTenantCache.removeAll();return vm.getManagedDevices(vm.tenantKey,vm.devicesPrev,vm.devicesNext);};if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey(vm.tenantKey);tenantPromise.then(function(tenant){return vm.currentTenant=tenant;});vm.getManagedDevices(vm.tenantKey,null,null);}$scope.tabIndex=1;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:vm.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:vm.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:vm.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:vm.tenantKey});}}});vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:vm.tenantKey,fromDevices:false});};vm.convertArrayToDictionary=function(theArray,mac){var Devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){Devices[item.mac]=item;}else{Devices[item.serial]=item;}}return Devices;};vm.changeRadio=function(){vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};};vm.searchDevices=function(partial_search){if(partial_search){if(partial_search.length>2){if(vm.selectedButton==="Serial Number"){return DevicesService.searchDevicesByPartialSerialByTenant(vm.tenantKey,partial_search,false).then(function(res){var result=res["serial_number_matches"];vm.serialDevices=vm.convertArrayToDictionary(result,false);var deviceSerials=[];for(var i=0;i<result.length;i++){var each=result[i];deviceSerials.push(each.serial);}return deviceSerials;});}else{return DevicesService.searchDevicesByPartialMacByTenant(vm.tenantKey,partial_search,false).then(function(res){var result=res["mac_matches"];vm.macDevices=vm.convertArrayToDictionary(result,true);var deviceMacs=[];for(var i=0;i<result.length;i++){var each=result[i];deviceMacs.push(each.mac);}return deviceMacs;});}}else{return[];}}else{return[];}};vm.paginateCall=function(forward){if(forward){return vm.getManagedDevices(vm.tenantKey,null,vm.devicesNext);}else{return vm.getManagedDevices(vm.tenantKey,vm.devicesPrev,null);}};vm.prepareForEditView=function(searchText){var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}};vm.controlOpenButton=function(isMatch){vm.disabled=!isMatch;return vm.loadingDisabled=false;};vm.isResourceValid=function(resource){if(resource){if(resource.length>2){var mac=vm.selectedButton==="MAC";vm.loadingDisabled=true;if(mac){return DevicesService.matchDevicesByFullMacByTenant(vm.tenantKey,resource,false).then(function(res){return vm.controlOpenButton(res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerialByTenant(vm.tenantKey,resource,false).then(function(res){return vm.controlOpenButton(res["is_match"]);});}}else{return vm.controlOpenButton(false);}}else{return vm.controlOpenButton(false);}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantManagedDevicesCtrl',["$scope", "$stateParams", "TenantsService", "DevicesService", "ProgressBarService", "$state", function($scope,$stateParams,TenantsService,DevicesService,ProgressBarService,$state){var vm=this;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,active:true};vm.tenantDevices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="Serial Number";vm.serialDevices={};vm.disabled=true;vm.macDevices={};vm.editMode=!!$stateParams.tenantKey;vm.tenantKey=$stateParams.tenantKey;vm.getManagedDevices=function(tenantKey,prev_cursor,next_cursor){ProgressBarService.start();var devicesPromise=DevicesService.getDevicesByTenant(tenantKey,prev_cursor,next_cursor);return devicesPromise.then(function(data){vm.devicesPrev=data["prev_cursor"];vm.devicesNext=data["next_cursor"];vm.tenantDevices=data["devices"];return ProgressBarService.complete();});};vm.refreshDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;vm.tenantDevices=null;DevicesService.deviceByTenantCache.removeAll();return vm.getManagedDevices(vm.tenantKey,vm.devicesPrev,vm.devicesNext);};if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey(vm.tenantKey);tenantPromise.then(function(tenant){return vm.currentTenant=tenant;});vm.getManagedDevices(vm.tenantKey,null,null);}$scope.tabIndex=1;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:vm.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:vm.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:vm.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:vm.tenantKey});}}});vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:vm.tenantKey,fromDevices:false});};vm.convertArrayToDictionary=function(theArray,mac){var Devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){Devices[item.mac]=item;}else{Devices[item.serial]=item;}}return Devices;};vm.changeRadio=function(){vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};};vm.searchDevices=function(partial_search){if(partial_search){if(partial_search.length>2){if(vm.selectedButton==="Serial Number"){return DevicesService.searchDevicesByPartialSerialByTenant(vm.tenantKey,partial_search,false).then(function(res){var result=res["serial_number_matches"];vm.serialDevices=vm.convertArrayToDictionary(result,false);var deviceSerials=[];for(var i=0;i<result.length;i++){var each=result[i];deviceSerials.push(each.serial);}return deviceSerials;});}else{return DevicesService.searchDevicesByPartialMacByTenant(vm.tenantKey,partial_search,false).then(function(res){var result=res["mac_matches"];vm.macDevices=vm.convertArrayToDictionary(result,true);var deviceMacs=[];for(var i=0;i<result.length;i++){var each=result[i];deviceMacs.push(each.mac);}return deviceMacs;});}}else{return[];}}else{return[];}};vm.paginateCall=function(forward){if(forward){return vm.getManagedDevices(vm.tenantKey,null,vm.devicesNext);}else{return vm.getManagedDevices(vm.tenantKey,vm.devicesPrev,null);}};vm.prepareForEditView=function(searchText){var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}};vm.controlOpenButton=function(isMatch){vm.disabled=!isMatch;return vm.loadingDisabled=false;};vm.isResourceValid=function(resource){if(resource){if(resource.length>2){var mac=vm.selectedButton==="MAC";vm.loadingDisabled=true;if(mac){return DevicesService.matchDevicesByFullMacByTenant(vm.tenantKey,resource,false).then(function(res){return vm.controlOpenButton(res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerialByTenant(vm.tenantKey,resource,false).then(function(res){return vm.controlOpenButton(res["is_match"]);});}}else{return vm.controlOpenButton(false);}}else{return vm.controlOpenButton(false);}};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantUnmanagedDevicesCtrl',["$scope", "$stateParams", "TenantsService", "DevicesService", "ProgressBarService", "$state", function($scope,$stateParams,TenantsService,DevicesService,ProgressBarService,$state){var vm=this;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,active:true};vm.tenantDevices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="MAC";vm.serialDevices={};vm.disabled=true;vm.macDevices={};vm.editMode=!!$stateParams.tenantKey;vm.tenantKey=$stateParams.tenantKey;vm.getUnmanagedDevices=function(tenantKey,prev_cursor,next_cursor){ProgressBarService.start();var devicesPromise=DevicesService.getUnmanagedDevicesByTenant(tenantKey,prev_cursor,next_cursor);return devicesPromise.then(function(data){vm.devicesPrev=data["prev_cursor"];vm.devicesNext=data["next_cursor"];vm.tenantDevices=data["devices"];return ProgressBarService.complete();});};vm.refreshDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;vm.tenantDevices=null;DevicesService.deviceByTenantCache.removeAll();return vm.getUnmanagedDevices(vm.tenantKey,vm.devicesPrev,vm.devicesNext);};if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey(vm.tenantKey);tenantPromise.then(function(tenant){return vm.currentTenant=tenant;});vm.getUnmanagedDevices(vm.tenantKey,null,null);}$scope.tabIndex=2;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:vm.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:vm.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:vm.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:vm.tenantKey});}}});vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:vm.tenantKey,fromDevices:false});};vm.convertArrayToDictionary=function(theArray,mac){var Devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){Devices[item.mac]=item;}else{Devices[item.serial]=item;}}return Devices;};vm.changeRadio=function(){vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};};vm.searchDevices=function(partial_search){if(partial_search){if(partial_search.length>2){if(vm.selectedButton==="Serial Number"){return DevicesService.searchDevicesByPartialSerialByTenant(vm.tenantKey,partial_search,true).then(function(res){var result=res["serial_number_matches"];vm.serialDevices=vm.convertArrayToDictionary(result,false);var deviceSerials=[];for(var i=0;i<result.length;i++){var each=result[i];deviceSerials.push(each.serial);}return deviceSerials;});}else{return DevicesService.searchDevicesByPartialMacByTenant(vm.tenantKey,partial_search,true).then(function(res){var result=res["mac_matches"];vm.macDevices=vm.convertArrayToDictionary(result,true);var deviceMacs=[];for(var i=0;i<result.length;i++){var each=result[i];deviceMacs.push(each.mac);}return deviceMacs;});}}else{return[];}}else{return[];}};vm.paginateCall=function(forward){if(forward){return vm.getUnmanagedDevices(vm.tenantKey,null,vm.devicesNext);}else{return vm.getUnmanagedDevices(vm.tenantKey,vm.devicesPrev,null);}};vm.prepareForEditView=function(searchText){var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}};vm.controlOpenButton=function(isMatch){vm.disabled=!isMatch;return vm.loadingDisabled=false;};vm.isResourceValid=function(resource){if(resource){if(resource.length>2){var mac=vm.selectedButton==="MAC";vm.loadingDisabled=true;if(mac){return DevicesService.matchDevicesByFullMacByTenant(vm.tenantKey,resource,true).then(function(res){return vm.controlOpenButton(res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerialByTenant(vm.tenantKey,resource,true).then(function(res){return vm.controlOpenButton(res["is_match"]);});}}else{return vm.controlOpenButton(false);}}else{return vm.controlOpenButton(false);}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller('TenantUnmanagedDevicesCtrl',["$scope", "$stateParams", "TenantsService", "DevicesService", "ProgressBarService", "$state", function($scope,$stateParams,TenantsService,DevicesService,ProgressBarService,$state){var vm=this;vm.currentTenant={key:undefined,name:undefined,tenant_code:undefined,admin_email:undefined,content_server_url:undefined,content_manager_base_url:undefined,domain_key:undefined,notification_emails:undefined,proof_of_play_logging:false,active:true};vm.tenantDevices=[];vm.devicesPrev=null;vm.devicesNext=null;vm.selectedButton="MAC";vm.serialDevices={};vm.disabled=true;vm.macDevices={};vm.editMode=!!$stateParams.tenantKey;vm.tenantKey=$stateParams.tenantKey;vm.getUnmanagedDevices=function(tenantKey,prev_cursor,next_cursor){ProgressBarService.start();var devicesPromise=DevicesService.getUnmanagedDevicesByTenant(tenantKey,prev_cursor,next_cursor);return devicesPromise.then(function(data){vm.devicesPrev=data["prev_cursor"];vm.devicesNext=data["next_cursor"];vm.tenantDevices=data["devices"];return ProgressBarService.complete();});};vm.refreshDevices=function(){vm.devicesPrev=null;vm.devicesNext=null;vm.tenantDevices=null;DevicesService.deviceByTenantCache.removeAll();return vm.getUnmanagedDevices(vm.tenantKey,vm.devicesPrev,vm.devicesNext);};if(vm.editMode){var tenantPromise=TenantsService.getTenantByKey(vm.tenantKey);tenantPromise.then(function(tenant){return vm.currentTenant=tenant;});vm.getUnmanagedDevices(vm.tenantKey,null,null);}$scope.tabIndex=2;$scope.$watch('tabIndex',function(toTab,fromTab){if(toTab!==undefined){switch(toTab){case 0:return $state.go('tenantDetails',{tenantKey:vm.tenantKey});case 1:return $state.go('tenantManagedDevices',{tenantKey:vm.tenantKey});case 2:return $state.go('tenantUnmanagedDevices',{tenantKey:vm.tenantKey});case 3:return $state.go('tenantLocations',{tenantKey:vm.tenantKey});}}});vm.editItem=function(item){return $state.go('editDevice',{deviceKey:item.key,tenantKey:vm.tenantKey,fromDevices:false});};vm.convertArrayToDictionary=function(theArray,mac){var Devices={};for(var i=0;i<theArray.length;i++){var item=theArray[i];if(mac){Devices[item.mac]=item;}else{Devices[item.serial]=item;}}return Devices;};vm.changeRadio=function(){vm.searchText='';vm.disabled=true;vm.serialDevices={};return vm.macDevices={};};vm.searchDevices=function(partial_search){if(partial_search){if(partial_search.length>2){if(vm.selectedButton==="Serial Number"){return DevicesService.searchDevicesByPartialSerialByTenant(vm.tenantKey,partial_search,true).then(function(res){var result=res["serial_number_matches"];vm.serialDevices=vm.convertArrayToDictionary(result,false);var deviceSerials=[];for(var i=0;i<result.length;i++){var each=result[i];deviceSerials.push(each.serial);}return deviceSerials;});}else{return DevicesService.searchDevicesByPartialMacByTenant(vm.tenantKey,partial_search,true).then(function(res){var result=res["mac_matches"];vm.macDevices=vm.convertArrayToDictionary(result,true);var deviceMacs=[];for(var i=0;i<result.length;i++){var each=result[i];deviceMacs.push(each.mac);}return deviceMacs;});}}else{return[];}}else{return[];}};vm.paginateCall=function(forward){if(forward){return vm.getUnmanagedDevices(vm.tenantKey,null,vm.devicesNext);}else{return vm.getUnmanagedDevices(vm.tenantKey,vm.devicesPrev,null);}};vm.prepareForEditView=function(searchText){var mac=vm.selectedButton==="MAC";if(mac){return vm.editItem(vm.macDevices[searchText]);}else{return vm.editItem(vm.serialDevices[searchText]);}};vm.controlOpenButton=function(isMatch){vm.disabled=!isMatch;return vm.loadingDisabled=false;};vm.isResourceValid=function(resource){if(resource){if(resource.length>2){var mac=vm.selectedButton==="MAC";vm.loadingDisabled=true;if(mac){return DevicesService.matchDevicesByFullMacByTenant(vm.tenantKey,resource,true).then(function(res){return vm.controlOpenButton(res["is_match"]);});}else{return DevicesService.matchDevicesByFullSerialByTenant(vm.tenantKey,resource,true).then(function(res){return vm.controlOpenButton(res["is_match"]);});}}else{return vm.controlOpenButton(false);}}else{return vm.controlOpenButton(false);}};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("TenantsCtrl",["$state", "$log", "TenantsService", "ProgressBarService", "sweet", function($state,$log,TenantsService,ProgressBarService,sweet){var vm=this;vm.tenants=[];vm.getTenants=function(page_size,offset){vm.offset=offset;vm.loading=true;ProgressBarService.start();var promise=TenantsService.fetchAllTenantsPaginated(page_size,offset);return promise.then(function(response){return vm.getFetchSuccess(response);},function(response){return vm.getFetchFailure(response);});};vm.initialize=function(){vm.offset=0;return vm.getTenants(100,vm.offset);};vm.getFetchSuccess=function(response){vm.tenants=response.tenants;vm.total=response.total;vm.is_first_page=response.is_first_page;vm.is_last_page=response.is_last_page;ProgressBarService.complete();return vm.loading=false;};vm.getFetchFailure=function(response){ProgressBarService.complete();var errorMessage='Unable to fetch tenants. Error: '+response.status+' '+response.statusText+'.';return sweet.show('Oops...',errorMessage,'error');};vm.editItem=function(item){return $state.go('tenantDetails',{tenantKey:item.key});};vm.deleteItem=function(item){var callback=function callback(){var promise=TenantsService.delete(item);return promise.then(function(){return vm.initialize();});};return sweet.show({title:"Are you sure?",text:"This will permanently remove the tenant from the system.",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the tenant!",closeOnConfirm:true},callback);};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("TenantsCtrl",["$state", "$log", "TenantsService", "ProgressBarService", "sweet", function($state,$log,TenantsService,ProgressBarService,sweet){var vm=this;vm.tenants=[];vm.getTenants=function(page_size,offset){vm.offset=offset;vm.loading=true;ProgressBarService.start();var promise=TenantsService.fetchAllTenantsPaginated(page_size,offset);return promise.then(function(response){return vm.getFetchSuccess(response);},function(response){return vm.getFetchFailure(response);});};vm.initialize=function(){vm.offset=0;return vm.getTenants(100,vm.offset);};vm.getFetchSuccess=function(response){vm.tenants=response.tenants;vm.total=response.total;vm.is_first_page=response.is_first_page;vm.is_last_page=response.is_last_page;ProgressBarService.complete();return vm.loading=false;};vm.getFetchFailure=function(response){ProgressBarService.complete();var errorMessage='Unable to fetch tenants. Error: '+response.status+' '+response.statusText+'.';return sweet.show('Oops...',errorMessage,'error');};vm.editItem=function(item){return $state.go('tenantDetails',{tenantKey:item.key});};vm.deleteItem=function(item){var callback=function callback(){var promise=TenantsService.delete(item);return promise.then(function(){return vm.initialize();});};return sweet.show({title:"Are you sure?",text:"This will permanently remove the tenant from the system.",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, remove the tenant!",closeOnConfirm:true},callback);};return vm;}]);})();'use strict';(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("WelcomeCtrl",["VersionsService", "$state", "DistributorsService", "SessionsService", function(VersionsService,$state,DistributorsService,SessionsService){var vm=this;vm.version_data=[];vm.loading=true;vm.proceedToSignIn=function(){return $state.go('sign_in');};vm.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1);};vm.giveOptionToChangeDistributor=function(){var distributorsPromise=DistributorsService.fetchAllByUser(SessionsService.getUserKey());return distributorsPromise.then(function(data){vm.has_multiple_distributors=data.length>1;return vm.loading=false;});};vm.changeDistributor=function(){return $state.go('distributor_selection');};vm.getVersion=function(){var promise=VersionsService.getVersions();return promise.then(function(data){return vm.version_data=data;});};vm.initialize=function(){vm.identity={key:SessionsService.getUserKey(),email:SessionsService.getUserEmail(),distributorKey:SessionsService.getCurrentDistributorKey(),distributorName:SessionsService.getCurrentDistributorName()};vm.giveOptionToChangeDistributor();if(!vm.identity.email){return $state.go("sign_in");}else{return vm.getVersion();}};return vm;}]);})();(function(){var appModule=angular.module('skykitProvisioning');appModule.controller("WelcomeCtrl",["VersionsService", "$state", "DistributorsService", "SessionsService", function(VersionsService,$state,DistributorsService,SessionsService){var vm=this;vm.version_data=[];vm.loading=true;vm.proceedToSignIn=function(){return $state.go('sign_in');};vm.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1);};vm.giveOptionToChangeDistributor=function(){var distributorsPromise=DistributorsService.fetchAllByUser(SessionsService.getUserKey());return distributorsPromise.then(function(data){vm.has_multiple_distributors=data.length>1;return vm.loading=false;});};vm.changeDistributor=function(){return $state.go('distributor_selection');};vm.getVersion=function(){var promise=VersionsService.getVersions();return promise.then(function(data){return vm.version_data=data;});};vm.initialize=function(){vm.identity={key:SessionsService.getUserKey(),email:SessionsService.getUserEmail(),distributorKey:SessionsService.getCurrentDistributorKey(),distributorName:SessionsService.getCurrentDistributorName()};vm.giveOptionToChangeDistributor();if(!vm.identity.email){return $state.go("sign_in");}else{return vm.getVersion();}};return vm;}]);})();angular.module("skykitProvisioning").run(["$templateCache",function($templateCache){$templateCache.put("app/admin/admin.html","<div ng-init=\"vm.initialize()\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-lock ng-scope\"></i> Admin</h2></div></md-toolbar><md-content><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\"><div ng-if=\"!vm.isAdmin\" ng-include=\"\'webapp/src/app/admin/create-user.html\'\"></div><md-tabs md-dynamic-height=\"\" md-border-bottom=\"\" ng-if=\"vm.isAdmin\"><div class=\"container\"><md-tab label=\"Create User\"><div ng-include=\"\'webapp/src/app/admin/create-user.html\'\"></div></md-tab><md-tab label=\"Create Distributor\" layout-align=\"center center\" ng-if=\"vm.isAdmin\"><div ng-include=\"\'webapp/src/app/admin/create-distributor.html\'\"></div></md-tab></div></md-tabs></div></md-content></div>");$templateCache.put("app/admin/create-distributor.html","<div class=\"admin-container\"><div flex-xs=\"\" flex-gt-xs=\"30\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">Create Distributor</span></md-card-title-text></md-card-title><md-card-content><form name=\"distributorForm\" ng-submit=\"vm.makeDistributor($event, vm.distributor.name, vm.distributor.adminEmail, distributorForm)\" novalidate=\"\"><md-input-container class=\"md-block\"><label>Admin Email</label> <input ng-model=\"vm.distributor.adminEmail\" type=\"email\" required=\"\"></md-input-container><md-input-container class=\"md-block\"><label>Name</label> <input ng-model=\"vm.distributor.name\" type=\"text\" ng-minlength=\"3\" required=\"\"></md-input-container><md-card-actions layout=\"row\" layout-align=\"end center\"><md-button class=\"md-raised\" type=\"submit\" ng-disabled=\"distributorForm.$pristine || distributorForm.$invalid\">Submit</md-button></md-card-actions></form></md-card-content></md-card></div><div flex-xs=\"\" flex-gt-xs=\"30\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">All Distributors</span><p>Click to switch to another Distributor.</p></md-card-title-text></md-card-title><md-card-content><md-list ng-if=\"!vm.loadingAllDistributors\"><md-list-item ng-repeat=\"item in vm.allDistributors | orderBy:\'item\' track by $index\">{{$index + 1}}.<md-button class=\"md-raised\" ng-click=\"vm.switchDistributor(item)\"><p>{{ item.name }}</p></md-button></md-list-item></md-list><h5 ng-if=\"vm.loadingAllDistributors\">Loading...</h5></md-card-content></md-card></div></div>");$templateCache.put("app/admin/create-user.html","<div class=\"admin-container\"><div flex-xs=\"\" flex-gt-xs=\"30\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">Create User</span></md-card-title-text></md-card-title><md-card-content><form name=\"userForm\" ng-submit=\"vm.addUserToDistributor($event, vm.user.email, vm.user.cb1, vm.user.distributor, userForm)\" novalidate=\"\"><md-input-container class=\"md-block\"><label>Email</label> <input ng-model=\"vm.user.email\" type=\"email\" required=\"\"></md-input-container><md-input-container><md-checkbox ng-model=\"vm.user.cb1\" aria-label=\"Distributor Admin\">Distributor Admin</md-checkbox></md-input-container><md-input-container class=\"md-block\"><div ng-if=\"vm.isAdmin && vm.allDistributors.length > 1\"><md-select ng-model=\"vm.user.distributor\" required=\"\" aria-label=\"distribuor select\"><label>Distributer</label><md-option ng-repeat=\"distributor in vm.allDistributors\" value=\"{{distributor.name}}\">{{distributor.name}}</md-option></md-select></div><div ng-if=\"!vm.isAdmin && vm.distributorsAsAdmin.length > 1\"><md-select ng-model=\"vm.user.distributor\" required=\"\" aria-label=\"distribuor select\"><label>Distributer</label><md-option ng-repeat=\"distributor in vm.distributorsAsAdmin\" value=\"{{distributor.name}}\">{{distributor.name}}</md-option></md-select></div></md-input-container><md-card-actions layout=\"row\" layout-align=\"end center\"><md-button class=\"md-raised\" type=\"submit\" ng-disabled=\"userForm.$pristine || userForm.$invalid\">Submit</md-button></md-card-actions></form></md-card-content></md-card></div><div flex-xs=\"\" flex-gt-xs=\"30\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">{{vm.currentDistributorName}} Users</span></md-card-title-text></md-card-title><md-card-content><md-list ng-if=\"!vm.loadingUsersOfDistributor\"><md-list-item ng-repeat=\"item in vm.usersOfDistributor | orderBy:\'item\' track by $index\"><p>{{$index + 1}}. {{ item.email }}</p></md-list-item></md-list><h5 ng-if=\"vm.loadingUsersOfDistributor\">Loading...</h5><h5 ng-if=\"!vm.loadingUsersOfDistributor && vm.usersOfDistributor.length < 1\">Sorry, you have no users.</h5></md-card-content></md-card></div></div>");$templateCache.put("app/authentication/sign_in.html","<div id=\"page-wrapper\" ng-init=\"authenticationCtrl.initializeSignIn()\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-lg-12\"><h1 class=\"page-header\">Sign into Skykit Provisioning</h1></div></div><div class=\"row\"><div class=\"col-lg-12\"><google-plus-signin ng-click=\"authenticationCtrl.onClickGooglePlusSignIn()\" clientid=\"{{ authenticationCtrl.clientId }}\" state=\"{{ authenticationCtrl.state }}\" language=\"en\"></google-plus-signin></div></div></div></div>");$templateCache.put("app/authentication/sign_out.html","<div id=\"page-wrapper\" ng-init=\"authenticationCtrl.initializeSignOut()\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-lg-12\"><h1 class=\"page-header\">Signing out of Skykit Provisioning</h1></div></div><div class=\"row\"><div class=\"col-lg-12\"></div></div></div></div>");$templateCache.put("app/authentication/signed_out.html","<div id=\"page-wrapper\" ng-init=\"authenticationCtrl.initializeSignOut()\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-lg-12\"><h1 class=\"page-header\">Signed out</h1></div></div><div class=\"row\"><div class=\"col-lg-12\"><md-button class=\"md-raised md-button\" ng-click=\"authenticationCtrl.proceedToSignIn()\">Sign In</md-button></div></div></div></div>");$templateCache.put("app/domain/domain-detail.html","<div layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-cube ng-scope\"></i> Domain</h2></div></md-toolbar><md-content flex=\"\" layout-padding=\"\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">Domain</span></md-card-title-text></md-card-title><form name=\"domainForm\" class=\"form-horizontal\" ng-submit=\"domainDetailsCtrl.onSaveDomain()\" novalidate=\"\"><md-card-content><div class=\"form-group\" ng-class=\"{ \'has-error\' : domainForm.name.$invalid && !domainForm.name.$pristine }\"><label for=\"domainName\" class=\"col-sm-3 control-label\">Name</label><div class=\"col-sm-4\"><input type=\"text\" class=\"form-control\" name=\"domainName\" id=\"domainName\" ng-readonly=\"domainDetailsCtrl.editMode\" ng-model=\"domainDetailsCtrl.currentDomain.name\" required=\"\"></div><div class=\"col-sm-5\"><p ng-show=\"domainForm.name.$invalid && !domainForm.name.$pristine\" class=\"help-block\">The name is required.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : domainForm.impersonation_admin_email_address.$invalid && !domainForm.impersonation_admin_email_address.$pristine }\"><label for=\"impersonationAdminEmailAddress\" class=\"col-sm-3 control-label\">Impersonation email</label><div class=\"col-sm-4\"><input type=\"text\" class=\"form-control\" name=\"impersonationAdminEmailAddress\" id=\"impersonationAdminEmailAddress\" ng-readonly=\"domainDetailsCtrl.editMode\" ng-model=\"domainDetailsCtrl.currentDomain.impersonation_admin_email_address\" required=\"\"></div><div class=\"col-sm-5\"><p ng-show=\"domainForm.impersonationAdminEmailAddress.$invalid && !domainForm.impersonationAdminEmailAddress.$pristine\" class=\"help-block\">The impersonation email is required.</p></div></div><div class=\"form-group\"><div class=\"col-sm-offset-3 col-sm-9\"><input type=\"checkbox\" id=\"active\" ng-model=\"domainDetailsCtrl.currentDomain.active\"> <label for=\"active\">Active</label></div></div></md-card-content><md-card-actions layout=\"row\" layout-align=\"end center\"><md-button class=\"md-raised md-primary md-button md-ink-ripple\" type=\"submit\" ng-disabled=\"!domainForm.$dirty || domainForm.$invalid\"><i class=\"fa fa-fw fa-save\"></i> Save</md-button></md-card-actions></form></md-card></div></md-content></div>");$templateCache.put("app/domain/domains-listing.html","<div ng-controller=\"DomainsCtrl\" ng-init=\"domainsCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-cube ng-scope\"></i> Domains</h2></div></md-toolbar><md-content><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><div class=\"row\"><div class=\"col-lg-12\"><md-card-actions layout=\"row\" layout-align=\"end center\"><md-button href=\"#/domains/add\" class=\"md-raised md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-plus\"></i> Add</md-button></md-card-actions><table class=\"table table-responsive table-striped\"><thead><tr><th></th><th>Name</th><th>Impersonation Admin Email</th><th>Created</th></tr></thead><tbody><tr ng-hide=\"domainsCtrl.domains.length\"><td class=\"no-devices text-center text-danger\" colspan=\"4\">No domains</td></tr><tr ng-repeat=\"item in domainsCtrl.domains | orderBy:\'-created\'\" ng-click=\"domainsCtrl.editItem(item)\"><td><a ng-click=\"domainsCtrl.editItem(item)\" title=\"Domain detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td class=\"domain-key\"><a name=\"edit-domain\" class=\"md-primary md-ink-ripple\" ng-click=\"domainsCtrl.editItem(item)\" title=\"Edit domain\">{{item.name}}</a></td><td class=\"domain-impersonation-admin-email-address\">{{item.impersonation_admin_email_address}}</td><td class=\"domain-created\">{{item.created}}</td></tr></tbody></table></div></div></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/distributor/distributor_selector.html","<div ng-init=\"vm.initialize()\" layout=\"column\" ng-cloak=\"\"><md-content flex=\"\" layout-padding=\"\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\" ng-show=\"vm.loading\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div flex=\"35\" flex-sm=\"35\" flex-xs=\"35\" layout=\"column\"><md-card><div ng-if=\"!vm.loading && (vm.distributors.length < 1 || vm.distributors.length > 1)\"><md-card-title><md-card-title-text><span class=\"md-headline\">Distributor</span></md-card-title-text></md-card-title><md-card-content><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-lg-12\"><div ng-show=\"vm.distributors.length < 1\"><div class=\"alert alert-warning\" role=\"alert\"><strong>Your account is not associated with a distributor.</strong><br><br>Try signing out, and then back in. If you continue to see this message, please contact Skykit support at <a class=\"md-primary md-ink-ripple\" href=\"mailto:support@skykit.com?subject=Distributor Setup for Account\">support@skykit.com</a> for distributor setup.</div><md-button class=\"md-raised\" ng-href=\"#/sign_out\">Log Out</md-button></div><div ng-show=\"vm.distributors.length > 1\"><md-radio-group class=\"ng-valid ng-dirty ng-valid-parse ng-touched\" role=\"radiogroup\" tabindex=\"0\" aria-invalid=\"false\" style=\"\" ng-repeat=\"distributor in vm.distributors\"><md-radio-button value=\"{{ distributor.name }}\" class=\"md-primary md-checked distributor-selection\" role=\"radio\" aria-label=\"{{ distributor.name }}\" ng-click=\"vm.selectDistributor(distributor);\">{{ distributor.name }}</md-radio-button></md-radio-group></div></div></div></div></md-card-content></div></md-card></div></md-content></div>");$templateCache.put("app/distributor/distributors.html","<div id=\"wrapper\" ng-init=\"tenantsCtrl.initialize()\"><div id=\"page-wrapper\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-lg-12\"><div ncy-breadcrumb=\"\"></div><h1 class=\"page-header\">Distributors</h1></div></div><div class=\"row\"><div class=\"col-lg-12\"></div></div></div></div></div>");$templateCache.put("app/proof/detail.html","<div ng-controller=\"ProofOfPlayCtrl as vm\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-film ng-scope\"></i> Proof of Play</h2></div></md-toolbar><md-content><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-tabs md-dynamic-height=\"\" md-border-bottom=\"\"><div class=\"container\"><div ng-include=\"\'webapp/src/app/proof/resources.html\'\"></div><div ng-include=\"\'webapp/src/app/proof/locations.html\'\"></div><div ng-include=\"\'webapp/src/app/proof/displays.html\'\"></div></div></md-tabs></div></md-content></div>");$templateCache.put("app/proof/displays.html","<md-tab label=\"{{vm.display.title}}\" layout-align=\"center center\"><div ng-controller=\"ProofOfPlayMultiDisplayCtrl as vm\" layout=\"column\" ng-cloak=\"\"><div ng-init=\"vm.initialize()\" class=\"container\"><md-card><div class=\"col-md-12\" ng-init=\"vm.initialize_tenant_select()\"><div class=\"col-md-1\"><h3>{{vm.currentTenant}}</h3></div><div ng-if=\"!vm.tenants\" class=\"col-md-offset-9 proof-of-play-horizontal-top-bar\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.tenants\" class=\"proof-of-play-horizontal-top-bar\"><div class=\"col-md-3 col-md-offset-7\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.tenantselectedItem\" md-search-text=\"vm.tenantsearchText\" md-items=\"item in vm.querySearch(vm.tenants, vm.tenantsearchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isSelectionValid(vm.tenantsearchText)\" md-selected-item-change=\"vm.isSelectionValid(vm.tenantsearchText)\" placeholder=\"Switch Tenants\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\"><md-button md-no-ink=\"\" class=\"md-raised\" ng-disabled=\"vm.disabledTenant\" ng-click=\"vm.submitTenant(vm.tenantsearchText)\">Submit</md-button></div></div></div></md-card><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><div ng-show=\"vm.loading\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.had_some_items && !vm.loading\"><div ng-hide=\"vm.loading\"><h4 class=\"proof-of-play-label\">Display Selection</h4><form ng-submit=\"$event.preventDefault()\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.querySearch(vm.displays, vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isDisplayValid(vm.searchText)\" md-selected-item-change=\"vm.isDisplayValid(vm.searchText)\" placeholder=\"Select a display\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found>No matching item for search \"{{vm.searchText}}\" was found.</md-not-found></md-autocomplete><br><md-button class=\"md-raised\" ng-click=\"vm.addToSelectedDisplays(vm.searchText)\" style=\"float: right\">Add</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshDisplays()\" style=\"float: right\">Refresh</md-button><br><br><br><hr></form></div><div class=\"row\"><div class=\"col-sm-3\"><h4 class=\"proof-of-play-label\">Start Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.start\" ng-change=\"vm.isStartDateValid(vm.dateTimeSelection.start)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div><div class=\"col-sm-3 col-sm-offset-4\"><h4 class=\"proof-of-play-label\">End Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.end\" ng-change=\"vm.isEndDateValid(vm.dateTimeSelection.end)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div></div><hr><md-input-container class=\"md-block\"><h4 class=\"proof-of-play-label\">Report Type</h4><md-radio-group ng-model=\"vm.radioButtonChoices.selection\" ng-change=\"vm.isRadioValid(vm.radioButtonChoices.selection)\"><md-radio-button value=\"1\">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value=\"2\">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class=\"md-raised\" ng-click=\"vm.submit()\" ng-disabled=\"vm.disabled\" style=\"margin-top: 25px; float: right; margin-bottom: 50px\">Submit</md-button></div><div ng-if=\"!vm.had_some_items && !vm.loading\"><h3>This tenant has no displays logged. Make sure your devices have proof of play activated.</h3><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshDisplays()\" style=\"float: right\">Refresh</md-button></div></div></md-card-content></md-card></div><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><h3>Selected Displays</h3><hr><div ng-show=\"vm.selected_displays.length > 0\"><md-list><li ng-repeat=\"item in vm.selected_displays\" class=\"proof-of-play-selected-item\"><md-button md-no-ink=\"\" class=\"md-primary\" id=\"proofplay-selected-items\" ng-click=\"vm.removeFromSelectedDisplay(item)\">X</md-button>{{ item }}</li></md-list></div><div ng-hide=\"vm.selected_displays.length > 0\"><h5>You have no selected displays</h5></div></div></md-card-content></md-card></div></div></div></md-tab>");$templateCache.put("app/proof/locations.html","<md-tab label=\"{{vm.location.title}}\" layout-align=\"center center\"><div ng-controller=\"ProofOfPlayMultiLocationCtrl as vm\" layout=\"column\" ng-cloak=\"\"><div ng-init=\"vm.initialize()\" class=\"container\"><md-card><div class=\"col-md-12\" ng-init=\"vm.initialize_tenant_select()\"><div class=\"col-md-1\"><h3>{{vm.currentTenant}}</h3></div><div ng-if=\"!vm.tenants\" class=\"col-md-offset-9 proof-of-play-horizontal-top-bar\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.tenants\" class=\"proof-of-play-horizontal-top-bar\"><div class=\"col-md-3 col-md-offset-7\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.tenantselectedItem\" md-search-text=\"vm.tenantsearchText\" md-items=\"item in vm.querySearch(vm.tenants, vm.tenantsearchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isSelectionValid(vm.tenantsearchText)\" md-selected-item-change=\"vm.isSelectionValid(vm.tenantsearchText)\" placeholder=\"Switch Tenants\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\"><md-button md-no-ink=\"\" class=\"md-raised\" ng-disabled=\"vm.disabledTenant\" ng-click=\"vm.submitTenant(vm.tenantsearchText)\">Submit</md-button></div></div></div></md-card><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><div ng-show=\"vm.loading\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.had_some_items && !vm.loading\"><div ng-hide=\"vm.loading\"><h4 class=\"proof-of-play-label\">Location Selection</h4><form ng-submit=\"$event.preventDefault()\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.querySearch(vm.locations, vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isLocationValid(vm.searchText)\" md-selected-item-change=\"vm.isLocationValid(vm.searchText)\" placeholder=\"Select a resource\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found>No matching item for search \"{{vm.searchText}}\" was found.</md-not-found></md-autocomplete><br><md-button class=\"md-raised\" ng-click=\"vm.addToSelectedLocations(vm.searchText)\" style=\"float: right\">Add</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshLocations()\" style=\"float: right\">Refresh</md-button><br><br><br><hr></form></div><div class=\"row\"><div class=\"col-sm-3\"><h4 class=\"proof-of-play-label\">Start Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.start\" ng-change=\"vm.isStartDateValid(vm.dateTimeSelection.start)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div><div class=\"col-sm-3 col-sm-offset-4\"><h4 class=\"proof-of-play-label\">End Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.end\" ng-change=\"vm.isEndDateValid(vm.dateTimeSelection.end)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div></div><hr><md-input-container class=\"md-block\"><h4 class=\"proof-of-play-label\">Report Type</h4><md-radio-group ng-model=\"vm.radioButtonChoices.selection\" ng-change=\"vm.isRadioValid(vm.radioButtonChoices.selection)\"><md-radio-button value=\"1\">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value=\"2\">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class=\"md-raised\" ng-click=\"vm.submit()\" ng-disabled=\"vm.disabled\" style=\"margin-top: 25px; float: right; margin-bottom: 50px\">Submit</md-button></div><div ng-if=\"!vm.had_some_items && !vm.loading\"><h3>This tenant has no locations logged. Make sure your devices have proof of play activated.</h3><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshLocations()\" style=\"float: right\">Refresh</md-button></div></div></md-card-content></md-card></div><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><h3>Selected Locations</h3><hr><div ng-show=\"vm.selected_locations.length > 0\"><md-list><li ng-repeat=\"item in vm.selected_locations\" class=\"proof-of-play-selected-item\"><md-button md-no-ink=\"\" class=\"md-primary\" id=\"proofplay-selected-items\" ng-click=\"vm.removeFromSelectedLocation(item)\">X</md-button>{{ item }}</li></md-list></div><div ng-hide=\"vm.selected_locations.length > 0\"><h5>You have no selected locations</h5></div></div></md-card-content></md-card></div></div></div></md-tab>");$templateCache.put("app/proof/main.html","<div ng-controller=\"ProofOfPlayCtrl as vm\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-film ng-scope\"></i> Proof of Play</h2></div></md-toolbar><md-content><div class=\"container\"><div ng-init=\"vm.initialize()\" style=\"margin-top: 1em;\"><div ng-hide=\"vm.tenants\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><div class=\"col-md-12\"><h3>Loading Tenants...</h3></div><div class=\"col-md-1\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div></div><div ng-show=\"vm.tenants\"><div ng-if=\"vm.tenants.length > 0\"><h3>Please choose a tenant</h3></div><hr><div class=\"col-md-12\"><div class=\"col-md-6\"><div ng-if=\"vm.tenants.length > 0\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.querySearch(vm.tenants, vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isSelectionValid( vm.searchText)\" md-selected-item-change=\"vm.isSelectionValid( vm.searchText)\" placeholder=\"Make A Search\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div ng-if=\"vm.tenants.length < 1\"><h3>Sorry, you do not have any tenants. Please create one, and then Refresh.</h3></div></div><div class=\"col-md-5\" style=\"margin-top: -3px\"><md-button md-no-ink=\"\" class=\"md-raised\" ng-disabled=\"vm.disabled || vm.tenants.length < 1\" ng-click=\"vm.submitTenant(vm.searchText)\">Submit</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshTenants()\">Refresh</md-button></div></div></div></div></div></md-content></div>");$templateCache.put("app/proof/resources.html","<md-tab label=\"{{vm.resource.title}}\" layout-align=\"center center\"><div ng-controller=\"ProofOfPlayMultiResourceCtrl as vm\" layout=\"column\" ng-cloak=\"\"><div ng-init=\"vm.initialize()\" class=\"container\"><md-card><div class=\"col-md-12\" ng-init=\"vm.initialize_tenant_select()\"><div class=\"col-md-1\"><h3>{{vm.currentTenant}}</h3></div><div ng-if=\"!vm.tenants\" class=\"col-md-offset-9 proof-of-play-horizontal-top-bar\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.tenants\" class=\"proof-of-play-horizontal-top-bar\"><div class=\"col-md-3 col-md-offset-7\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.tenantselectedItem\" md-search-text=\"vm.tenantsearchText\" md-items=\"item in vm.querySearch(vm.tenants, vm.tenantsearchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isSelectionValid(vm.tenantsearchText)\" md-selected-item-change=\"vm.isSelectionValid(vm.tenantsearchText)\" placeholder=\"Switch Tenants\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\"><md-button md-no-ink=\"\" class=\"md-raised\" ng-disabled=\"vm.disabledTenant\" ng-click=\"vm.submitTenant(vm.tenantsearchText)\">Submit</md-button></div></div></div></md-card><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><div ng-show=\"vm.loading\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"vm.had_some_items && !vm.loading\"><div ng-hide=\"vm.loading\"><h4 class=\"proof-of-play-label\">Resource Selection</h4><form ng-submit=\"$event.preventDefault()\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.querySearch(vm.resources, vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isResourceValid(vm.searchText)\" md-selected-item-change=\"vm.isResourceValid(vm.searchText)\" placeholder=\"Select a resource\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found>No matching item for search \"{{vm.searchText}}\" was found.</md-not-found></md-autocomplete><br><md-button class=\"md-raised\" ng-click=\"vm.addToSelectedResources(vm.searchText)\" style=\"float: right\">Add</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshResources()\" style=\"float: right\">Refresh</md-button><br><br><br><hr></form></div><div class=\"row\"><div class=\"col-sm-3\"><h4 class=\"proof-of-play-label\">Start Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.start\" ng-change=\"vm.isStartDateValid(vm.dateTimeSelection.start)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div><div class=\"col-sm-3 col-sm-offset-4\"><h4 class=\"proof-of-play-label\">End Date</h4><md-datepicker ng-model=\"vm.dateTimeSelection.end\" ng-change=\"vm.isEndDateValid(vm.dateTimeSelection.end)\" required=\"\" md-placeholder=\"Enter date\"></md-datepicker></div></div><hr><md-input-container class=\"md-block\"><h4 class=\"proof-of-play-label\">Report Type</h4><md-radio-group ng-model=\"vm.radioButtonChoices.selection\" ng-change=\"vm.isRadioValid(vm.radioButtonChoices.selection)\"><md-radio-button value=\"1\">{{vm.radioButtonChoices.group1}}</md-radio-button><md-radio-button value=\"2\">{{vm.radioButtonChoices.group2}}</md-radio-button></md-radio-group></md-input-container><hr><md-button class=\"md-raised\" ng-click=\"vm.submit()\" ng-disabled=\"vm.disabled\" style=\"margin-top: 25px; float: right; margin-bottom: 50px\">Submit</md-button></div><div ng-if=\"!vm.had_some_items && !vm.loading\"><h3>This tenant has no resources logged. Make sure your devices have proof of play activated.</h3><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshResources()\" style=\"float: right\">Refresh</md-button></div></div></md-card-content></md-card></div><div style=\"text-align: left\" class=\"col-md-6\"><md-card><md-card-content><div class=\"md-padding\"><h3>Selected Resources</h3><hr><div ng-show=\"vm.selected_resources.length > 0\"><md-list><li ng-repeat=\"item in vm.selected_resources\" class=\"proof-of-play-selected-item\"><md-button md-no-ink=\"\" class=\"md-primary\" id=\"proofplay-selected-items\" ng-click=\"vm.removeFromSelectedResource(item)\">X</md-button>{{ item }}</li></md-list></div><div ng-hide=\"vm.selected_resources.length > 0\"><h5>You have no selected resources</h5></div></div></md-card-content></md-card></div></div></div></md-tab>");$templateCache.put("app/welcome/welcome.html","<div ng-controller=\"WelcomeCtrl as vm\" ng-init=\"vm.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\">{{ vm.identity.distributorName }}</h2></div></md-toolbar><md-content class=\"md-padding\" layout=\"row\" layout-wrap=\"\" layout-xs=\"column\"><div class=\"my-flex container\" style=\"text-align: center\"><div flex=\"35\" flex-sm=\"50\" flex-xs=\"50\" layout=\"column\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\"><i class=\"fa fa-fw fa-tag ng-scope\"></i> Version</span></md-card-title-text></md-card-title><md-card-content><table class=\"table\"><tbody><tr><td class=\"text-right col-md-3\">Number:</td><td class=\"col-md-3\">{{vm.version_data.number}}</td></tr><tr><td class=\"text-right col-md-3\">Module:</td><td class=\"col-md-3\">{{vm.version_data.web_module_name}}</td></tr><tr><td class=\"text-right col-md-3\">Tag:</td><td class=\"col-md-3\">{{vm.version_data.web_version_name}}</td></tr><tr><td class=\"text-right col-md-3\">Hostname:</td><td class=\"col-md-3 hostname-word-break\">{{vm.version_data.hostname}}</td></tr></tbody></table></md-card-content></md-card></div><div flex=\"60\" flex-sm=\"60\" flex-xs=\"60\" layout=\"column\"><md-card><md-card-title><md-card-title-text><h3>Welcome <b>{{ vm.identity.email }}</b>!</h3></md-card-title-text></md-card-title><md-card-content><div ng-if=\"vm.loading\"><div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\"><md-progress-circular md-mode=\"indeterminate\"></md-progress-circular></div></div><div ng-if=\"!vm.loading\"><h3>You are signed in under the <b>{{ vm.identity.distributorName }}</b> distributor.</h3><p>Click on the hamburger icon in the top-left to get started.</p><div ng-if=\"vm.has_multiple_distributors\"><h5>OR</h5><h4>Click<md-button class=\"md-raised\" ng-click=\"vm.changeDistributor()\">Here</md-button>to change your Distributor</h4></div></div></md-card-content></md-card></div></div></md-content></div>");$templateCache.put("app/device/device-command-history.html","<div ng-controller=\"DeviceDetailsCommandsCtrl as vm\" ng-init=\"vm.initialize()\"><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><h3>Command History</h3><hr><div class=\"row\"><div class=\"col-md-12\"><md-button class=\"md-raised\" ng-disabled=\"!vm.event_prev_cursor\" ng-click=\"vm.paginateEventCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.event_next_cursor\" ng-click=\"vm.paginateEventCall(true)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.getEvents(vm.deviceKey)\">Refresh</md-button><hr></div><div class=\"col-lg-12\"><table class=\"table table-responsive table-striped\"><thead><tr><th>Command</th><th>Posted (US/Central)</th><th>Confirmed (US/Central)</th><th>Issued by</th><th style=\"width:1px\"></th></tr></thead><tbody><tr ng-hide=\"vm.commandEvents.length\"><td class=\"text-center text-warning\" colspan=\"4\">No commands posted to this player</td></tr><tr ng-repeat=\"item in vm.commandEvents | orderBy:[\'-postedTime\']\"><td class=\"command-history-command\">{{ item.payload }}</td><td>{{ item.postedTime }}</td><td>{{ item.confirmedTime }}</td><td>{{ item.userIdentifier }}</td><td class=\"up-{{ item.confirmed}}-background\"></td></tr></tbody></table></div><div class=\"col-md-12\" ng-if=\"vm.commandEvents.length > 10\"><hr><md-button class=\"md-raised\" ng-disabled=\"!vm.event_prev_cursor\" ng-click=\"vm.paginateEventCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.event_next_cursor\" ng-click=\"vm.paginateEventCall(true)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.getEvents(vm.deviceKey)\">Refresh</md-button><hr></div></div></md-card-content></md-card></div></div>");$templateCache.put("app/device/device-command.html","<div ng-controller=\"DeviceDetailsCommandsCtrl as vm\" ng-init=\"vm.initialize()\"><md-content class=\"md-padding\" layout=\"row\" layout-wrap=\"\" layout-align=\"left start\" layout-xs=\"column\"><div flex=\"40\" flex-sm=\"70\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><h3>Commands</h3><hr><md-content class=\"md-padding\" layout=\"row\" layout-wrap=\"\" layout-xs=\"column\"><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Reset Content</h5></div><div flex=\"55\"><form name=\"resetContentForm\" class=\"form-horizontal\" ng-submit=\"vm.onResetContent()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Reset Content\"><md-tooltip>skykit.com/skdchromeapp/content/delete</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Update Content</h5></div><div flex=\"55\"><form name=\"updateContentForm\" class=\"form-horizontal\" ng-submit=\"vm.onUpdateContent()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Update Content\"><md-tooltip>skykit.com/skdchromeapp/update/content</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Reset Player</h5></div><div flex=\"55\"><form name=\"resetPlayerForm\" class=\"form-horizontal\" ng-submit=\"vm.onResetPlayer()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Reset Player\"><md-tooltip>skykit.com/skdchromeapp/reset</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Panel On</h5></div><div flex=\"55\"><form name=\"panelOnForm\" class=\"form-horizontal\" ng-submit=\"vm.onPanelOn()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Panel On\"><md-tooltip>skykit.com/skdchromeapp/tv/on</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Panel Off</h5></div><div flex=\"55\"><form name=\"panelOffForm\" class=\"form-horizontal\" ng-submit=\"vm.onPanelOff()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Panel Off\"><md-tooltip>skykit.com/skdchromeapp/tv/off</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><div layout=\"row\"><div flex=\"55\"><h5 class=\"md-headline\" style=\"padding-left: 15px\">Update Device</h5></div><div flex=\"55\"><form name=\"updateDeviceForm\" class=\"form-horizontal\" ng-submit=\"vm.onUpdateDevice()\" novalidate=\"\"><div layout=\"row\"><md-button type=\"submit\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button><md-button class=\"md-fab md-primary\" aria-label=\"Update Device\"><md-tooltip>skykit.com/skdchromeapp/update/provisioning</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></form></div></div></md-card><md-card flex=\"100\"><md-card-title><md-card-title-text><span class=\"md-headline\">Volume</span></md-card-title-text></md-card-title><md-card-content><form name=\"volumeForm\" class=\"form-horizontal\" ng-submit=\"vm.onVolumeChange()\" novalidate=\"\"><div layout=\"row\"><div flex=\"40\"><input type=\"number\" class=\"form-control\" name=\"volume\" id=\"volume\" ng-model=\"vm.currentDevice.volume\" min=\"1\" max=\"100\" ngminlength=\"1\" ngmaxlength=\"3\" ng-required=\"true\"></div><div flex=\"60\"><md-button type=\"submit\" ng-disabled=\"!volumeForm.$dirty || volumeForm.$invalid\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button></div></div></form></md-card-content></md-card><md-card flex=\"100\"><md-card-title><md-card-title-text><span class=\"md-headline\">Custom</span></md-card-title-text></md-card-title><md-card-content><form name=\"customForm\" class=\"form-horizontal\" ng-submit=\"vm.onCustomCommand()\" novalidate=\"\"><div layout=\"row\"><div flex=\"70\"><input type=\"text\" class=\"form-control\" name=\"custom\" id=\"custom\" ng-model=\"vm.currentDevice.custom\" ng-required=\"true\"></div><div flex=\"30\"><md-button type=\"submit\" ng-disabled=\"!customForm.$dirty || customForm.$invalid\"><i class=\"fa fa-fw fa-building\"></i> Send</md-button></div></div></form></md-card-content></md-card></md-content></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/device/device-detail.html","<div ng-controller=\"DeviceDetailsCtrl\" ng-init=\"deviceDetailsCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-desktop ng-scope\"></i> Devices</h2></div></md-toolbar><md-content flex=\"\" layout-padding=\"\"><div flex=\"100\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div><md-card><md-card-content><div class=\"col-sm-5\"><div ng-show=\"deviceDetailsCtrl.currentDevice.macAddress\"><h5><i class=\"fa fa-fw fa-wifi\"></i> Wifi Mac Address: {{deviceDetailsCtrl.currentDevice.macAddress}}</h5></div><div ng-show=\"deviceDetailsCtrl.currentDevice.ethernetMacAddress\"><h5><i class=\"fa fa-fw fa-plug\"></i> Ethernet Mac Address: {{deviceDetailsCtrl.currentDevice.ethernetMacAddress }}</h5></div><div ng-show=\"deviceDetailsCtrl.currentDevice.serialNumber\"><h5><i class=\"fa fa-hashtag\"></i> Serial Number: {{deviceDetailsCtrl.currentDevice.serialNumber}}</h5></div></div><div class=\"col-sm-2 col-sm-offset-4\"><md-button ngclipboard=\"\" data-clipboard-target=\"#hidden-device-key\" ng-click=\"deviceDetailsCtrl.copyDeviceKey()\" class=\"md-raised\"><i class=\"fa fa-fw fa-clipboard\"></i> Copy Device key</md-button><a href=\"{{deviceDetailsCtrl.backUrl}}\" class=\"md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-backward\"></i>Back</a></div></md-card-content></md-card><md-tabs md-dynamic-height=\"\" md-border-bottom=\"\"><md-tab label=\"Properties\"><div ng-include=\"\'webapp/src/app/device/device-properties.html\'\"></div></md-tab><md-tab label=\"Events\"><div ng-include=\"\'webapp/src/app/device/device-event.html\'\"></div></md-tab><md-tab label=\"Commands\"><div ng-include=\"\'webapp/src/app/device/device-command.html\'\"></div></md-tab><md-tab label=\"Command History\"><div ng-include=\"\'webapp/src/app/device/device-command-history.html\'\"></div></md-tab></md-tabs></div></md-content><div id=\"hidden-device-key\" class=\"copy-ready-device-key\">{{deviceDetailsCtrl.currentDevice.key}}</div></div>");$templateCache.put("app/device/device-event.html","<div ng-controller=\"DeviceDetailsEventsCtrl as vm\" ng-init=\"vm.initialize()\"><md-content class=\"md-padding\"><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><form name=\"tenantForm\" class=\"form-horizontal\" ng-submit=\"vm.onClickRefreshButton()\" novalidate=\"\"><div class=\"row\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.prev_cursor\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.next_cursor\" ng-click=\"vm.paginateCall(true)\">Next</md-button></div><div class=\"col-sm-2 col-sm-offset-3\"><b><p>From:</p></b><input type=\"text\" class=\"form-control input-sm\" datetimepicker=\"\" datetimepicker-options=\"{{vm.pickerOptions}}\" placeholder=\"{{vm.startTime}}\" name=\"startTime\" id=\"startTime\" ng-model=\"vm.startTime\"></div><div class=\"col-sm-2\"><b><p>To:</p></b><input type=\"text\" class=\"form-control input-sm\" datetimepicker=\"\" datetimepicker-options=\"{{vm.pickerOptions}}\" placeholder=\"{{vm.endTime}}\" name=\"endTime\" id=\"endTime\" ng-model=\"vm.endTime\"></div><div class=\"col-sm-2\"><md-button type=\"submit\" class=\"md-raised\"><i class=\"fa fa-fw fa-filter\"></i> Filter</md-button></div></div></form></md-card-content></md-card><md-card><md-card-content><div class=\"row margin-top-15\"><div class=\"col-lg-12\"><table class=\"table table-responsive table-striped\"><thead><tr><th width=\"3px\"></th><th>Category</th><th>Memory</th><th>Storage</th><th>Program</th><th>Event created</th><th>Last updated</th><th></th></tr></thead><tbody><tr ng-hide=\"vm.issues.length\"><td class=\"text-center text-warning\" colspan=\"8\">No events logged in the past {{vm.dayRange}} days.<br>Please try an earlier \'From date\' above.</td></tr><tr ng-repeat=\"item in vm.issues | orderBy:[\'-updated\']\"><td class=\"issue-{{ item.level_descriptor}}-background\"></td><td>{{ item.category }}</td><td>{{ item.memory_utilization }}%</td><td>{{ item.storage_utilization }}%</td><td>{{ item.program }}</td><td>{{ item.created }}</td><td>{{ item.updated }}</td><td class=\"issue-{{ item.level_descriptor}}-text\"><i ng-class=\"item.level==1? \'fa fa-fw fa-warning\' : item.level==0? \'fa fa-fw fa-check-circle\': \'fa fa-fw fa-ambulance\'\"></i> {{ item.elapsed_time }}</td></tr></tbody></table></div></div></md-card-content></md-card><md-card><md-card-content><form name=\"tenantForm\" class=\"form-horizontal\" ng-submit=\"vm.onClickRefreshButton()\" novalidate=\"\"><div class=\"row\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.prev_cursor\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.next_cursor\" ng-click=\"vm.paginateCall(true)\">Next</md-button></div></div></form></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/device/device-listing-managed.html","<md-content class=\"md-padding\"><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\" id=\"to-pin\"><md-card><md-card-content><div class=\"col-md-12\" id=\"to-pin\"><div class=\"col-sm-4\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false, true)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true, true)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshManagedDevices()\">Refresh</md-button></div><div class=\"col-md-3 col-md-offset-1\"><md-radio-group ng-model=\"vm.selectedButton\" ng-change=\"vm.changeRadio(false)\" class=\"radio-horizontal\"><div class=\"col-md-4\"><md-radio-button value=\"Serial Number\" class=\"md-primary\">Serial Number</md-radio-button></div><div class=\"col-md-2 col-md-offset-2\"><md-radio-button value=\"MAC\" class=\"md-primary radio-button\">MAC</md-radio-button></div></md-radio-group></div><div class=\"col-md-3\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.searchDevices(false, vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isResourceValid(false, vm.searchText)\" md-selected-item-change=\"vm.isResourceValid(false, vm.searchText)\" placeholder=\"Make A Search\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\"><div style=\"margin-left: -20px !important; margin-top: -4px !important\"><md-button class=\"md-raised md-primary\" aria-label=\"OPEN\" ng-disabled=\"vm.disabled\" ng-click=\"vm.prepareForEditView(false, vm.searchText)\"><div ng-if=\"!vm.disabledButtonLoading\">OPEN</div><div ng-if=\"vm.disabledButtonLoading\">Loading...</div></md-button></div></div></div></md-card-content></md-card><md-card><md-card-content><md-data-table-container layout=\"column\"><table class=\"table table-responsive table-striped\"><thead><tr><th></th><th>Tenant code</th><th><i class=\"fa fa-fw fa-wifi\"></i> MAC</th><th><i class=\"fa fa-fw fa-plug\"></i> MAC</th><th>Serial number</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide=\"vm.devices.length\"><td class=\"no-devices text-center text-danger\" colspan=\"7\">No managed devices retrieved</td></tr><tr ng-repeat=\"item in vm.devices | orderBy:\'-created\'\" ng-click=\"vm.editItem(item)\"><td><a ng-click=\"vm.editItem(item)\" title=\"Device detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{ item.tenantCode }}</td><td>{{ item.macAddress || \"None\" }}</td><td>{{ item.ethernetMacAddress || \"None\" }}</td><td><a name=\"edit-device\" class=\"md-primary md-ink-ripple\" ng-click=\"vm.editItem(item)\" title=\"Device detail\">{{item.serialNumber}}</a></td><td>{{ item.created }}</td><td class=\"up-{{ item.up}}-background\"></td></tr></tbody></table></md-data-table-container></md-card-content></md-card><md-card ng-if=\"vm.devices.length > 10\"><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false, true)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true, true)\">Next</md-button></div></div></md-card-content></md-card></div></md-content>");$templateCache.put("app/device/device-listing-unmanaged.html","<md-content class=\"md-padding\"><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-4\"><md-button class=\"md-raised\" ng-disabled=\"!vm.unmanagedDevicesPrev\" ng-click=\"vm.paginateCall(false, false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.unmanagedDevicesNext\" ng-click=\"vm.paginateCall(true, false)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshUnmanagedDevices()\">Refresh</md-button></div><div class=\"col-md-3 col-md-offset-1\"><md-radio-group ng-model=\"vm.unmanagedSelectedButton\" ng-change=\"vm.changeRadio(false)\" class=\"radio-horizontal\"><div class=\"col-md-4\"><md-radio-button value=\"Serial Number\" class=\"md-primary\" ng-disabled=\"true\">Serial Number</md-radio-button></div><div class=\"col-md-2 col-md-offset-2\"><md-radio-button value=\"MAC\" class=\"md-primary radio-button\">MAC</md-radio-button></div></md-radio-group></div><div class=\"col-md-3\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.unmanagedSelectedItem\" md-search-text=\"vm.unmanagedSearchText\" md-items=\"item in vm.searchDevices(true, vm.unmanagedSearchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isResourceValid(true, vm.unmanagedSearchText)\" md-selected-item-change=\"vm.isResourceValid(true, vm.unmanagedSearchText)\" placeholder=\"Make A Search\"><md-item-template><span md-highlight-text=\"vm.unmanagedSearchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.unmanagedSearchText !== \'\' && vm.unmanagedSearchText.length > 2\">No results for \"{{vm.unmanagedSearchText}}\" were found.</div><div ng-if=\"vm.unmanagedSearchText !== \'\' && vm.unmanagedSearchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\" style=\"margin-left: -20px !important; margin-top: -4px !important\"><md-button class=\"md-raised md-primary\" ng-disabled=\"vm.unmanagedDisabled\" aria-label=\"OPEN\" ng-click=\"vm.prepareForEditView(true, vm.unmanagedSearchText)\"><div ng-if=\"!vm.unmanagedDisabledButtonLoading\">OPEN</div><div ng-if=\"vm.unmanagedDisabledButtonLoading\">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><md-data-table-container layout=\"column\"><table class=\"table table-responsive table-striped\"><thead><tr><th></th><th>Tenant code</th><th><i class=\"fa fa-fw fa-wifi\"></i> MAC</th><th><i class=\"fa fa-fw fa-plug\"></i> MAC</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide=\"vm.unmanagedDevices.length\"><td class=\"no-devices text-center text-danger\" colspan=\"6\">No unmanaged devices retrieved</td></tr><tr ng-repeat=\"item in vm.unmanagedDevices | orderBy:\'-created\'\"><td><a ng-click=\"vm.editItem(item)\" title=\"Device detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{ item.tenantCode }}</td><td>{{ item.macAddress || \"None\" }}</td><td>{{ item.ethernetMacAddress || \"None\" }}</td><td>{{ item.created }}</td><td class=\"up-{{ item.up}}-background\"></td></tr></tbody></table></md-data-table-container></md-card-content></md-card><md-card ng-if=\"vm.unmanagedDevices.length > 10\"><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.unmanagedDevicesPrev\" ng-click=\"vm.paginateCall(false, false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.unmanagedDevicesNext\" ng-click=\"vm.paginateCall(true, false)\">Next</md-button></div></div></md-card-content></md-card></div></md-content>");$templateCache.put("app/device/device-properties.html","<md-content class=\"md-padding\" layout=\"row\" layout-wrap=\"\" layout-align=\"left start\" layout-xs=\"column\"><div flex=\"50\" flex-sm=\"50\" flex-xs=\"50\" layout=\"column\"><md-card><md-card-content><h2>Information</h2><hr><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.serialNumber == null || deviceDetailsCtrl.currentDevice.serialNumber == \'\'\"><label>Serial number</label><div>{{deviceDetailsCtrl.currentDevice.serialNumber}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.annotatedLocation == null || deviceDetailsCtrl.currentDevice.annotatedLocation == \'\'\"><label>Annotated location</label><div>{{deviceDetailsCtrl.currentDevice.annotatedLocation}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.annotatedUser == null || deviceDetailsCtrl.currentDevice.annotatedUser == \'\'\"><label>Annotated user</label><div>{{deviceDetailsCtrl.currentDevice.annotatedUser}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.apiKey == null || deviceDetailsCtrl.currentDevice.apiKey == \'\'\"><label>API key</label><div>{{deviceDetailsCtrl.currentDevice.apiKey}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.bootMode == null || deviceDetailsCtrl.currentDevice.bootMode == \'\'\"><label>Boot mode</label><div>{{deviceDetailsCtrl.currentDevice.bootMode}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.chromeDeviceDomain == null || deviceDetailsCtrl.currentDevice.chromeDeviceDomain == \'\'\"><label>Chrome device domain</label><div>{{deviceDetailsCtrl.currentDevice.chromeDeviceDomain}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.contentServerUrl == null || deviceDetailsCtrl.currentDevice.contentServerUrl == \'\'\"><label>Content server URL</label><div>{{deviceDetailsCtrl.currentDevice.contentServerUrl}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.created == null || deviceDetailsCtrl.currentDevice.created == \'\'\"><label>Created timestamp</label><div>{{deviceDetailsCtrl.currentDevice.created}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.deviceId == null || deviceDetailsCtrl.currentDevice.deviceId == \'\'\"><label>Device ID</label><div>{{deviceDetailsCtrl.currentDevice.deviceId}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.etag == null || deviceDetailsCtrl.currentDevice.etag == \'\'\"><label>ETag</label><div>{{deviceDetailsCtrl.currentDevice.etag}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.firmwareVersion == null || deviceDetailsCtrl.currentDevice.firmwareVersion == \'\'\"><label>Firmware version</label><div>{{deviceDetailsCtrl.currentDevice.firmwareVersion}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.gcmRegistrationId == null || deviceDetailsCtrl.currentDevice.gcmRegistrationId == \'\'\"><label>GCM registration ID</label><div class=\"gcm-registration-id-word-break\">{{deviceDetailsCtrl.currentDevice.gcmRegistrationId}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.kind == null || deviceDetailsCtrl.currentDevice.kind == \'\'\"><label>Kind</label><div>{{deviceDetailsCtrl.currentDevice.kind}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.lastEnrollmentTime == null || deviceDetailsCtrl.currentDevice.lastEnrollmentTime == \'\'\"><label>Last enrollment</label><div>{{deviceDetailsCtrl.currentDevice.lastEnrollmentTime}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.lastSync == null || deviceDetailsCtrl.currentDevice.lastSync == \'\'\"><label>Last sync</label><div>{{deviceDetailsCtrl.currentDevice.lastSync}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.logglyLink == null || deviceDetailsCtrl.currentDevice.logglyLink == \'\'\"><div ng-show=\"deviceDetailsCtrl.logglyForUser()\"><label>Loggly</label><div><a ng-href=\"{{deviceDetailsCtrl.currentDevice.logglyLink}}\" class=\"md-primary md-ink-ripple\">{{deviceDetailsCtrl.currentDevice.logglyLink}}</a></div></div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.macAddress == null || deviceDetailsCtrl.currentDevice.macAddress == \'\'\"><label>MAC WiFi</label><div>{{deviceDetailsCtrl.currentDevice.macAddress}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.ethernetMacAddress == null || deviceDetailsCtrl.currentDevice.ethernetMacAddress == \'\'\"><label>Ethernet MAC</label><div>{{deviceDetailsCtrl.currentDevice.ethernetMacAddress}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.model == null || deviceDetailsCtrl.currentDevice.model == \'\'\"><label>Model</label><div>{{deviceDetailsCtrl.currentDevice.model}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.osVersion == null || deviceDetailsCtrl.currentDevice.osVersion == \'\'\"><label>OS version</label><div>{{deviceDetailsCtrl.currentDevice.osVersion}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.orgUnitPath == null || deviceDetailsCtrl.currentDevice.orgUnitPath == \'\'\"><label>OU path</label><div>{{deviceDetailsCtrl.currentDevice.orgUnitPath}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.platformVersion == null || deviceDetailsCtrl.currentDevice.platformVersion == \'\'\"><label>Platform version</label><div>{{deviceDetailsCtrl.currentDevice.platformVersion}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.status == null || deviceDetailsCtrl.currentDevice.status == \'\'\"><label>Status</label><div>{{deviceDetailsCtrl.currentDevice.status}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.tenantCode == null || deviceDetailsCtrl.currentDevice.tenantCode == \'\'\"><label>Tenant code</label><div>{{deviceDetailsCtrl.currentDevice.tenantCode}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.timezone == null || deviceDetailsCtrl.currentDevice.timezone == \'\'\"><label>Timezone</label><div>{{deviceDetailsCtrl.currentDevice.timezone}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.isUnmanagedDevice == null || deviceDetailsCtrl.currentDevice.isUnmanagedDevice == \'\'\"><label>Unmanaged</label><div>{{deviceDetailsCtrl.currentDevice.isUnmanagedDevice}}</div></div><div class=\"form-group\" ng-hide=\"deviceDetailsCtrl.currentDevice.updated == null || deviceDetailsCtrl.currentDevice.updated == \'\'\"><label>Updated timestamp</label><div>{{deviceDetailsCtrl.currentDevice.updated}}</div></div></md-card-content></md-card><md-card><md-card-content><h2>Delete</h2><hr><div class=\"form-group\"><label>Device key</label><div class=\"gcm-registration-id-word-break\">{{deviceDetailsCtrl.currentDevice.key}}</div><md-card-actions layout=\"row\" layout-align=\"end center\"><button class=\"md-raised md-primary md-button md-ink-ripple\" type=\"button\" aria-label=\"Delete\" layout-align=\"right\" ng-click=\"deviceDetailsCtrl.confirmDeviceDelete( $event, deviceDetailsCtrl.currentDevice.key)\"><i class=\"fa fa-fw fa-trash ng-scope\"></i><span class=\"ng-scope\">Delete</span></button></md-card-actions></div></md-card-content></md-card></div><div flex=\"50\" flex-sm=\"50\" flex-xs=\"50\" layout=\"column\"><md-card><md-card-content><h2>Edit</h2><hr><form name=\"deviceForm\" class=\"form-horizontal\" ng-submit=\"deviceDetailsCtrl.onSaveDevice()\" novalidate=\"\"><section name=\"proofOfPlay\" ng-show=\"deviceDetailsCtrl.currentDevice.proofOfPlayEditable\"><h3>Proof of play</h3><div class=\"form-group\"><div class=\"col-sm-2\"><label>Logging</label><div><input type=\"checkbox\" ng-model=\"deviceDetailsCtrl.currentDevice.proofOfPlayLogging\" ng-change=\"deviceDetailsCtrl.onProofOfPlayLoggingCheck()\"> <span>Enable</span></div></div><div class=\"col-sm-2\"><md-button class=\"md-fab md-primary\" aria-label=\"Proof of play logging\" ng-show=\"deviceDetailsCtrl.currentDevice.proofOfPlayLogging == false && (deviceDetailsCtrl.currentDevice.locationKey == null || deviceDetailsCtrl.currentDevice.customerDisplayCode == null)\"><md-tooltip>A device must have a Location and Display code to it to enable Proof of play logging.</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></div><hr></section><section name=\"location\"><h3>Location</h3><div class=\"form-group\"><div class=\"col-sm-5\"><label>Panel location</label><select id=\"customerLocationName\" class=\"form-control\" ng-model=\"deviceDetailsCtrl.currentDevice.location\" ng-options=\"i.customerLocationName for i in deviceDetailsCtrl.locations track by i.key\" ng-change=\"deviceDetailsCtrl.onUpdateLocation()\"></select></div><div class=\"col-sm-2\"><md-button class=\"md-fab md-primary\" aria-label=\"Customer Location Name\" ng-hide=\"deviceDetailsCtrl.currentDevice.proofOfPlayLogging || deviceDetailsCtrl.currentDevice.locationKey != null\"><md-tooltip>Locations may be added or edited in the Locations tab of the tenant view for the tenant {{deviceDetailsCtrl.currentDevice.tenantName}}.</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></div><hr></section><section name=\"displayCode\"><h3>Display code</h3><div class=\"form-group\"><div class=\"col-sm-6\"><label>Customer display name</label><div><input type=\"text\" class=\"form-control\" autofocus=\"\" name=\"customerDisplayName\" placeholder=\"e.g., Panel in Front Reception\" ng-change=\"deviceDetailsCtrl.autoGenerateCustomerDisplayCode()\" ng-model=\"deviceDetailsCtrl.currentDevice.customerDisplayName\"></div></div><div class=\"col-sm-6\" ng-class=\"{ \'has-error\' : deviceForm.customerDisplayCode.$invalid && !deviceForm.customerDisplayCode.$pristine }\"><label>Customer display code</label><div><input type=\"text\" class=\"form-control\" name=\"customerDisplayCode\" placeholder=\"auto-generated\" ng-model=\"deviceDetailsCtrl.currentDevice.customerDisplayCode\" ng-pattern=\"/^[a-z0-9_]*$/\"><p ng-show=\"deviceForm.customerDisplayCode.$invalid && !deviceForm.customerDisplayCode.$invalid.$pristine\" class=\"help-block\">Alphanumeric and underscore allowed.</p></div></div></div><hr></section><section name=\"serialControl\"><h3>Serial control</h3><div class=\"form-group\"><div class=\"col-sm-5\"><label>Panel model</label><select id=\"panelModel\" class=\"form-control\" ng-model=\"deviceDetailsCtrl.currentDevice.panelModel\" ng-options=\"p.displayName for p in deviceDetailsCtrl.panelModels track by p.id\"></select></div><div class=\"col-sm-5\"><label>Panel input</label><select id=\"panelInput\" class=\"form-control\" ng-required=\"deviceDetailsCtrl.currentDevice.panelModel !== null\" ng-model=\"deviceDetailsCtrl.currentDevice.panelInput\" ng-options=\"c.id for c in deviceDetailsCtrl.panelInputs | filter:{parentId: deviceDetailsCtrl.currentDevice.panelModel.id}\"></select></div></div><hr></section><section name=\"timezone\"><h3>Timezone</h3><div class=\"form-group\" ng-class=\"{ \'has-error\' : deviceForm.timezone.$invalid && !deviceForm.timezone.$pristine }\"><div class=\"col-sm-4\"><br><select id=\"timezone\" ng-model=\"deviceDetailsCtrl.selectedTimezone\" class=\"form-control\" ng-options=\"item for item in deviceDetailsCtrl.timezones track by item\"><option value=\"\">Select timezone</option></select></div></div><hr></section><section name=\"intervals\"><h3>Intervals</h3><div class=\"form-group\"><div class=\"col-sm-4\"><label>Check content</label> <input type=\"number\" class=\"form-control\" name=\"checkContentInterval\" id=\"checkContentInterval\" ng-model=\"deviceDetailsCtrl.currentDevice.checkContentInterval\" min=\"0\" ng-required=\"true\">minutes</div><div class=\"col-sm-4\"><label>Player heartbeat</label><br>{{deviceDetailsCtrl.currentDevice.heartbeatInterval}} minutes</div></div><hr></section><section name=\"notes\"><h3>Notes</h3><div class=\"form-group\"><div class=\"col-sm-12\"><div><input type=\"text\" class=\"form-control\" name=\"notes\" ng-model=\"deviceDetailsCtrl.currentDevice.notes\"></div></div></div><hr></section><md-card-actions layout=\"row\" layout-align=\"end center\"><md-button type=\"submit\" class=\"md-raised md-primary\" ng-disabled=\"deviceForm.$pristine || deviceForm.$invalid\"><i class=\"fa fa-fw fa-save\"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content>");$templateCache.put("app/device/devices-listing.html","<div ng-controller=\"DevicesListingCtrl as vm\" ng-init=\"vm.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-desktop ng-scope\"></i> Devices</h2></div></md-toolbar><md-content><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-tabs md-dynamic-height=\"\" md-border-bottom=\"\"><md-tab label=\"Managed\"><div ng-include=\"\'webapp/src/app/device/device-listing-managed.html\'\"></div></md-tab><md-tab label=\"Unmanaged\"><div ng-include=\"\'webapp/src/app/device/device-listing-unmanaged.html\'\"></div></md-tab></md-tabs></div></md-content></div>");$templateCache.put("app/tenant/tenant-add.html","<div ng-controller=\"TenantAddCtrl\" ng-init=\"tenantAddCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenant</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><div flex=\"75\" flex-sm=\"50\" flex-xs=\"30\" layout=\"column\"><md-card><md-card-content><form name=\"tenantForm\" class=\"form-horizontal\" ng-submit=\"tenantAddCtrl.onClickSaveButton()\" novalidate=\"\"><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.name.$invalid && !tenantForm.name.$pristine }\"><div class=\"col-sm-4\"><label>Name</label> <input type=\"text\" class=\"form-control\" autofocus=\"\" name=\"name\" placeholder=\"Enter a name\" ng-change=\"tenantAddCtrl.autoGenerateTenantCode()\" ng-model=\"tenantAddCtrl.currentTenant.name\" required=\"\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine }\"><div class=\"col-sm-4\"><label>Code</label> <input type=\"text\" class=\"form-control\" name=\"tenantCode\" placeholder=\"Code in Google Device Management\" ng-model=\"tenantAddCtrl.currentTenant.tenant_code\" required=\"\" ng-pattern=\"/^[a-z0-9_]*$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine\" class=\"help-block\">Alphanumeric and underscore are allowed.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.chromeDeviceDomain.$invalid && !tenantForm.chromeDeviceDomain.$pristine }\"><div class=\"col-sm-4\"><label>Domain</label><select id=\"chromeDeviceDomain\" ng-model=\"tenantAddCtrl.selectedDomain\" class=\"form-control\" ng-options=\"i.name for i in tenantAddCtrl.distributorDomains track by i.key\" required=\"\"><option value=\"\">Select domain</option></select></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine }\"><div class=\"col-sm-4\"><label>Admin email</label> <input type=\"email\" required=\"\" class=\"form-control\" name=\"adminEmail\" id=\"adminEmail\" placeholder=\"Enter a valid admin email\" ng-model=\"tenantAddCtrl.currentTenant.admin_email\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine\" class=\"help-block\">A valid admin email is required.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.contentManagerUrl.$invalid && !tenantForm.contentManagerUrl.$pristine }\"><div class=\"col-sm-5\"><label>Content manager URL</label> <input type=\"url\" required=\"\" class=\"form-control\" name=\"contentManagerUrl\" id=\"contentManagerUrl\" placeholder=\"Enter content server URL\" ng-model=\"tenantAddCtrl.currentTenant.content_manager_base_url\" ng-pattern=\"/^https:\\/\\/\\S+$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.contentManagerUrl.$invalid && !tenantForm.contentManagerUrl.$pristine\" class=\"help-block\">Content manager URL must be a secure https URL.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.playerContentUrl.$invalid && !tenantForm.playerContentUrl.$pristine }\"><div class=\"col-sm-5\"><label>Player content URL</label> <input type=\"url\" required=\"\" class=\"form-control\" name=\"playerContentUrl\" id=\"playerContentUrl\" placeholder=\"Enter content server URL\" ng-model=\"tenantAddCtrl.currentTenant.content_server_url\" ng-pattern=\"/^https:\\/\\/\\S+$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.playerContentUrl.$invalid && !tenantForm.playerContentUrl.$pristine\" class=\"help-block\">Player content URL must be a secure https URL.</p></div></div><div class=\"form-group\"><div class=\"col-sm-5\"><label>Default timezone</label><select id=\"timezone\" ng-model=\"tenantAddCtrl.selectedTimezone\" class=\"form-control\" ng-options=\"item for item in tenantAddCtrl.timezones track by item\"></select></div></div><div class=\"form-group\"><div class=\"col-sm-5\"><label>Notification emails</label> <input type=\"text\" class=\"form-control\" name=\"notificationEmails\" id=\"notificationEmails\" placeholder=\"Enter comma-delimited emails\" ng-model=\"tenantAddCtrl.currentTenant.notification_emails\"></div></div><div class=\"form-group\"><div class=\"col-sm-9\"><input type=\"checkbox\" name=\"proofOfPlayLogging\" id=\"proofOfPlayLogging\" ng-model=\"tenantAddCtrl.currentTenant.proof_of_play_logging\"> <label>Proof of play logging</label></div></div><div class=\"form-group\"><div class=\"col-sm-9\"><input type=\"checkbox\" id=\"active\" ng-model=\"tenantAddCtrl.currentTenant.active\"> <label for=\"active\">Active</label></div></div><md-card-actions layout=\"row\" layout-align=\"center\"><md-button type=\"submit\" ng-disabled=\"tenantForm.$invalid\" class=\"md-raised md-primary\"><i class=\"fa fa-fw fa-save\"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenant-details.html","<div ng-controller=\"TenantDetailsCtrl\" ng-init=\"tenantDetailsCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenants</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><md-tabs md-stretch-tabs=\"\" md-selected=\"tabIndex\"><md-tab label=\"General\"></md-tab><md-tab label=\"Managed Devices\"></md-tab><md-tab label=\"Unmanaged Devices\"></md-tab><md-tab label=\"Locations\"></md-tab></md-tabs><div flex=\"75\" flex-sm=\"50\" flex-xs=\"30\" layout=\"column\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">{{ tenantDetailsCtrl.currentTenant.name }}</span></md-card-title-text></md-card-title><md-card-content><form name=\"tenantForm\" class=\"form-horizontal\" ng-submit=\"tenantDetailsCtrl.onClickSaveButton()\" novalidate=\"\"><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.name.$invalid && !tenantForm.name.$pristine }\"><div class=\"col-sm-4\"><label>Name</label> <input type=\"text\" class=\"form-control\" autofocus=\"\" name=\"name\" placeholder=\"Enter a name\" ng-change=\"!tenantDetailsCtrl.editMode && tenantDetailsCtrl.autoGenerateTenantCode()\" ng-model=\"tenantDetailsCtrl.currentTenant.name\" required=\"\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine }\"><div class=\"col-sm-4\"><label>Code</label> <input type=\"text\" ng-readonly=\"tenantDetailsCtrl.editMode == true\" class=\"form-control\" name=\"tenantCode\" placeholder=\"Code matching Google Device Management\" ng-model=\"tenantDetailsCtrl.currentTenant.tenant_code\" required=\"\" ng-pattern=\"/^[a-z0-9_]*$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.tenantCode.$invalid && !tenantForm.tenantCode.$pristine\" class=\"help-block\">Alphanumeric and underscore are allowed.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.chromeDeviceDomain.$invalid && !tenantForm.chromeDeviceDomain.$pristine }\"><div class=\"col-sm-4\"><label>Domain</label><select id=\"chromeDeviceDomain\" ng-model=\"tenantDetailsCtrl.selectedDomain\" class=\"form-control\" ng-options=\"i.name for i in tenantDetailsCtrl.distributorDomains track by i.key\" required=\"\"><option value=\"\">Select domain</option></select></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine }\"><div class=\"col-sm-4\"><label>Admin email</label> <input type=\"email\" required=\"\" ng-readonly=\"tenantDetailsCtrl.editMode == true\" class=\"form-control\" name=\"adminEmail\" id=\"adminEmail\" placeholder=\"Enter a valid admin email\" ng-model=\"tenantDetailsCtrl.currentTenant.admin_email\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.adminEmail.$invalid && !tenantForm.adminEmail.$pristine\" class=\"help-block\">A valid admin email is required.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.contentManagerBaseUrl.$invalid && !tenantForm.contentManagerBaseUrl.$pristine }\"><div class=\"col-sm-5\"><label>Content manager URL</label> <input type=\"url\" required=\"\" class=\"form-control\" name=\"contentManagerBaseUrl\" id=\"contentManagerBaseUrl\" placeholder=\"Enter content manager base URL\" ng-model=\"tenantDetailsCtrl.currentTenant.content_manager_base_url\" ng-pattern=\"/^https:\\/\\/\\S+$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.contentManagerBaseUrl.$invalid && !tenantForm.contentManagerBaseUrl.$pristine\" class=\"help-block\">Content manager URL must be a secure URL.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : tenantForm.contentServerUrl.$invalid && !tenantForm.contentServerUrl.$pristine }\"><div class=\"col-sm-5\"><label>Player content URL</label> <input type=\"url\" required=\"\" class=\"form-control\" name=\"contentServerUrl\" id=\"contentServerUrl\" placeholder=\"Enter content server URL\" ng-model=\"tenantDetailsCtrl.currentTenant.content_server_url\" ng-pattern=\"/^https:\\/\\/\\S+$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"tenantForm.contentServerUrl.$invalid && !tenantForm.contentServerUrl.$pristine\" class=\"help-block\">Player content URL must be a secure URL.</p></div></div><div class=\"form-group\"><div class=\"col-sm-5\"><label>Default timezone</label><select id=\"timezone\" ng-model=\"tenantDetailsCtrl.selectedTimezone\" class=\"form-control\" ng-options=\"item for item in tenantDetailsCtrl.timezones track by item\"><option value=\"\">Select default device timezone</option></select></div><div class=\"col-sm-2\"><md-button class=\"md-fab md-primary\" aria-label=\"Default timezone\"><md-tooltip>Timezone is for operations and reporting. Devices in this tenant inherit this timezone. You may override this timezone for individual devices.</md-tooltip><md-icon><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"></path><path d=\"M17 12V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></svg></md-icon></md-button></div></div><div class=\"form-group\"><div class=\"col-sm-5\"><label>Notification emails</label> <input type=\"text\" class=\"form-control\" name=\"notificationEmails\" id=\"notificationEmails\" placeholder=\"Enter comma-delimited emails\" ng-model=\"tenantDetailsCtrl.currentTenant.notification_emails\"></div></div><div class=\"form-group\" ng-hide=\"tenantDetailsCtrl.currentTenant.proof_of_play_logging == false || tenantDetailsCtrl.gameStopServer\" ng-class=\"{ \'has-error\' : !tenantDetailsCtrl.gameStopServer && tenantForm.proofOfPlayUrl.$invalid && !tenantForm.proofOfPlayUrl.$pristine }\"><div class=\"col-sm-5\"><label>Proof of play URL</label> <input type=\"url\" class=\"form-control\" name=\"proofOfPlayUrl\" id=\"proofOfPlayUrl\" ng-required=\"tenantDetailsCtrl.currentTenant.proof_of_play_logging == true && !tenantDetailsCtrl.gameStopServer\" placeholder=\"Enter proof-of-play URL\" ng-model=\"tenantDetailsCtrl.currentTenant.proof_of_play_url\" ng-pattern=\"/^https:\\/\\/\\S+$/\"></div><div class=\"col-sm-4 margin-top-20 help-block\" ng-show=\"tenantForm.proofOfPlayUrl.$invalid && !tenantForm.proofOfPlayUrl.$pristine\">Proof of play URL must be a secure URL.</div></div><div class=\"form-group\"><div class=\"col-sm-9\"><input type=\"checkbox\" ng-model=\"tenantDetailsCtrl.currentTenant.proof_of_play_logging\"> <label>Proof of play logging</label></div></div><div class=\"form-group\"><div class=\"col-sm-9\"><input type=\"checkbox\" id=\"active\" ng-model=\"tenantDetailsCtrl.currentTenant.active\"> <label for=\"active\">Active</label></div></div><md-card-actions layout=\"row\" layout-align=\"center\"><md-button type=\"submit\" ng-disabled=\"tenantForm.$invalid\" class=\"md-raised md-primary\"><i class=\"fa fa-fw fa-save\"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenant-location.html","<div ng-controller=\"TenantLocationCtrl\" ng-init=\"tenantLocationCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-location-arrow ng-scope\"></i> Location</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><div flex=\"75\" flex-sm=\"50\" flex-xs=\"30\" layout=\"column\"><md-card><md-card-content><form name=\"locationForm\" class=\"form-horizontal\" ng-submit=\"tenantLocationCtrl.onClickSaveButton()\" novalidate=\"\"><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.customerLocationName.$invalid && !locationForm.customerLocationName.$pristine }\"><div class=\"col-sm-4\"><label>Customer Location Name</label> <input type=\"text\" class=\"form-control\" autofocus=\"\" name=\"customerLocationName\" placeholder=\"Enter a customer location name\" ng-change=\"tenantLocationCtrl.autoGenerateCustomerLocationCode()\" ng-model=\"tenantLocationCtrl.location.customerLocationName\" required=\"\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.customerLocationCode.$invalid && !locationForm.customerLocationCode.$pristine }\"><div class=\"col-sm-4\"><label>Customer Location Code</label> <input type=\"text\" ng-readonly=\"tenantLocationCtrl.editMode == true\" class=\"form-control\" name=\"customerLocationCode\" placeholder=\"Auto-generated\" ng-model=\"tenantLocationCtrl.location.customerLocationCode\" required=\"\" ng-pattern=\"/^[a-z0-9_]*$/\"></div><div class=\"col-sm-5 margin-top-15\"><p ng-show=\"locationForm.tenantCode.$invalid && !locationForm.tenantCode.$pristine\" class=\"help-block\">Alphanumeric and underscore are allowed.</p></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.address.$invalid && !locationForm.address.$pristine }\"><div class=\"col-sm-4\"><label>Address</label> <input type=\"text\" class=\"form-control\" name=\"address\" placeholder=\"Enter a street address\" ng-model=\"tenantLocationCtrl.location.address\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.city.$invalid && !locationForm.city.$pristine }\"><div class=\"col-sm-4\"><label>City</label> <input type=\"text\" class=\"form-control\" name=\"city\" placeholder=\"Enter a city\" ng-model=\"tenantLocationCtrl.location.city\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.state.$invalid && !locationForm.state.$pristine }\"><div class=\"col-sm-4\"><label>State</label> <input type=\"text\" class=\"form-control\" name=\"state\" placeholder=\"Enter a state\" ng-model=\"tenantLocationCtrl.location.state\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.postalCode.$invalid && !locationForm.postalCode.$pristine }\"><div class=\"col-sm-4\"><label>Postal code</label> <input type=\"text\" class=\"form-control\" name=\"postalCode\" placeholder=\"Enter a postal code\" ng-model=\"tenantLocationCtrl.location.postalCode\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.latitude.$invalid && !locationForm.latitude.$pristine }\"><div class=\"col-sm-4\"><label>Latitude</label> <input type=\"text\" class=\"form-control\" name=\"latitude\" placeholder=\"Enter a latitude\" ng-model=\"tenantLocationCtrl.location.latitude\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.longitude.$invalid && !locationForm.longitude.$pristine }\"><div class=\"col-sm-4\"><label>Longitude</label> <input type=\"text\" class=\"form-control\" name=\"longitude\" placeholder=\"Enter a longitude\" ng-model=\"tenantLocationCtrl.location.longitude\"></div></div><div class=\"form-group\" ng-class=\"{ \'has-error\' : locationForm.dma.$invalid && !locationForm.dma.$pristine }\"><div class=\"col-sm-4\"><label>DMA</label> <input type=\"text\" class=\"form-control\" name=\"dma\" placeholder=\"Enter a dma\" ng-model=\"tenantLocationCtrl.location.dma\"></div></div><div class=\"form-group\"><div class=\"col-sm-9\"><input type=\"checkbox\" id=\"active\" ng-model=\"tenantLocationCtrl.location.active\"> <label for=\"active\">Active</label></div></div><md-card-actions layout=\"row\" layout-align=\"center\"><md-button type=\"submit\" ng-disabled=\"locationForm.$invalid\" class=\"md-raised md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-save\"></i> Save</md-button></md-card-actions></form></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenant-locations.html","<div ng-controller=\"TenantLocationsCtrl as vm\" ng-init=\"vm.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenants</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><md-tabs md-stretch-tabs=\"\" md-selected=\"tabIndex\"><md-tab label=\"General\"></md-tab><md-tab label=\"Managed Devices\"></md-tab><md-tab label=\"Unmanaged Devices\"></md-tab><md-tab label=\"Locations\"></md-tab></md-tabs><div flex=\"90\" flex-sm=\"90\" flex-xs=\"90\" layout=\"column\"><md-card><md-card-title><md-card-title-text><span class=\"md-headline\">{{ vm.currentTenant.name }}</span></md-card-title-text><md-button href=\"#/tenants/{{ vm.currentTenant.key }}/location\" class=\"md-raised md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-plus\"></i> Add</md-button></md-card-title><md-card-content><div class=\"row\"><div class=\"col-lg-12\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.prev_cursor\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.next_cursor\" ng-click=\"vm.paginateCall(true)\">Next</md-button></div></div><div class=\"col-lg-12\"><table name=\"tenant-locations-table\" class=\"table table-responsive table-striped\"><thead><tr><th></th><th>Customer Location Name</th><th>Customer Location Code</th><th>City</th></tr></thead><tbody><tr ng-hide=\"vm.locations.length\"><td class=\"text-center text-danger\" colspan=\"4\">{{ vm.currentTenant.name }} has no locations.</td></tr><tr ng-repeat=\"item in vm.locations | orderBy:\'customerLocationName\'\" ng-click=\"vm.editItem(item)\"><td><a ng-click=\"vm.editItem(item)\" title=\"Location detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{item.customerLocationName}}</td><td>{{item.customerLocationCode}}</td><td>{{item.city}} {{item.state}}</td></tr></tbody></table></div></div></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenant-managed-devices.html","<div ng-controller=\"TenantManagedDevicesCtrl as vm\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenants</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><md-tabs md-dynamic-height=\"\" md-selected=\"tabIndex\" md-border-bottom=\"\"><md-tab label=\"General\"></md-tab><md-tab label=\"Managed Devices\"></md-tab><md-tab label=\"Unmanaged Devices\"></md-tab><md-tab label=\"Locations\"></md-tab></md-tabs><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-4\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshDevices()\">Refresh</md-button></div><div class=\"col-md-3 col-md-offset-1\"><md-radio-group ng-model=\"vm.selectedButton\" ng-change=\"vm.changeRadio()\" class=\"radio-horizontal\"><div class=\"col-md-4\"><md-radio-button value=\"Serial Number\" class=\"md-primary\">Serial Number</md-radio-button></div><div class=\"col-md-2 col-md-offset-2\"><md-radio-button value=\"MAC\" class=\"md-primary radio-button\">MAC</md-radio-button></div></md-radio-group></div><div class=\"col-md-3\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.searchDevices(vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isResourceValid(vm.searchText)\" md-selected-item-change=\"vm.isResourceValid(vm.searchText)\" placeholder=\"Make A Search\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\" style=\"margin-left: -20px !important; margin-top: -4px !important\"><md-button class=\"md-raised md-primary\" aria-label=\"OPEN\" ng-disabled=\"vm.disabled\" ng-click=\"vm.prepareForEditView(vm.searchText)\"><div ng-if=\"!vm.loadingDisabled\">OPEN</div><div ng-if=\"vm.loadingDisabled\">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><table class=\"table table-responsive table-striped\"><thead><tr><th></th><th><i class=\"fa fa-fw fa-wifi\"></i> MAC</th><th><i class=\"fa fa-fw fa-plug\"></i> MAC</th><th>Serial number</th><th>Provisioned</th><th></th></tr></thead><tbody><tr ng-hide=\"vm.tenantDevices.length\"><td colspan=\"6\" class=\"text-center text-danger\">No managed devices retrieved for {{ vm.currentTenant.name }}.</td></tr><tr ng-repeat=\"item in vm.tenantDevices | orderBy:\'-created\'\" ng-click=\"vm.editItem(item)\"><td><a ng-click=\"vm.editItem(item)\" class=\"md-primary md-ink-ripple\" title=\"Device detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{ item.macAddress }}</td><td>{{ item.ethernetMacAddress }}</td><td><a name=\"edit-device\" class=\"md-primary md-ink-ripple\" ng-click=\"vm.editItem(item)\" title=\"Device detail\">{{item.serialNumber}}</a></td><td>{{ item.created }}</td><td class=\"up-{{ item.up}}-background\"></td></tr></tbody></table></md-card-content></md-card><md-card ng-if=\"vm.tenantDevices.length > 10\"><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true)\">Next</md-button></div></div></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenant-unmanaged-devices.html","<div ng-controller=\"TenantUnmanagedDevicesCtrl as vm\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenants</h2></div></md-toolbar><md-content class=\"md-padding\"><div flex=\"80\" flex-xs=\"100\" layout=\"column\"><div ncy-breadcrumb=\"\"></div></div><md-tabs md-stretch-tabs=\"\" md-selected=\"tabIndex\"><md-tab label=\"General\"></md-tab><md-tab label=\"Managed Devices\"></md-tab><md-tab label=\"Unmanaged Devices\"></md-tab><md-tab label=\"Locations\"></md-tab></md-tabs><div flex=\"100\" flex-sm=\"100\" flex-xs=\"100\" layout=\"column\"><md-card><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-4\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true)\">Next</md-button><md-button class=\"md-raised md-primary\" ng-click=\"vm.refreshDevices()\">Refresh</md-button></div><div class=\"col-md-3 col-md-offset-1\"><md-radio-group ng-model=\"vm.selectedButton\" ng-change=\"vm.changeRadio()\" class=\"radio-horizontal\"><div class=\"col-md-4\"><md-radio-button value=\"Serial Number\" class=\"md-primary\" ng-disabled=\"true\">Serial Number</md-radio-button></div><div class=\"col-md-2 col-md-offset-2\"><md-radio-button value=\"MAC\" class=\"md-primary radio-button\">MAC</md-radio-button></div></md-radio-group></div><div class=\"col-md-3\"><md-autocomplete md-no-cache=\"true\" md-selected-item=\"vm.selectedItem\" md-search-text=\"vm.searchText\" md-items=\"item in vm.searchDevices(vm.searchText)\" md-item-text=\"item\" md-min-length=\"0\" md-search-text-change=\"vm.isResourceValid(vm.searchText)\" md-selected-item-change=\"vm.isResourceValid(vm.searchText)\" placeholder=\"Make A Search\"><md-item-template><span md-highlight-text=\"vm.searchText\" md-highlight-flags=\"^i\">{{item}}</span></md-item-template><md-not-found><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length > 2\">No results for \"{{vm.searchText}}\" were found.</div><div ng-if=\"vm.searchText !== \'\' && vm.searchText.length <= 2\">Please enter at least 3 characters.</div></md-not-found></md-autocomplete></div><div class=\"col-md-1\" style=\"margin-left: -20px !important; margin-top: -4px !important\"><md-button class=\"md-raised md-primary\" aria-label=\"OPEN\" ng-disabled=\"vm.disabled\" ng-click=\"vm.prepareForEditView(vm.searchText)\"><div ng-if=\"!vm.loadingDisabled\">OPEN</div><div ng-if=\"vm.loadingDisabled\">Loading...</div></md-button></div></div></md-card-content></md-card><md-card><md-card-content><table class=\"table table-responsive table-striped\"><thead><tr><th></th><th><i class=\"fa fa-fw fa-wifi\"></i> MAC</th><th><i class=\"fa fa-fw fa-plug\"></i> MAC</th><th>Provisioned</th></tr></thead><tbody><tr ng-hide=\"vm.tenantDevices.length\"><td colspan=\"4\" class=\"text-center text-danger\">No unmanaged devices retrieved for {{ vm.currentTenant.name }}.</td></tr><tr ng-repeat=\"item in vm.tenantDevices | orderBy:\'-created\'\" ng-click=\"vm.editItem(item)\"><td><a ng-click=\"vm.editItem(item)\" title=\"Device detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{ item.macAddress }}</td><td>{{ item.ethernetMacAddress }}</td><td>{{ item.created }}</td><td class=\"up-{{ item.up}}-background\"></td></tr></tbody></table></md-card-content></md-card><md-card ng-if=\"vm.tenantDevices.length > 10\"><md-card-content><div class=\"col-md-12\"><div class=\"col-sm-3\"><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesPrev\" ng-click=\"vm.paginateCall(false)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"!vm.devicesNext\" ng-click=\"vm.paginateCall(true)\">Next</md-button></div></div></md-card-content></md-card></div></md-content></div>");$templateCache.put("app/tenant/tenants-listing.html","<div ng-controller=\"TenantsCtrl\" ng-init=\"tenantsCtrl.initialize()\" layout=\"column\" ng-cloak=\"\"><md-toolbar class=\"md-hue-2\"><div class=\"md-toolbar-tools\"><h2 class=\"md-flex\"><i class=\"fa fa-fw fa-group ng-scope\"></i> Tenants</h2></div></md-toolbar><md-content><div flex=\"90\" flex-sm=\"90\" flex-xs=\"90\" layout=\"column\"><md-card><md-card-content><div class=\"row\"><div class=\"col-lg-12\"><md-card-actions layout=\"row\"><div class=\"col-sm-3\" style=\"float: left\">{{offset}}<md-button class=\"md-raised\" ng-disabled=\"tenantsCtrl.is_first_page || tenantsCtrl.loading\" ng-click=\"tenantsCtrl.getTenants(100, tenantsCtrl.offset - 100)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"tenantsCtrl.is_last_page || tenantsCtrl.loading\" ng-click=\"tenantsCtrl.getTenants(100, tenantsCtrl.offset + 100)\">Next</md-button></div><div class=\"col-md-1 col-md-offset-7\"><md-button href=\"#/tenants/add\" class=\"md-raised md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-plus\"></i> Add</md-button></div></md-card-actions><table name=\"tenant-table\" class=\"table table-responsive table-striped\"><thead><tr><th></th><th>Name</th><th>Code</th><th>Content Server URL</th><th>Admin email</th></tr></thead><tbody><tr ng-hide=\"tenantsCtrl.tenants.length\"><td class=\"no-devices text-center text-danger\" colspan=\"5\">No tenants</td></tr><tr ng-repeat=\"item in tenantsCtrl.tenants | orderBy:\'name\'\" ng-click=\"tenantsCtrl.editItem(item)\"><td><a ng-click=\"tenantsCtrl.editItem(item)\" title=\"Tenant detail\"><ng-md-icon icon=\"mode_edit\" size=\"48\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z\"></path><path d=\"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></svg></ng-md-icon></a></td><td>{{item.name}}</td><td>{{item.tenant_code}}</td><td>{{item.content_server_url}}</td><td>{{item.admin_email}}</td></tr></tbody></table><md-card-actions layout=\"row\" ng-if=\"tenantsCtrl.tenants.length > 25\"><div class=\"col-sm-3\" style=\"float: left\">{{offset}}<md-button class=\"md-raised\" ng-disabled=\"tenantsCtrl.is_first_page || tenantsCtrl.loading\" ng-click=\"tenantsCtrl.getTenants(100, tenantsCtrl.offset - 100)\">Prev</md-button><md-button class=\"md-raised\" ng-disabled=\"tenantsCtrl.is_last_page || tenantsCtrl.loading\" ng-click=\"tenantsCtrl.getTenants(100, tenantsCtrl.offset + 100)\">Next</md-button></div><div class=\"col-md-1 col-md-offset-7\"><md-button href=\"#/tenants/add\" class=\"md-raised md-primary md-button md-ink-ripple\"><i class=\"fa fa-fw fa-plus\"></i> Add</md-button></div></md-card-actions></div></div></md-card-content></md-card></div></md-content></div>");}]);